var app=angular.module("app",["ngAnimate","ui.bootstrap","ngLodash","ngRoute"]);angular.module("app").config(["$routeProvider","$locationProvider",function(t,e){t.when("/data",{templateUrl:"static/dist/templates/data.html",controller:"DataVizController"}).when("/about",{templateUrl:"static/dist/templates/about.html",controller:"AboutPageController"}).otherwise({redirectTo:"/data"})}]),angular.module("app").filter("suppressions",function(){return function(t){return"-9999"===t?"NA":"-666666"===t?" &mdash; ":t}}).filter("sluggify",function(){return function(t){return t.toLowerCase().replace(/[^a-zA-Z0-9_]/g,"_")}}).filter("safe",["$sce",function(t){return t.trustAsHtml}]),angular.module("app").controller("AboutPageController",["$scope","$http","$log","$location","sidebarDisplay","contributors",function(t,e,o,n,r,l){t.toggle=r.toggle,console.log(t.toggle);var i=l.getContributors("all");i.then(function(e){t.contributors=l.list},function(t){alert("promise rejected!")}),t.$on("$viewContentLoaded",function(e){t.toggle.open=!1})}]),angular.module("app").controller("DataVizController",["$scope","$http","$log","$location","$filter","sidebarDisplay","categories","lodash",function(t,e,o,n,r,l,i,a){t.toggle=l.toggle,t.toggleChart=function(t){t=r("sluggify")(t),$("#"+t).toggle()};var c=i.getCategories("all");c.then(function(e){t.categories=i.list},function(t){alert("promise rejected!")}),t.$on("$viewContentLoaded",function(e){t.toggle.open=!0})}]),angular.module("app").directive("simpletable",function(){var t=tableChart();return{restrict:"E",scope:{data:"=data"},link:function(e,o,n){e.$watchCollection("data",function(e){d3.select(o[0]).datum(e).call(t)})}}}),angular.module("app").directive("timeseries",[function(t){var e=timeSeries();return{restrict:"E",scope:{data:"=data"},link:function(t,o,n){t.$watchCollection("data",function(t){t={data:t,config:{width:o.parent()[0].getBoundingClientRect().width}},d3.select(o[0]).datum(t).call(e)})}}}]),angular.module("app").service("categories",["$http","$q","lodash",function(t,e,o){var n={};return n.list=[],n.toggle=function(t){position=o.findIndex(n.list,function(e){return e.name==t.name}),n.list[position].selected=!n.list[position].selected},n.getCategories=function(){return e(n.list.length>0?function(t){t(n)}:function(e,r){t.get("/static/dist/data/data.json").success(function(t){n.list=o.map(o.sortBy(t,"rank"),function(t){return o.extend({},t,{selected:!0})}),n.list,e(n)}).error(function(){r("There was an error getting categories")})})},n}]),angular.module("app").service("contributors",["$http","$q",function(t,e){var o={};return o.list=[],o.getContributors=function(){return e(o.list.length>0?function(t){t(o)}:function(e,n){t.get("/static/dist/data/contributors.json").success(function(t){o.list=t,e(o)}).error(function(){n("There was an error getting contributors")})})},o}]),angular.module("app").controller("SidebarController",["$scope","$log","lodash","categories","contributors",function(t,e,o,n,r){var l=n.getCategories();l.then(function(e){t.categories=n.list},function(t){alert("promise rejected!")});var i=r.getContributors();i.then(function(e){t.contributors=r.list},function(t){alert("promise rejected!")}),t.updateSelected=function(t){n.toggle(t),console.log(o.pluck(n.list,"selected"))},t.checkSelected=function(t){return t?"selected":"deselected"},t.$watchCollection(function(){return t.toggle},function(){console.log("toggled triggered from sidebar"),console.log(t.toggle)})}]),angular.module("app").service("sidebarDisplay",function(){return{toggle:{open:!0}}}),angular.module("app").controller("WrapController",["$scope","sidebarDisplay",function(t,e){t.toggle=e.toggle,t.$watchCollection(function(){return t.toggle},function(){console.log("toggled triggered from wrap"),console.log(t.toggle)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsInJvdXRlcy5qcyIsImZpbHRlcnMuanMiLCJhYm91dHBhZ2UvYWJvdXRwYWdlLmNvbnRyb2xsZXIuanMiLCJkYXRhdml6L2RhdGF2aXouY29udHJvbGxlci5qcyIsImRhdGF2aXovc2ltcGxldGFibGUuZGlyZWN0aXZlLmpzIiwiZGF0YXZpei90aW1lc2VyaWVzLmRpcmVjdGl2ZS5qcyIsInNpZGViYXIvY2F0ZWdvcmllcy5zZXJ2aWNlLmpzIiwic2lkZWJhci9jb250cmlidXRvcnMuc2VydmljZS5qcyIsInNpZGViYXIvc2lkZWJhci5jb250cm9sbGVyLmpzIiwic2lkZWJhci9zaWRlYmFyZGlzcGxheS5zZXJ2aWNlLmpzIiwic2lkZWJhci93cmFwLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZpbHRlciIsImlucHV0IiwidG9Mb3dlckNhc2UiLCJyZXBsYWNlIiwiJHNjZSIsInRydXN0QXNIdG1sIiwiJHNjb3BlIiwiJGh0dHAiLCIkbG9nIiwiJGxvY2F0aW9uIiwic2lkZWJhckRpc3BsYXkiLCJjb250cmlidXRvcnMiLCJ0b2dnbGUiLCJjb25zb2xlIiwibG9nIiwiY29udHJpYnV0b3JQcm9taXNlIiwiZ2V0Q29udHJpYnV0b3JzIiwidGhlbiIsInJlc3VsdCIsImxpc3QiLCJyZWplY3Rpb24iLCJhbGVydCIsIiRvbiIsImV2ZW50Iiwib3BlbiIsIiRmaWx0ZXIiLCJjYXRlZ29yaWVzIiwibG9kYXNoIiwidG9nZ2xlQ2hhcnQiLCJzbHVnIiwiJCIsInByb21pc2UiLCJnZXRDYXRlZ29yaWVzIiwiZGlyZWN0aXZlIiwiY2hhcnQiLCJ0YWJsZUNoYXJ0IiwicmVzdHJpY3QiLCJzY29wZSIsImRhdGEiLCJsaW5rIiwiZWxlbWVudCIsImF0dHJzIiwiJHdhdGNoQ29sbGVjdGlvbiIsImQzIiwic2VsZWN0IiwiZGF0dW0iLCJjYWxsIiwiJHdpbmRvdyIsInRpbWVTZXJpZXMiLCJ3aWR0aCIsInBhcmVudCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInNlcnZpY2UiLCIkcSIsImNhdGVnb3J5IiwicG9zaXRpb24iLCJmaW5kSW5kZXgiLCJsaXN0Y2F0IiwibmFtZSIsInNlbGVjdGVkIiwibGVuZ3RoIiwicmVzb2x2ZSIsInJlamVjdCIsImdldCIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsIm1hcCIsInNvcnRCeSIsIm8iLCJleHRlbmQiLCJlcnJvciIsImNhdGVnb3J5UHJvbWlzZSIsInVwZGF0ZVNlbGVjdGVkIiwicGx1Y2siLCJjaGVja1NlbGVjdGVkIiwiYm9vbCJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxPQUNBLFlBQ0EsZUFDQSxXQUNBLFdDSkFELFNBQUFDLE9BQUEsT0FDQUMsUUFBQSxpQkFBQSxvQkFBQSxTQUFBQyxFQUFBQyxHQUNBRCxFQUNBRSxLQUFBLFNBQ0FDLFlBQUEsa0NBQ0FDLFdBQUEsc0JBRUFGLEtBQUEsVUFDQUMsWUFBQSxtQ0FDQUMsV0FBQSx3QkFFQUMsV0FDQUMsV0FBQSxhQ1pBVCxRQUFBQyxPQUFBLE9BQ0FTLE9BQUEsZUFBQSxXQUNBLE1BQUEsVUFBQUMsR0FDQSxNQUFBLFVBQUFBLEVBQ0EsS0FDQSxZQUFBQSxFQUNBLFlBRUFBLEtBSUFELE9BQUEsV0FBQSxXQUNBLE1BQUEsVUFBQUMsR0FDQSxNQUFBQSxHQUFBQyxjQUFBQyxRQUFBLGlCQUFBLFFBR0FILE9BQUEsUUFBQSxPQUFBLFNBQUFJLEdBQ0EsTUFBQUEsR0FBQUMsZUNsQkFmLFFBQUFDLE9BQUEsT0FDQU0sV0FBQSx1QkFDQSxTQUFBLFFBQUEsT0FBQSxZQUFBLGlCQUFBLGVBQ0EsU0FBQVMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQUwsRUFBQU0sT0FBQUYs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QUosRUFBQWxELEtBRUEyRCxNQUFBLFdBQ0FSLEVBQUEsZ0RBTUFuRCxLQ3hCQXJCLFFBQUFDLE9BQUEsT0FDQU0sV0FBQSxxQkFDQSxTQUFBLE9BQUEsU0FBQSxhQUFBLGVBQ0EsU0FBQVMsRUFBQUUsRUFBQW1CLEVBQUFELEVBQUFmLEdBS0EsR0FBQTRELEdBQUE3QyxFQUFBTSxlQUNBdUMsR0FBQXRELEtBQUEsU0FBQUMsR0FDQVosRUFBQW9CLFdBQUFBLEVBQUFQLE1BQ0EsU0FBQUMsR0FDQUMsTUFBQSxzQkFHQSxJQUFBTixHQUFBSixFQUFBSyxpQkFDQUQsR0FBQUUsS0FBQSxTQUFBQyxHQUNBWixFQUFBSyxhQUFBQSxFQUFBUSxNQUNBLFNBQUFDLEdBQ0FDLE1BQUEsdUJBS0FmLEVBQUFrRSxlQUFBLFNBQUFsQixHQUNBNUIsRUFBQWQsT0FBQTBDLEdBQ0F6QyxRQUFBQyxJQUFBYSxFQUFBOEMsTUFBQS9DLEVBQUFQLEtBQUEsY0FHQWIsRUFBQW9FLGNBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUNBLFdBRUEsY0FHQXJFLEVBQUFvQyxpQkFBQSxXQUNBLE1BQUFwQyxHQUFBTSxRQUNBLFdBQ0FDLFFBQUFDLElBQUEsa0NBQ0FELFFBQUFDLElBQUFSLEVBQUFNLGFDeENBdEIsUUFBQUMsT0FBQSxPQUNBNkQsUUFBQSxpQkFBQSxXQUNBLE9BQ0F4QyxRQUFBWSxNQUFBLE1DSEFsQyxRQUFBQyxPQUFBLE9BQ0FNLFdBQUEsa0JBQUEsU0FBQSxpQkFBQSxTQUFBUyxFQUFBSSxHQUNBSixFQUFBTSxPQUFBRixFQUFBRSxPQUVBTixFQUFBb0MsaUJBQUEsV0FDQSxNQUFBcEMsR0FBQU0sUUFDQSxXQUNBQyxRQUFBQyxJQUFBLCtCQUNBRCxRQUFBQyxJQUFBUixFQUFBTSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcbiAgICAnbmdBbmltYXRlJyxcbiAgICAndWkuYm9vdHN0cmFwJyxcbiAgICAnbmdMb2Rhc2gnLFxuICAgICduZ1JvdXRlJ1xuICAgIF0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29uZmlnKGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgIC53aGVuKCcvZGF0YScsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL2Rpc3QvdGVtcGxhdGVzL2RhdGEuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRGF0YVZpekNvbnRyb2xsZXInXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvYWJvdXQnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy9kaXN0L3RlbXBsYXRlcy9hYm91dC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBYm91dFBhZ2VDb250cm9sbGVyJ1xuICAgICAgICB9KVxuICAgICAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgICAgIHJlZGlyZWN0VG86ICcvZGF0YSdcbiAgICAgICAgfSk7XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmZpbHRlcignc3VwcHJlc3Npb25zJywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgIGlmIChpbnB1dCA9PT0gJy05OTk5Jykge1xuICAgICAgICByZXR1cm4gJ05BJztcbiAgICB9IGVsc2UgaWYgKGlucHV0ID09PSAnLTY2NjY2NicpIHtcbiAgICAgICAgcmV0dXJuICcgJm1kYXNoOyAnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG4gIH07XG59KVxuLmZpbHRlcignc2x1Z2dpZnknLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15hLXpBLVowLTlfXS9nLCBcIl9cIilcbiAgICB9O1xufSlcbi5maWx0ZXIoJ3NhZmUnLCBmdW5jdGlvbigkc2NlKSB7XG4gICAgcmV0dXJuICRzY2UudHJ1c3RBc0h0bWw7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdBYm91dFBhZ2VDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckaHR0cCcsICckbG9nJywgJyRsb2NhdGlvbicsLyogJyRhbmNob3JTY3JvbGwnLCAnJHJvb3RTY29wZScsICckcm91dGVQYXJhbXMnLCAqLydzaWRlYmFyRGlzcGxheScsICdjb250cmlidXRvcnMnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRsb2csICRsb2NhdGlvbiwvKiAkYW5jaG9yU2Nyb2xsLCAkcm9vdFNjb3BlLCAkcm91dGVQYXJhbXMsICovc2lkZWJhckRpc3BsYXksIGNvbnRyaWJ1dG9ycyl7XG4gICAgICAgICRzY29wZS50b2dnbGUgPSBzaWRlYmFyRGlzcGxheS50b2dnbGU7XG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS50b2dnbGUpO1xuXG4gICAgICAgIC8vICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24obmV3Um91dGUsIG9sZFJvdXRlKSB7XG4gICAgICAgIC8vICAgICAkbG9jYXRpb24uaGFzaCgkcm91dGVQYXJhbXMuc2Nyb2xsVG8pO1xuICAgICAgICAvLyAgICAgJGFuY2hvclNjcm9sbCgpO1xuICAgICAgICAvLyB9KTtcblxuICAgICAgICB2YXIgY29udHJpYnV0b3JQcm9taXNlID0gY29udHJpYnV0b3JzLmdldENvbnRyaWJ1dG9ycyhcImFsbFwiKTtcbiAgICAgICAgY29udHJpYnV0b3JQcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAkc2NvcGUuY29udHJpYnV0b3JzID0gY29udHJpYnV0b3JzLmxpc3Q7XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAgICAgICAgYWxlcnQoXCJwcm9taXNlIHJlamVjdGVkIVwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIC8vIEkgbWFkZSBjaGFuZ2VzIHRvIHRoZSBzaWRlYmFyIGRpc3BsYXkgc2VydmljZSwgcmVuYW1pbmcgdGhlIGludGVybmFsXG4gICAgICAgICAgICAvLyBzZXR0aW5nIHRvIGJlIFwib3BlblwiLCB3aGljaCBtYWtlcyBpdCBlYXNpZXIgdG8gaW50ZXJwcmV0IHRoaXMuIEkgbWFkZVxuICAgICAgICAgICAgLy8gY29ycmVzcG9uZGluZyBjaGFuZ2VzIGluIHRoZSBhYm91dCBhbmQgZGF0YSB0ZW1wbGF0ZXMuXG4gICAgICAgICAgICAvLyBUaGlzIGxpc3RlbmVyIGVuc3VyZXMgdGhhdCB0aGUgc2lkZWJhciBkb2Vzbid0IGdldCBjbG9zZWQsIHdoaWNoIHNvbWVob3dcbiAgICAgICAgICAgIC8vIHJlc29sdmVzIHRoZSBpc3N1ZSBvZiByZW5kZXJpbmcgdGhlIHRlbXBsYXRlIHVuZGVybmVhdCB0aGUgc2xpZGVvdXQgbWVudVxuICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZS5vcGVuID0gZmFsc2U7XG4gICAgICAgIH0pO1xuXG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0RhdGFWaXpDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckaHR0cCcsICckbG9nJywgJyRsb2NhdGlvbicsICckZmlsdGVyJywvKiAnJGFuY2hvclNjcm9sbCcsICckcm9vdFNjb3BlJywgJyRyb3V0ZVBhcmFtcycsICovJ3NpZGViYXJEaXNwbGF5JywgJ2NhdGVnb3JpZXMnLCAnbG9kYXNoJyxcbiAgICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkbG9nLCAkbG9jYXRpb24sICRmaWx0ZXIsLyogJGFuY2hvclNjcm9sbCwgJHJvb3RTY29wZSwgJHJvdXRlUGFyYW1zLCAqL3NpZGViYXJEaXNwbGF5LCBjYXRlZ29yaWVzLCBsb2Rhc2gpe1xuICAgICAgICB2YXIgbG8gPSBsb2Rhc2g7XG4gICAgICAgICRzY29wZS50b2dnbGUgPSBzaWRlYmFyRGlzcGxheS50b2dnbGU7XG5cbiAgICAgICAgJHNjb3BlLnRvZ2dsZUNoYXJ0ID0gZnVuY3Rpb24oc2x1Zykge1xuICAgICAgICAgICAgc2x1ZyA9ICRmaWx0ZXIoJ3NsdWdnaWZ5Jykoc2x1Zyk7XG5cbiAgICAgICAgICAgICQoXCIjXCIrc2x1ZykudG9nZ2xlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKG5ld1JvdXRlLCBvbGRSb3V0ZSkge1xuICAgICAgICAvLyAgICAgJGxvY2F0aW9uLmhhc2goJHJvdXRlUGFyYW1zLnNjcm9sbFRvKTtcbiAgICAgICAgLy8gICAgICRhbmNob3JTY3JvbGwoKTtcbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgdmFyIHByb21pc2UgPSBjYXRlZ29yaWVzLmdldENhdGVnb3JpZXMoXCJhbGxcIik7XG4gICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gY2F0ZWdvcmllcy5saXN0O1xuICAgICAgICB9LCBmdW5jdGlvbihyZWplY3Rpb24pIHtcbiAgICAgICAgICAgIGFsZXJ0KFwicHJvbWlzZSByZWplY3RlZCFcIik7XG4gICAgICAgIH0pXG5cbiAgICAgICAgICRzY29wZS4kb24oJyR2aWV3Q29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAkc2NvcGUudG9nZ2xlLm9wZW4gPSB0cnVlO1xuICAgICAgICB9KTtcbn1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uZGlyZWN0aXZlKCdzaW1wbGV0YWJsZScsIGZ1bmN0aW9uKCkge1xuICAgIC8vIFRoaXMgZnVuY3Rpb24gc2hvdWxkIHJlZmxlY3Qgd2hhdGV2ZXIgeW91ciBkMyB0YWJsZSBmdW5jdGlvbiBpcyBjYWxsZWQuXG4gICAgdmFyIGNoYXJ0ID0gdGFibGVDaGFydCgpO1xuICAgIHJldHVybiAge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgZGF0YTogXCI9ZGF0YVwiIC8vIFdlIGNhbiBjYWxsIHRoaXMgdy9lIHdlIHdhbnQuXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QoZWxlbWVudFswXSkuZGF0dW0oZGF0YSkuY2FsbChjaGFydCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5kaXJlY3RpdmUoJ3RpbWVzZXJpZXMnLCBbLyonJHdpbmRvdycsICovZnVuY3Rpb24oJHdpbmRvdykge1xuICAgIC8vIFRoaXMgZnVuY3Rpb24gc2hvdWxkIHJlZmxlY3Qgd2hhdGV2ZXIgeW91ciBkMyBmdW5jdGlvbiBpcyBjYWxsZWQuXG4gICAgdmFyIGNoYXJ0ID0gdGltZVNlcmllcygpO1xuICAgIHJldHVybiAge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgZGF0YTogXCI9ZGF0YVwiIC8vIFdlIGNhbiBjYWxsIHRoaXMgdy9lIHdlIHdhbnQuXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBkYXRhIDogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aWR0aFwiIDogZWxlbWVudC5wYXJlbnQoKVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KGVsZW1lbnRbMF0pLmRhdHVtKGRhdGEpLmNhbGwoY2hhcnQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgIFRoaXMgY29kZSBpcyBpbnRlbmRlZCB0byBnZXQgdGhlIGNoYXJ0IHRvIHJlZHJhdyB3aGVuIHRoZSB3aW5kb3cgaXMgcmVzaXplZFxuICAgICAgICAgICAgICAgIEJ1dCBhcyBpdCBzdGFuZHMsIHNvbWVob3cgdGhpcyBvdmVycmlkZXMgdGhlIGRhdGEgYW5kIHRoZSBjaGFydCBiZWNvbWVzIHVzZWxlc3MuXG4gICAgICAgICAgICAgICAgSSBkb24ndCB0aGluayB0aGlzIGZlYXR1cmUgaXMgd29ydGggdGhlIGRlYnVnIHRpbWUgbm93LCBidXQgaXQncyB3b3J0aCBrZWVwaW5nIGluIG1pbmQgZm9yIHRoZSBmdXR1cmUuXG4gICAgICAgICAgICAqKi9cbiAgICAgICAgICAgIC8vICR3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vICAgICBzY29wZS5yZW5kZXIoKVxuICAgICAgICAgICAgLy8gfTtcblxuICAgICAgICAgICAgLy8gc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIC8vICAgICBzY29wZS5yZW5kZXIoZGF0YSk7XG4gICAgICAgICAgICAvLyB9KTtcblxuICAgICAgICAgICAgLy8gc2NvcGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyAgICAgZGF0YSA9IHtcbiAgICAgICAgICAgIC8vICAgICAgICAgZGF0YSA6IHNjb3BlLmRhdGEsXG4gICAgICAgICAgICAvLyAgICAgICAgIGNvbmZpZyA6IHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIFwid2lkdGhcIiA6IGVsZW1lbnQucGFyZW50KClbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGhcbiAgICAgICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAgICAgLy8gICAgIH07XG5cbiAgICAgICAgICAgIC8vICAgICBkMy5zZWxlY3QoZWxlbWVudFswXSkuZGF0dW0oZGF0YSkuY2FsbChjaGFydCk7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgIH1cbiAgICB9XG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ2NhdGVnb3JpZXMnLCBbJyRodHRwJywgJyRxJywgJ2xvZGFzaCcsIGZ1bmN0aW9uKCRodHRwLCAkcSwgbG9kYXNoKSB7XG4gICAgdmFyIGNhdGVnb3JpZXMgPSB7fTtcbiAgICBjYXRlZ29yaWVzLmxpc3QgPSBbXTtcblxuICAgIGNhdGVnb3JpZXMudG9nZ2xlID0gZnVuY3Rpb24oY2F0ZWdvcnkpIHtcbiAgICAgICAgcG9zaXRpb24gPSBsb2Rhc2guZmluZEluZGV4KGNhdGVnb3JpZXMubGlzdCwgZnVuY3Rpb24obGlzdGNhdCkge1xuICAgICAgICAgICAgcmV0dXJuIGxpc3RjYXQubmFtZSA9PSBjYXRlZ29yeS5uYW1lO1xuICAgICAgICB9KTtcbiAgICAgICAgY2F0ZWdvcmllcy5saXN0W3Bvc2l0aW9uXS5zZWxlY3RlZCA9ICFjYXRlZ29yaWVzLmxpc3RbcG9zaXRpb25dLnNlbGVjdGVkO1xuICAgIH07XG5cbiAgICBjYXRlZ29yaWVzLmdldENhdGVnb3JpZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNhdGVnb3JpZXMubGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBpZiB0aGlzIG9iamVjdCBhbHJlYWR5IGhhcyBkYXRhLCBqdXN0IHVzZSB3aGF0J3MgY3VycmVudGx5IGF2YWlsYWJsZVxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUpe3Jlc29sdmUoY2F0ZWdvcmllcyl9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSBnZXQgZGF0YSBmcmVzaCBmcm9tIGZpbGVcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9zdGF0aWMvZGlzdC9kYXRhL2RhdGEuanNvbicpXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzLmxpc3QgPSBsb2Rhc2gubWFwKGxvZGFzaC5zb3J0QnkocmVzcG9uc2UsIFwicmFua1wiKSwgZnVuY3Rpb24obykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2Rhc2guZXh0ZW5kKHt9LCBvLCB7XCJzZWxlY3RlZFwiIDogdHJ1ZX0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllcy5saXN0XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGNhdGVnb3JpZXMpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoXCJUaGVyZSB3YXMgYW4gZXJyb3IgZ2V0dGluZyBjYXRlZ29yaWVzXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBjYXRlZ29yaWVzO1xufV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdjb250cmlidXRvcnMnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24oJGh0dHAsICRxKSB7XG4gICAgdmFyIGNvbnRyaWJ1dG9ycyA9IHt9O1xuICAgIGNvbnRyaWJ1dG9ycy5saXN0ID0gW107XG5cbiAgICBjb250cmlidXRvcnMuZ2V0Q29udHJpYnV0b3JzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChjb250cmlidXRvcnMubGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBpZiB0aGlzIG9iamVjdCBhbHJlYWR5IGhhcyBkYXRhLCBqdXN0IHVzZSB3aGF0J3MgY3VycmVudGx5IGF2YWlsYWJsZVxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUpe3Jlc29sdmUoY29udHJpYnV0b3JzKX0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIGdldCBkYXRhIGZyZXNoIGZyb20gZmlsZVxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL3N0YXRpYy9kaXN0L2RhdGEvY29udHJpYnV0b3JzLmpzb24nKVxuICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJpYnV0b3JzLmxpc3QgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoY29udHJpYnV0b3JzKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiVGhlcmUgd2FzIGFuIGVycm9yIGdldHRpbmcgY29udHJpYnV0b3JzXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBjb250cmlidXRvcnM7XG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ1NpZGViYXJDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckbG9nJywnbG9kYXNoJywgJ2NhdGVnb3JpZXMnLCAnY29udHJpYnV0b3JzJyxcbiAgICBmdW5jdGlvbigkc2NvcGUsICRsb2csIGxvZGFzaCwgY2F0ZWdvcmllcywgY29udHJpYnV0b3JzKSB7XG4gICAgICAgIC8vICRzY29wZS5zdGF0dXMgPSB7XG4gICAgICAgIC8vICAgICBpc29wZW46IGZhbHNlXG4gICAgICAgIC8vIH07XG5cbiAgICAgICAgdmFyIGNhdGVnb3J5UHJvbWlzZSA9IGNhdGVnb3JpZXMuZ2V0Q2F0ZWdvcmllcygpO1xuICAgICAgICBjYXRlZ29yeVByb21pc2UudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gY2F0ZWdvcmllcy5saXN0O1xuICAgICAgICB9LCBmdW5jdGlvbihyZWplY3Rpb24pIHtcbiAgICAgICAgICAgIGFsZXJ0KFwicHJvbWlzZSByZWplY3RlZCFcIik7XG4gICAgICAgIH0pXG5cbiAgICAgICAgdmFyIGNvbnRyaWJ1dG9yUHJvbWlzZSA9IGNvbnRyaWJ1dG9ycy5nZXRDb250cmlidXRvcnMoKTtcbiAgICAgICAgY29udHJpYnV0b3JQcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAkc2NvcGUuY29udHJpYnV0b3JzID0gY29udHJpYnV0b3JzLmxpc3Q7XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAgICAgICAgYWxlcnQoXCJwcm9taXNlIHJlamVjdGVkIVwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRnVuY3Rpb25zIGZvciBtYW5hZ2luZyB0aGUgcHJlc2VudGF0aW9uIG9mIHRoZSBzZWxlY3RlZCBpdGVtcyBpblxuICAgICAgICAvLyB0aGUgc2lkZWJhciBhbmQgcHJvcGlnYXRpbmcgc2VsZWN0aW9ucyB0aHJvdWdoIHRoZSBjYXRnb3JpZXMgc2VydmljZVxuICAgICAgICAkc2NvcGUudXBkYXRlU2VsZWN0ZWQgPSBmdW5jdGlvbihjYXRlZ29yeSkge1xuICAgICAgICAgICAgY2F0ZWdvcmllcy50b2dnbGUoY2F0ZWdvcnkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cobG9kYXNoLnBsdWNrKGNhdGVnb3JpZXMubGlzdCwgXCJzZWxlY3RlZFwiKSlcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuY2hlY2tTZWxlY3RlZCA9IGZ1bmN0aW9uKGJvb2wpIHtcbiAgICAgICAgICAgIGlmIChib29sKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwic2VsZWN0ZWRcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZGVzZWxlY3RlZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkc2NvcGUudG9nZ2xlO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidG9nZ2xlZCB0cmlnZ2VyZWQgZnJvbSBzaWRlYmFyXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnRvZ2dsZSk7XG4gICAgICAgIH0pO1xufV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdzaWRlYmFyRGlzcGxheScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRvZ2dsZTogeyBvcGVuOiB0cnVlIH1cbiAgICB9XG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignV3JhcENvbnRyb2xsZXInLCBbJyRzY29wZScsICdzaWRlYmFyRGlzcGxheScsIGZ1bmN0aW9uKCRzY29wZSwgc2lkZWJhckRpc3BsYXkpIHtcbiAgICAkc2NvcGUudG9nZ2xlID0gc2lkZWJhckRpc3BsYXkudG9nZ2xlO1xuXG4gICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLnRvZ2dsZTtcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInRvZ2dsZWQgdHJpZ2dlcmVkIGZyb20gd3JhcFwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS50b2dnbGUpO1xuICAgICAgICB9KTtcbn1dKVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
