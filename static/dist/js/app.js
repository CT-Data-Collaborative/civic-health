var app=angular.module("app",["ngAnimate","ui.bootstrap","ngLodash","ngRoute"]);angular.module("app").config(["$routeProvider","$locationProvider",function(t,e){t.when("/introduction",{templateUrl:"static/dist/templates/introduction.html",controller:"AboutPageController"}).when("/civic-engagement",{templateUrl:"static/dist/templates/civic-engagement.html",controller:"EngagementPageController"}).when("/political-participation",{templateUrl:"static/dist/templates/political-participation.html",controller:"ParticipationPageController"}).when("/community-cohesion",{templateUrl:"static/dist/templates/community-cohesion.html",controller:"CohesionPageController"}).when("/institutional-presence",{templateUrl:"static/dist/templates/institutional-presence.html",controller:"InstitutionPageController"}).when("/call-to-action",{templateUrl:"static/dist/templates/call-to-action.html",controller:"CallToActionPageController"}).when("/partners",{templateUrl:"static/dist/templates/partners.html",controller:"PartnersPageController"}).when("/raw-data",{templateUrl:"static/dist/templates/data.html",controller:"DataVizController"}).otherwise({redirectTo:"/introduction"})}]),angular.module("app").filter("suppressions",function(){return function(t){return"-9,999.0"===t||"-9999"===t?"&ddagger;":"-666,666.0"===t||"-666666"===t?"&dagger;":t}}).filter("percent",function(){return function(t){return parseInt(t)>0?t+"%":t}}).filter("anySuppressed",["lodash",function(t){return function(e,n){return e=t.flattenDeep(t.pluck(e,"data")),"undefined"!=typeof n?t.some(e,function(e){return e=t.values(e),-1!==t.indexOf(e,n)}):t.some(e,function(e){return e=t.values(e),-1!==t.indexOf(e,"-666666")||-1!==t.indexOf(e,"-9999")})}}]).filter("any",["lodash",function(t){return function(e,n){return"undefined"!=typeof n?t.some(e,n):t.some(e)}}]).filter("none",["lodash",function(t){return function(e,n){return"undefined"!=typeof n?!t.some(e,n):!t.some(e)}}]).filter("sluggify",function(){return function(t){return t.toLowerCase().replace(/[^a-zA-Z0-9_]/g,"_")}}).filter("safe",["$sce",function(t){return t.trustAsHtml}]),angular.module("app").controller("DataVizController",["$scope","$http","$log","$location","$filter","sidebarDisplay","categories","lodash",function(t,e,n,o,a,i,r,l){t.toggle=i.toggle,t.$on("$viewContentLoaded",function(e){t.toggle.open=!0,i.section="Raw Data"})}]),angular.module("app").directive("dataviz",["$window","$http","timeseriesService",function(t,e,n){var o={line:n.chart};return{restrict:"E",scope:{which:"=which",type:"=type"},link:function(t,n,a){t.render=function(){t.data?o[t.type](n[0],result.data,{}):e.get("/static/dist/data/csv/"+t.which+".csv").then(function(e){t.data=e.data,o[t.type](n[0],t.data,{})})},t.$watchCollection("which",function(){t.render()})}}}]),angular.module("app").directive("simpletable",function(){var t=tableChart();return{restrict:"E",scope:{data:"=data"},link:function(e,n,o){e.$watchCollection("data",function(e){d3.select(n[0]).datum(e).call(t)})}}}),angular.module("app").service("timeseriesService",["$q","$http","lodash",function(t,e,n){var o={};return o.chart=function(t,e,o){function a(t){t.each(function(t){var e=this.getBoundingClientRect(),n={top:.01*e.height,right:.01*e.width,bottom:.01*e.height,left:.01*e.width},o=e.width-(n.left+n.right);height=e.height-(n.top+n.bottom),colors=d3.scale.ordinal().range(["#1EACF1","#B94A48"]).domain(t);var a=(d3.select(this).selectAll("div").data(t).enter().append("svg").attr("height",height).attr("width",o).append("g").classed("legend",!0).attr("height",height).attr("width",o).attr("transform","translate("+n.left+", "+n.top+")"),legend.selectAll("g.entry").data(legendData).enter().append("g").attr("data-class",function(t){return sluggify(t)}).attr("class",function(t){var e=["entry",sluggify(t)].join(" ");return e}).attr("transform",function(t,e){return"translate(0, "+19*e+")"}).datum(function(t){return t}));a.each(function(){var t=a.selectAll("tspan").size();d3.select(this).attr("transform",function(e,n){return"translate(0, "+19*n+19*(t-n)+")"}),d3.select(this).append("path").attr("fill",function(t,e){return colors(t)}).attr("stroke",function(t,e){return colors(t)}).attr("stroke-width",0).attr("d",d3.svg.symbol().type(function(t){return symbolScale(t)}).size(25)),d3.select(this).append("text").attr("fill","#4A4A4A").attr("y",6).attr("dx",8).tspans(function(t){return d3.wordwrap(t,20)})}),d3.selectAll("tspan").attr("dx",8)})}function i(t){t.each(function(t){var e=this.getBoundingClientRect(),o={top:.05*e.height,right:.05*e.width,bottom:.1*e.height,left:d3.max([.05*e.width,55])},a=e.width-(o.left+o.right);height=e.height-(o.top+o.bottom),svg=d3.select(this).append("svg").attr("height",e.height).attr("width",e.width),chart=svg.append("g").attr("height",height).attr("width",a).attr("transform","translate("+o.left+", "+o.top+")"),colors=d3.scale.ordinal().range(["#1EACF1","#B94A48"]).domain(r),symbolScale=d3.scale.ordinal().range(d3.svg.symbolTypes).domain(r),timeFormat=d3.time.format("%Y"),timeRange=n.chain(t).map(function(t){return t.Year}).value(),x=d3.time.scale().range([12,a]).domain(d3.extent(timeRange).map(function(t){return timeFormat.parse(t)})),y=d3.scale.linear().range([height,0]).domain(d3.extent(n.chain(t).map(function(t){return r.map(function(e){return+t[e]})}).flatten().unique().value())).nice(5,10),xAxis=d3.svg.axis().scale(x).orient("bottom").ticks(d3.time.year,1),yAxis=d3.svg.axis().scale(y).orient("left").innerTickSize(-a).tickPadding(10),line=d3.svg.line().x(function(t){return x(t.Year)}).y(function(t){return y(t.Value)}),t=r.map(function(e){return{Key:e,Values:n.map(t,function(t){return{Year:timeFormat.parse(t.Year),Value:+t[e]}})}}),chart.append("g").classed({"x-axis":!0,axis:!0}).attr("transform","translate(0, "+height+")").call(xAxis),chart.append("g").classed({"y-axis":!0,axis:!0}).attr("transform","translate(-12, 0)").call(yAxis),chart.selectAll("g.timeseries-lines").data(t).enter().append("g").classed("timeseries-lines",!0).append("path").classed("timeseries-path",!0).attr("d",function(t){return line(t.Values)}).attr("stroke",function(t,e){return colors(t.Key)});var i=t.map(function(t,e,n){return t.Values.map(function(e,n,o){return e.Key=t.Key,e})});i=n.flatten(i),chart.append("g").classed("timeseries-points",!0).selectAll("g").data(i).enter().append("path").attr("stroke",function(t,e){return colors(t.Key)}).attr("d",d3.svg.symbol().type("circle").size(65)).attr("transform",function(t){return"translate("+x(t.Year)+", "+y(t.Value)+")"})})}o.facet=n.difference(["structure","time"],[o.facet])[0],e=d3.csv.parse(e);var r=n.chain(e[0]).keys().filter(function(t){return"Year"!==t}).value();chartContainer=d3.select(t).append("div").classed("timeseries-container",!0).append("div").classed("timeseries-container-internal",!0).datum(e),legendContainer=d3.select(t).append("div").classed({"legend-container":!0,"timeseries-legend-container":!0}),i(chartContainer);var l=legendContainer.selectAll("div.legend").data([r]).enter().append("div").classed({legend:!0,"timeseries-legend":!0});a(l)},o}]),angular.module("app").controller("AboutPageController",["$scope","$http","$log","$location","$routeParams","sidebarDisplay","contributors",function(t,e,n,o,a,i,r){t.toggle=i.toggle;var l=r.getContributors("all");l.then(function(e){t.contributors=r.list},function(t){alert("promise rejected!")}),t.$on("$viewContentLoaded",function(e){t.toggle.open=!1,i.section="Introduction",t.nextSection="Civic Engagement",t.nextSectionTeaser="Testing",t.nextSectionURL="#/civic-engagement"})}]),angular.module("app").controller("CallToActionPageController",["$scope","$http","$log","$location","sidebarDisplay",function(t,e,n,o,a){t.toggle=a.toggle,t.$on("$viewContentLoaded",function(e){t.toggle.open=!0,a.section="Call To Action"})}]),angular.module("app").controller("CohesionPageController",["$scope","$http","$log","$location","sidebarDisplay",function(t,e,n,o,a){t.toggle=a.toggle,t.$on("$viewContentLoaded",function(e){t.toggle.open=!0,a.section="Social Networks and Community Cohesion",t.nextSection="Institutional Presence",t.nextSectionTeaser="Stuff about institutions",t.nextSectionURL="#/institutional-presence"})}]),angular.module("app").controller("EngagementPageController",["$scope","$http","$log","$location","sidebarDisplay",function(t,e,n,o,a){t.toggle=a.toggle,t.$on("$viewContentLoaded",function(e){t.toggle.open=!0,a.section="Civic Engagement",t.nextSection="Political Participation",t.nextSectionTeaser="Stuff about political participation",t.nextSectionURL="#/political-participation"})}]),angular.module("app").controller("ParticipationPageController",["$scope","$http","$log","$location","sidebarDisplay",function(t,e,n,o,a){t.toggle=a.toggle,t.$on("$viewContentLoaded",function(e){t.toggle.open=!0,a.section="Political Participation",t.nextSection="Community Cohesion",t.nextSectionTeaser="Stuff about cohesion",t.nextSectionURL="#/community-cohesion"})}]),angular.module("app").controller("PartnersPageController",["$scope","$http","$log","$location","$routeParams","sidebarDisplay","contributors",function(t,e,n,o,a,i,r){t.toggle=i.toggle;var l=r.getContributors("all");l.then(function(e){t.contributors=r.list},function(t){alert("promise rejected!")}),t.$on("$viewContentLoaded",function(e){t.toggle.open=!0,i.section="Partners",t.nextSection="Raw Data",t.nextSectionTeaser="Stuff about raw data",t.nextSectionURL="#/raw-data"})}]),angular.module("app").controller("InstitutionPageController",["$scope","$http","$log","$location","sidebarDisplay",function(t,e,n,o,a){t.toggle=a.toggle,t.$on("$viewContentLoaded",function(e){t.toggle.open=!0,a.section="Institutional Presence",t.nextSection="Call to Action",t.nextSectionTeaser="Stuff about call to action",t.nextSectionURL="#/call-to-action"})}]),angular.module("app").service("categories",["$http","$q","lodash",function(t,e,n){var o={};return o.list=[],o.toggle=function(t){position=n.findIndex(o.list,function(e){return e.name==t.name}),o.list[position].selected=!o.list[position].selected},o.getCategories=function(){return e(o.list.length>0?function(t){t(o)}:function(e,a){t.get("/static/dist/data/data.json").success(function(t){list=n.map(n.sortBy(t,"rank"),function(t){return t.data.forEach(function(e,o,a){t.data[o].data=n.sortByAll(t.data[o].data,"rank")}),t=n.extend({},t,{selected:!0})}),o.list=list,e(o)}).error(function(){a("There was an error getting categories")})})},o}]),angular.module("app").service("contributors",["$http","$q",function(t,e){var n={};return n.list=[],n.getContributors=function(){return e(n.list.length>0?function(t){t(n)}:function(e,o){t.get("/static/dist/data/contributors.json").success(function(t){n.list=t,e(n)}).error(function(){o("There was an error getting contributors")})})},n}]),angular.module("app").controller("SidebarController",["$scope","$log","lodash","categories","contributors",function(t,e,n,o,a){var i=o.getCategories();i.then(function(e){t.categories=o.list},function(t){alert("promise rejected!")});var r=a.getContributors();r.then(function(e){t.contributors=a.list},function(t){alert("promise rejected!")}),t.updateSelected=function(t){o.toggle(t)},t.checkSelected=function(t){return t?"selected":"deselected"},t.$watchCollection(function(){return t.toggle},function(){console.log("toggled triggered from sidebar"),console.log(t.toggle)})}]),angular.module("app").service("sidebarDisplay",function(){return{toggle:{open:!0},section:"Introduction"}}),angular.module("app").controller("WrapController",["$scope","sidebarDisplay",function(t,e){t.toggle=e.toggle,t.section=e.section,t.$watchCollection(function(){return t.toggle},function(){console.log("toggled triggered from wrap"),console.log(t.toggle)}),t.$watchCollection(function(){return e.section},function(){t.section=e.section})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsInJvdXRlcy5qcyIsImZpbHRlcnMuanMiLCJkYXRhdml6L2RhdGF2aXouY29udHJvbGxlci5qcyIsImRhdGF2aXovZGF0YXZpei5kaXJlY3RpdmUuanMiLCJkYXRhdml6L3NpbXBsZXRhYmxlLmRpcmVjdGl2ZS5qcyIsImRhdGF2aXovdGltZXNlcmllcy5zZXJ2aWNlLmpzIiwicGFnZXMvYWJvdXRwYWdlLmNvbnRyb2xsZXIuanMiLCJwYWdlcy9jYWxsdG9hY3Rpb24uY29udHJvbGxlci5qcyIsInBhZ2VzL2NvaGVzaW9uLmNvbnRyb2xsZXIuanMiLCJwYWdlcy9lbmdhZ2VtZW50LmNvbnRyb2xsZXIuanMiLCJwYWdlcy9wYXJ0aWNpcGF0aW9uLmNvbnRyb2xsZXIuanMiLCJwYWdlcy9wYXJ0bmVycy5jb250cm9sbGVycy5qcyIsInBhZ2VzL3ByZXNlbmNlLmNvbnRyb2xsZXIuanMiLCJzaWRlYmFyL2NhdGVnb3JpZXMuc2VydmljZS5qcyIsInNpZGViYXIvY29udHJpYnV0b3JzLnNlcnZpY2UuanMiLCJzaWRlYmFyL3NpZGViYXIuY29udHJvbGxlci5qcyIsInNpZGViYXIvc2lkZWJhcmRpc3BsYXkuc2VydmljZS5qcyIsInNpZGViYXIvd3JhcC5jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJmaWx0ZXIiLCJpbnB1dCIsInN0ciIsInBhcnNlSW50IiwibG9kYXNoIiwiYXJyIiwic3VwcHJlc3Npb24iLCJmbGF0dGVuRGVlcCIsInBsdWNrIiwic29tZSIsIm8iLCJ2YWx1ZXMiLCJpbmRleE9mIiwicHJvcCIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsIiRzY2UiLCJ0cnVzdEFzSHRtbCIsIiRzY29wZSIsIiRodHRwIiwiJGxvZyIsIiRsb2NhdGlvbiIsIiRmaWx0ZXIiLCJzaWRlYmFyRGlzcGxheSIsImNhdGVnb3JpZXMiLCJ0b2dnbGUiLCIkb24iLCJldmVudCIsIm9wZW4iLCJzZWN0aW9uIiwiZGlyZWN0aXZlIiwiJHdpbmRvdyIsInRpbWVzZXJpZXNTZXJ2aWNlIiwiY2hhcnRzIiwibGluZSIsImNoYXJ0IiwicmVzdHJpY3QiLCJzY29wZSIsIndoaWNoIiwidHlwZSIsImxpbmsiLCJlbGVtZW50IiwiYXR0cnMiLCJyZW5kZXIiLCJkYXRhIiwicmVzdWx0IiwiZ2V0IiwidGhlbiIsIiR3YXRjaENvbGxlY3Rpb24iLCJ0YWJsZUNoYXJ0IiwiZDMiLCJzZWxlY3QiLCJkYXR1bSIsImNhbGwiLCJzZXJ2aWNlIiwiJHEiLCJjb250YWluZXIiLCJtYWtlTGVnZW5kIiwic2VsZWN0aW9uIiwiZWFjaCIsIkJCb3giLCJ0aGlzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibWFyZ2luIiwidG9wIiwiaGVpZ2h0IiwicmlnaHQiLCJ3aWR0aCIsImJvdHRvbSIsImxlZnQiLCJjb2xvcnMiLCJzY2FsZSIsIm9yZGluYWwiLCJyYW5nZSIsImRvbWFpbiIsImxlZ2VuZEdyb3VwcyIsInNlbGVjdEFsbCIsImVudGVyIiwiYXBwZW5kIiwiYXR0ciIsImNsYXNzZWQiLCJsZWdlbmQiLCJsZWdlbmREYXRhIiwiZCIsInNsdWdnaWZ5IiwiY2xhc3NlcyIsImpvaW4iLCJpIiwidHNwYW5Db3VudCIsInNpemUiLCJzdmciLCJzeW1ib2wiLCJzeW1ib2xTY2FsZSIsInRzcGFucyIsIndvcmR3cmFwIiwibWFrZVRpbWVTZXJpZXMiLCJtYXgiLCJsaW5lS2V5cyIsInN5bWJvbFR5cGVzIiwidGltZUZvcm1hdCIsInRpbWUiLCJmb3JtYXQiLCJ0aW1lUmFuZ2UiLCJjaGFpbiIsIm1hcCIsIlllYXIiLCJ2YWx1ZSIsIngiLCJleHRlbnQiLCJ0IiwicGFyc2UiLCJ5IiwibGluZWFyIiwiayIsImZsYXR0ZW4iLCJ1bmlxdWUiLCJuaWNlIiwieEF4aXMiLCJheGlzIiwib3JpZW50IiwidGlja3MiLCJ5ZWFyIiwieUF4aXMiLCJpbm5lclRpY2tTaXplIiwidGlja1BhZGRpbmciLCJWYWx1ZSIsIktleSIsIlZhbHVlcyIsIngtYXhpcyIsInktYXhpcyIsInBvaW50RGF0YSIsImRpIiwiZGEiLCJ2IiwidmkiLCJ2YSIsImZhY2V0IiwiZGlmZmVyZW5jZSIsImNzdiIsImtleXMiLCJjaGFydENvbnRhaW5lciIsImxlZ2VuZENvbnRhaW5lciIsImxlZ2VuZC1jb250YWluZXIiLCJ0aW1lc2VyaWVzLWxlZ2VuZC1jb250YWluZXIiLCJsZWdlbmREaXYiLCJ0aW1lc2VyaWVzLWxlZ2VuZCIsIiRyb3V0ZVBhcmFtcyIsImNvbnRyaWJ1dG9ycyIsImNvbnRyaWJ1dG9yUHJvbWlzZSIsImdldENvbnRyaWJ1dG9ycyIsImxpc3QiLCJyZWplY3Rpb24iLCJhbGVydCIsIm5leHRTZWN0aW9uIiwibmV4dFNlY3Rpb25UZWFzZXIiLCJuZXh0U2VjdGlvblVSTCIsImNhdGVnb3J5IiwicG9zaXRpb24iLCJmaW5kSW5kZXgiLCJsaXN0Y2F0IiwibmFtZSIsInNlbGVjdGVkIiwiZ2V0Q2F0ZWdvcmllcyIsImxlbmd0aCIsInJlc29sdmUiLCJyZWplY3QiLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJzb3J0QnkiLCJmb3JFYWNoIiwiaW5kaWNhdG9yIiwiaWkiLCJpYSIsInNvcnRCeUFsbCIsImV4dGVuZCIsImVycm9yIiwiY2F0ZWdvcnlQcm9taXNlIiwidXBkYXRlU2VsZWN0ZWQiLCJjaGVja1NlbGVjdGVkIiwiYm9vbCIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLEtBQUFDLFFBQUFDLE9BQUEsT0FDQSxZQUNBLGVBQ0EsV0FDQSxXQ0pBRCxTQUFBQyxPQUFBLE9BQ0FDLFFBQUEsaUJBQUEsb0JBQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFDQUUsS0FBQSxpQkFDQUMsWUFBQSwwQ0FDQUMsV0FBQSx3QkFFQUYsS0FBQSxxQkFDQUMsWUFB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QUEsU0FBQUYsR0FDQTNCLEVBQUFNLFdBQUFBLEVBQUE4SCxNQUNBLFNBQUFDLEdBQ0FDLE1BQUEsc0JBR0EsSUFBQUosR0FBQUQsRUFBQUUsaUJBQ0FELEdBQUFyRyxLQUFBLFNBQUFGLEdBQ0EzQixFQUFBaUksYUFBQUEsRUFBQUcsTUFDQSxTQUFBQyxHQUNBQyxNQUFBLHVCQUtBdEksRUFBQStKLGVBQUEsU0FBQXJCLEdBQ0FwSSxFQUFBQyxPQUFBbUksSUFHQTFJLEVBQUFnSyxjQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FDQSxXQUVBLGNBR0FqSyxFQUFBOEIsaUJBQUEsV0FDQSxNQUFBOUIsR0FBQU8sUUFDQSxXQUNBMkosUUFBQUMsSUFBQSxrQ0FDQUQsUUFBQUMsSUFBQW5LLEVBQUFPLGFDdkNBbkMsUUFBQUMsT0FBQSxPQUNBK0QsUUFBQSxpQkFBQSxXQUNBLE9BQ0E3QixRQUFBRyxNQUFBLEdBQ0FDLFFBQUEsa0JDSkF2QyxRQUFBQyxPQUFBLE9BQ0FNLFdBQUEsa0JBQUEsU0FBQSxpQkFBQSxTQUFBcUIsRUFBQUssR0FDQUwsRUFBQU8sT0FBQUYsRUFBQUUsT0FDQVAsRUFBQVcsUUFBQU4sRUFBQU0sUUFFQVgsRUFBQThCLGlCQUFBLFdBQ0EsTUFBQTlCLEdBQUFPLFFBQ0EsV0FDQTJKLFFBQUFDLElBQUEsK0JBQ0FELFFBQUFDLElBQUFuSyxFQUFBTyxVQUlBUCxFQUFBOEIsaUJBQUEsV0FDQSxNQUFBekIsR0FBQU0sU0FDQSxXQUNBWCxFQUFBVyxRQUFBTixFQUFBTSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcbiAgICAnbmdBbmltYXRlJyxcbiAgICAndWkuYm9vdHN0cmFwJyxcbiAgICAnbmdMb2Rhc2gnLFxuICAgICduZ1JvdXRlJ1xuICAgIF0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29uZmlnKGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgIC53aGVuKCcvaW50cm9kdWN0aW9uJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvZGlzdC90ZW1wbGF0ZXMvaW50cm9kdWN0aW9uLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0Fib3V0UGFnZUNvbnRyb2xsZXInXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvY2l2aWMtZW5nYWdlbWVudCcsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL2Rpc3QvdGVtcGxhdGVzL2NpdmljLWVuZ2FnZW1lbnQuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRW5nYWdlbWVudFBhZ2VDb250cm9sbGVyJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL3BvbGl0aWNhbC1wYXJ0aWNpcGF0aW9uJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvZGlzdC90ZW1wbGF0ZXMvcG9saXRpY2FsLXBhcnRpY2lwYXRpb24uaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUGFydGljaXBhdGlvblBhZ2VDb250cm9sbGVyJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2NvbW11bml0eS1jb2hlc2lvbicsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL2Rpc3QvdGVtcGxhdGVzL2NvbW11bml0eS1jb2hlc2lvbi5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDb2hlc2lvblBhZ2VDb250cm9sbGVyJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2luc3RpdHV0aW9uYWwtcHJlc2VuY2UnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy9kaXN0L3RlbXBsYXRlcy9pbnN0aXR1dGlvbmFsLXByZXNlbmNlLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0luc3RpdHV0aW9uUGFnZUNvbnRyb2xsZXInXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvY2FsbC10by1hY3Rpb24nLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy9kaXN0L3RlbXBsYXRlcy9jYWxsLXRvLWFjdGlvbi5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDYWxsVG9BY3Rpb25QYWdlQ29udHJvbGxlcidcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9wYXJ0bmVycycsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL2Rpc3QvdGVtcGxhdGVzL3BhcnRuZXJzLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1BhcnRuZXJzUGFnZUNvbnRyb2xsZXInXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvcmF3LWRhdGEnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy9kaXN0L3RlbXBsYXRlcy9kYXRhLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0RhdGFWaXpDb250cm9sbGVyJ1xuICAgICAgICB9KVxuICAgICAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgICAgIHJlZGlyZWN0VG86ICcvaW50cm9kdWN0aW9uJ1xuICAgICAgICB9KTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uZmlsdGVyKCdzdXBwcmVzc2lvbnMnLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgaWYgKGlucHV0ID09PSBcIi05LDk5OS4wXCIgfHwgaW5wdXQgPT09IFwiLTk5OTlcIikge1xuICAgICAgICByZXR1cm4gJyZkZGFnZ2VyOyc7XG4gICAgfSBlbHNlIGlmIChpbnB1dCA9PT0gXCItNjY2LDY2Ni4wXCIgfHwgaW5wdXQgPT09IFwiLTY2NjY2NlwiKSB7XG4gICAgICAgIHJldHVybiAnJmRhZ2dlcjsnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG4gIH07XG59KVxuLmZpbHRlcigncGVyY2VudCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzdHIpIHtcbiAgICAgICAgaWYgKHBhcnNlSW50KHN0cikgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyICsgXCIlXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgICB9XG4gICAgfVxufSlcbi5maWx0ZXIoJ2FueVN1cHByZXNzZWQnLCBbJ2xvZGFzaCcsIGZ1bmN0aW9uKGxvZGFzaCkge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnIsIHN1cHByZXNzaW9uKSB7XG4gICAgICAgIGFyciA9IGxvZGFzaC5mbGF0dGVuRGVlcChsb2Rhc2gucGx1Y2soYXJyLCBcImRhdGFcIikpO1xuXG4gICAgICAgIGlmICh0eXBlb2Ygc3VwcHJlc3Npb24gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiY2hlY2tpbmcgc3VwcHJlc3Npb246IFwiK3N1cHByZXNzaW9uKTtcbiAgICAgICAgICAgIHJldHVybiBsb2Rhc2guc29tZShhcnIsIGZ1bmN0aW9uKG8pIHtcbiAgICAgICAgICAgICAgICBvID0gbG9kYXNoLnZhbHVlcyhvKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9kYXNoLmluZGV4T2Yobywgc3VwcHJlc3Npb24pICE9PSAtMTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gYXNzdW1lIHRvIGNoZWNrIGVpdGhlciBzdXBwcmVzc2lvblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJjaGVja2luZyBib3RoIHN1cHByZXNzaW9uIHR5cGVzXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGxvZGFzaC5zb21lKGFyciwgZnVuY3Rpb24obykge1xuICAgICAgICAgICAgICAgIG8gPSBsb2Rhc2gudmFsdWVzKG8pO1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2Rhc2guaW5kZXhPZihvLCAnLTY2NjY2NicpICE9PSAtMSB8fCBsb2Rhc2guaW5kZXhPZihvLCAnLTk5OTknKSAhPT0gLTE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1dKVxuLmZpbHRlcignYW55JywgWydsb2Rhc2gnLCBmdW5jdGlvbihsb2Rhc2gpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJyLCBwcm9wKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvcCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgcmV0dXJuIGxvZGFzaC5zb21lKGFyciwgcHJvcClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBsb2Rhc2guc29tZShhcnIpXG4gICAgICAgIH1cbiAgICB9XG59XSlcbi5maWx0ZXIoJ25vbmUnLCBbJ2xvZGFzaCcsIGZ1bmN0aW9uKGxvZGFzaCkge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnIsIHByb3ApIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9wICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gIWxvZGFzaC5zb21lKGFyciwgcHJvcClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAhbG9kYXNoLnNvbWUoYXJyKVxuICAgICAgICB9XG4gICAgfVxufV0pXG4uZmlsdGVyKCdzbHVnZ2lmeScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gaW5wdXQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXmEtekEtWjAtOV9dL2csIFwiX1wiKVxuICAgIH07XG59KVxuLmZpbHRlcignc2FmZScsIFsnJHNjZScsIGZ1bmN0aW9uKCRzY2UpIHtcbiAgICByZXR1cm4gJHNjZS50cnVzdEFzSHRtbDtcbn1dKTsiLCIgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gLmNvbnRyb2xsZXIoJ0RhdGFWaXpDb250cm9sbGVyJyxcbiAgICAgWyckc2NvcGUnLCAnJGh0dHAnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJGZpbHRlcicsLyogJyRhbmNob3JTY3JvbGwnLCAnJHJvb3RTY29wZScsICckcm91dGVQYXJhbXMnLCAqLydzaWRlYmFyRGlzcGxheScsICdjYXRlZ29yaWVzJywgJ2xvZGFzaCcsXG4gICAgIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRsb2csICRsb2NhdGlvbiwgJGZpbHRlciwvKiAkYW5jaG9yU2Nyb2xsLCAkcm9vdFNjb3BlLCAkcm91dGVQYXJhbXMsICovc2lkZWJhckRpc3BsYXksIGNhdGVnb3JpZXMsIGxvZGFzaCl7XG4gICAgICAgICAkc2NvcGUudG9nZ2xlID0gc2lkZWJhckRpc3BsYXkudG9nZ2xlO1xuXG4gICAgICAgICAkc2NvcGUuJG9uKCckdmlld0NvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICRzY29wZS50b2dnbGUub3BlbiA9IHRydWU7XG4gICAgICAgICAgICAgc2lkZWJhckRpc3BsYXkuc2VjdGlvbiA9ICdSYXcgRGF0YSc7XG4gICAgICAgIH0pO1xufV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5kaXJlY3RpdmUoJ2RhdGF2aXonLCBbJyR3aW5kb3cnLCAnJGh0dHAnLCAndGltZXNlcmllc1NlcnZpY2UnLC8qICdiYXJDaGFydFNlcnZpY2UnLCAqL2Z1bmN0aW9uKCR3aW5kb3csICRodHRwLCB0aW1lc2VyaWVzU2VydmljZS8qLCBiYXJDaGFydFNlcnZpY2UqLykge1xuICAgIC8vIFRoaXMgZnVuY3Rpb24gc2hvdWxkIHJlZmxlY3Qgd2hhdGV2ZXIgeW91ciBkMyBmdW5jdGlvbiBpcyBjYWxsZWQuXG4gICAgdmFyIGNoYXJ0cyA9IHtcbiAgICAgICAgXCJsaW5lXCIgOiB0aW1lc2VyaWVzU2VydmljZS5jaGFydCxcbiAgICAgICAgLy8gXCJiYXJcIiA6IGJhckNoYXJ0U2VydmljZS5jaGFydCxcbiAgICAgICAgLy8gXCJncm91cGVkQmFyXCIgOiBncm91cGVkQmFyQ2hhcnRTZXJ2aWNlLmNoYXJ0LFxuICAgICAgICAvLyBcInRhYmxlXCIgOiB0YWJsZVNlcnZpY2UuY2hhcnRcbiAgICB9O1xuICAgIHJldHVybiAge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgd2hpY2g6IFwiPXdoaWNoXCIsXG4gICAgICAgICAgICB0eXBlOiBcIj10eXBlXCJcbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgICAgICBzY29wZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBkYXRhID0ge1xuICAgICAgICAgICAgICAgIC8vICAgICBkYXRhIDogc2NvcGUuZGF0YSxcbiAgICAgICAgICAgICAgICAvLyAgICAgY29uZmlnIDogc2NvcGUuY29uZmlnXG4gICAgICAgICAgICAgICAgLy8gfTtcblxuICAgICAgICAgICAgICAgIGlmIChzY29wZS5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tzY29wZS50eXBlXShlbGVtZW50WzBdLCByZXN1bHQuZGF0YSwge30pOyAvL3Njb3BlLmNvbmZpZ1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRodHRwLmdldChcIi9zdGF0aWMvZGlzdC9kYXRhL2Nzdi9cIiArIHNjb3BlLndoaWNoICsgXCIuY3N2XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5kYXRhID0gcmVzdWx0LmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnRzW3Njb3BlLnR5cGVdKGVsZW1lbnRbMF0sIHNjb3BlLmRhdGEsIHt9KTsgLy9zY29wZS5jb25maWdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignd2hpY2gnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzY29wZS5yZW5kZXIoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICBUaGlzIGNvZGUgaXMgaW50ZW5kZWQgdG8gZ2V0IHRoZSBjaGFydCB0byByZWRyYXcgd2hlbiB0aGUgd2luZG93IGlzIHJlc2l6ZWRcbiAgICAgICAgICAgICAgICBCdXQgYXMgaXQgc3RhbmRzLCBzb21laG93IHRoaXMgb3ZlcnJpZGVzIHRoZSBkYXRhIGFuZCB0aGUgY2hhcnQgYmVjb21lcyB1c2VsZXNzLlxuICAgICAgICAgICAgICAgIEkgZG9uJ3QgdGhpbmsgdGhpcyBmZWF0dXJlIGlzIHdvcnRoIHRoZSBkZWJ1ZyB0aW1lIG5vdywgYnV0IGl0J3Mgd29ydGgga2VlcGluZyBpbiBtaW5kIGZvciB0aGUgZnV0dXJlLlxuICAgICAgICAgICAgKiovXG4gICAgICAgICAgICAvLyAkd2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyAgICAgc2NvcGUucmVuZGVyKClcbiAgICAgICAgICAgIC8vIH07XG5cbiAgICAgICAgICAgIC8vIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAvLyAgICAgc2NvcGUucmVuZGVyKGRhdGEpO1xuICAgICAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgfVxuICAgIH1cbn1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uZGlyZWN0aXZlKCdzaW1wbGV0YWJsZScsIGZ1bmN0aW9uKCkge1xuICAgIC8vIFRoaXMgZnVuY3Rpb24gc2hvdWxkIHJlZmxlY3Qgd2hhdGV2ZXIgeW91ciBkMyB0YWJsZSBmdW5jdGlvbiBpcyBjYWxsZWQuXG4gICAgdmFyIGNoYXJ0ID0gdGFibGVDaGFydCgpO1xuICAgIHJldHVybiAge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgZGF0YTogXCI9ZGF0YVwiIC8vIFdlIGNhbiBjYWxsIHRoaXMgdy9lIHdlIHdhbnQuXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QoZWxlbWVudFswXSkuZGF0dW0oZGF0YSkuY2FsbChjaGFydCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCd0aW1lc2VyaWVzU2VydmljZScsIFsnJHEnLCAnJGh0dHAnLCAnbG9kYXNoJywgZnVuY3Rpb24oJHEsICRodHRwLCBsb2Rhc2gpIHtcbiAgICB2YXIgdGltZXNlcmllc1NlcnZpY2UgPSB7fTtcblxuICAgIHRpbWVzZXJpZXNTZXJ2aWNlLmNoYXJ0ID0gZnVuY3Rpb24oY29udGFpbmVyLCBkYXRhLCBjb25maWcpIHtcbiAgICAgICAgdmFyIHRpbWVGb3JtYXRzID0ge1xuICAgICAgICAgICAgXCJ5ZWFyXCIgOiBcIllZWVlcIixcbiAgICAgICAgICAgIFwicXVhcnRlclwiIDogXCJbUV1RIFlZWVlcIixcbiAgICAgICAgICAgIFwibW9udGhcIiA6IFwiTU1NIFlZWVlcIlxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbmZpZy5mYWNldCA9IGxvZGFzaC5kaWZmZXJlbmNlKFtcInN0cnVjdHVyZVwiLCBcInRpbWVcIl0sIFtjb25maWcuZmFjZXRdKVswXVxuXG4gICAgICAgIC8vIGNvbnZlcnQgZGF0YSBmcm9tIHN0cmluZyAtPiBhcnJheSBvZiBvYmpcbiAgICAgICAgZGF0YSA9IGQzLmNzdi5wYXJzZShkYXRhKTtcblxuICAgICAgICAvLyBrZXlzIGZvciBjb2xvciBhbmQgc2hhcGUgc2NhbGVzXG4gICAgICAgIHZhciBsaW5lS2V5cyA9IGxvZGFzaC5jaGFpbihkYXRhWzBdKVxuICAgICAgICAgICAgLmtleXMoKVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihrKSB7IHJldHVybiBrICE9PSBcIlllYXJcIjsgfSlcbiAgICAgICAgICAgIC52YWx1ZSgpO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBjb250YWluZXIgZm9yIG1hcHNcbiAgICAgICAgY2hhcnRDb250YWluZXIgPSBkMy5zZWxlY3QoY29udGFpbmVyKVxuICAgICAgICAgICAgLmFwcGVuZChcImRpdlwiKVxuICAgICAgICAgICAgICAgIC5jbGFzc2VkKFwidGltZXNlcmllcy1jb250YWluZXJcIiwgdHJ1ZSlcbiAgICAgICAgICAgIC5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgICAgICAgICAuY2xhc3NlZChcInRpbWVzZXJpZXMtY29udGFpbmVyLWludGVybmFsXCIsIHRydWUpXG4gICAgICAgICAgICAgICAgLmRhdHVtKGRhdGEpO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBjb250YWluZXIgZm9yIGxlZ2VuZHNcbiAgICAgICAgbGVnZW5kQ29udGFpbmVyID0gZDMuc2VsZWN0KGNvbnRhaW5lcilcbiAgICAgICAgICAgIC5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgICAgIC5jbGFzc2VkKHtcbiAgICAgICAgICAgICAgICBcImxlZ2VuZC1jb250YWluZXJcIiA6IHRydWUsXG4gICAgICAgICAgICAgICAgXCJ0aW1lc2VyaWVzLWxlZ2VuZC1jb250YWluZXJcIiA6IHRydWUsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBjaGFydENvbnRhaW5lci5hcHBlbmQoXCJwcmVcIilcbiAgICAgICAgICAgIC8vIC50ZXh0KEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDQpKTtcbiAgICAgICAgICAgIC8vIC50ZXh0KEpTT04uc3RyaW5naWZ5KGNvbmZpZywgbnVsbCwgNCkpO1xuICAgICAgICAvLyByZXR1cm47XG5cbiAgICAgICAgbWFrZVRpbWVTZXJpZXMoY2hhcnRDb250YWluZXIpO1xuXG4gICAgICAgIHZhciBsZWdlbmREaXYgPSBsZWdlbmRDb250YWluZXIuc2VsZWN0QWxsKFwiZGl2LmxlZ2VuZFwiKVxuICAgICAgICAgICAgLmRhdGEoW2xpbmVLZXlzXSlcbiAgICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAgICAgICAgICAgICBcImxlZ2VuZFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBcInRpbWVzZXJpZXMtbGVnZW5kXCI6IHRydWVcbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgIG1ha2VMZWdlbmQobGVnZW5kRGl2KTtcblxuICAgICAgICAvLyAvKiogU1RBUlQgU0NST0xMIE5PVElDRSAqKi9cbiAgICAgICAgLy8gLy8gaWYgd2UgYXJlIHVuZGVyIGEgY2VydGFpbiBwaXhlbCBzaXplLCB0aGVyZSB3aWxsIGJlIGhvcml6b250YWwgc2Nyb2xsaW5nXG4gICAgICAgIC8vIHZhciBpbnRlcm5hbENvbnRhaW5lclNpemUgPSBkMy5zZWxlY3QoY29udGFpbmVyKS5zZWxlY3QoXCJkaXYudGltZXNlcmllcy1jb250YWluZXItaW50ZXJuYWxcIikubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAvLyAgICAgY29udGFpbmVyU2l6ZSA9IGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdChcImRpdi50aW1lc2VyaWVzLWNvbnRhaW5lclwiKS5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgLy8gLy8gY29uc29sZS5sb2coaW50ZXJuYWxDb250YWluZXJTaXplLndpZHRoICsgXCIgLyBcIiArIGNvbnRhaW5lclNpemUud2lkdGgpXG4gICAgICAgIC8vIGlmIChpbnRlcm5hbENvbnRhaW5lclNpemUud2lkdGggPiBjb250YWluZXJTaXplLndpZHRoKSB7XG4gICAgICAgIC8vICAgICAvLyBjb25zb2xlLmxvZyhcInNjcm9sbCBOb3RpY2UhXCIpXG4gICAgICAgIC8vICAgICAvLyBjcmVhdGUgc2Nyb2xsIG5vdGljZVxuICAgICAgICAvLyAgICAgdmFyIHNjcm9sbE5vdGljZSA9IGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdChcImRpdi50aW1lc2VyaWVzLWNvbnRhaW5lclwiKS5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgLy8gICAgICAgICAuY2xhc3NlZChcInNjcm9sbC1ub3RpY2VcIiwgdHJ1ZSlcbiAgICAgICAgLy8gICAgICAgICAuYXBwZW5kKFwicFwiKTtcblxuICAgICAgICAvLyAgICAgc2Nyb2xsTm90aWNlLmFwcGVuZChcImlcIilcbiAgICAgICAgLy8gICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgIC8vICAgICAgICAgICAgIFwiZmFcIiA6IHRydWUsXG4gICAgICAgIC8vICAgICAgICAgICAgIFwiZmEtYW5nbGUtZG91YmxlLWRvd24gXCIgOiB0cnVlXG4gICAgICAgIC8vICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gICAgIHNjcm9sbE5vdGljZS5hcHBlbmQoXCJzcGFuXCIpXG4gICAgICAgIC8vICAgICAgICAgLnRleHQoXCJTY3JvbGwgZm9yIG1vcmVcIik7XG5cbiAgICAgICAgLy8gICAgIHNjcm9sbE5vdGljZS5hcHBlbmQoXCJpXCIpXG4gICAgICAgIC8vICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAvLyAgICAgICAgICAgICBcImZhXCIgOiB0cnVlLFxuICAgICAgICAvLyAgICAgICAgICAgICBcImZhLWFuZ2xlLWRvdWJsZS1kb3duIFwiIDogdHJ1ZVxuICAgICAgICAvLyAgICAgICAgIH0pO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy8gZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0QWxsKFwiZGl2LnRpbWVzZXJpZXMtY29udGFpbmVyXCIpLm9uKFwic2Nyb2xsXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyAgICAgLy8gaWYgc2Nyb2xsIGF0IGJvdHRvbSwgaGlkZSBzY3JvbGwgbm90aWNlXG4gICAgICAgIC8vICAgICAvLyB1c2luZyBhIGRpZmZlcmVudCBjbGFzcyBzbyBhcyBub3QgdG8gaW50ZXJmZXJlIHdpdGggdGhlIG1vdXNlb3ZlciBlZmZlY3RzXG4gICAgICAgIC8vICAgICBpZiAoKGQzLnNlbGVjdCh0aGlzKS5ub2RlKCkuc2Nyb2xsTGVmdCArIGQzLnNlbGVjdCh0aGlzKS5ub2RlKCkub2Zmc2V0V2lkdGgpID49IChkMy5zZWxlY3QodGhpcykubm9kZSgpLnNjcm9sbFdpZHRoICogMC45NzUpKSB7XG4gICAgICAgIC8vICAgICAgICAgZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0QWxsKFwiZGl2LnNjcm9sbC1ub3RpY2VcIilcbiAgICAgICAgLy8gICAgICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgXCJoaWRkZW5cIiA6IHRydWVcbiAgICAgICAgLy8gICAgICAgICAgICAgfSk7XG4gICAgICAgIC8vICAgICB9IGVsc2Uge1xuICAgICAgICAvLyAgICAgICAgIGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdEFsbChcImRpdi5zY3JvbGwtbm90aWNlXCIpXG4gICAgICAgIC8vICAgICAgICAgICAgIC5jbGFzc2VkKHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIFwiaGlkZGVuXCIgOiBmYWxzZVxuICAgICAgICAvLyAgICAgICAgICAgICB9KTtcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSlcbiAgICAgICAgLy8gLyoqIEVORCBTQ1JPTEwgTk9USUNFICoqL1xuXG4gICAgICAgIC8vIC8vIGFkZCBob3ZlciBlZmZlY3RzIC0gdXNlIGNsYXNzZXMgXCJoaWdobGlnaHRcIiBhbmQgXCJsb3dsaWdodFwiXG4gICAgICAgIC8vIGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdEFsbChcImcuZW50cnksIGcudGltZXNlcmllcy1saW5lcyA+IHBhdGgsIGcudGltZXNlcmllcy1wb2ludHMgPiBwYXRoXCIpXG4gICAgICAgIC8vIC5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbigpe1xuICAgICAgICAvLyAgICAgdmFyIGNsYXNzVG9IaWdobGlnaHQgPSBkMy5zZWxlY3QodGhpcykuYXR0cihcImRhdGEtY2xhc3NcIik7XG5cbiAgICAgICAgLy8gICAgIC8vIGxvd2xpZ2h0IGFsbCBlbGVtZW50c1xuICAgICAgICAvLyAgICAgZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0QWxsKFwiZy5lbnRyeSwgZy50aW1lc2VyaWVzLWxpbmVzID4gcGF0aCwgZy50aW1lc2VyaWVzLXBvaW50cyA+IHBhdGgsIGRpdi5zY3JvbGwtbm90aWNlXCIpXG4gICAgICAgIC8vICAgICAuY2xhc3NlZCh7XG4gICAgICAgIC8vICAgICAgICAgXCJsb3dsaWdodFwiIDogdHJ1ZSxcbiAgICAgICAgLy8gICAgICAgICBcImhpZ2hsaWdodFwiIDogZmFsc2VcbiAgICAgICAgLy8gICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgIC8vICAgICAvLyBoaWdobGlnaHQgYWxsIGVsZW1lbnRzIHdpdGggbWF0Y2hpbmcgZGF0YS1jbGFzc1xuICAgICAgICAvLyAgICAgZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0QWxsKFwiZy5lbnRyeS5cIitjbGFzc1RvSGlnaGxpZ2h0K1wiLCBnLnRpbWVzZXJpZXMtbGluZXMgPiBwYXRoLlwiK2NsYXNzVG9IaWdobGlnaHQrXCIsIGcudGltZXNlcmllcy1wb2ludHMgcGF0aC5cIitjbGFzc1RvSGlnaGxpZ2h0KVxuICAgICAgICAvLyAgICAgLmNsYXNzZWQoe1xuICAgICAgICAvLyAgICAgICAgIFwibG93bGlnaHRcIiA6IGZhbHNlLFxuICAgICAgICAvLyAgICAgICAgIFwiaGlnaGxpZ2h0XCIgOiB0cnVlXG4gICAgICAgIC8vICAgICB9KTtcbiAgICAgICAgLy8gfSlcbiAgICAgICAgLy8gLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgLy8gICAgIC8vIHJlbW92ZSBhbGwgaGlnaGxpZ2h0L2xvd2xpZ2h0IGNsYXNzZXNcbiAgICAgICAgLy8gICAgIGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdEFsbChcImcuZW50cnksIGcudGltZXNlcmllcy1saW5lcyA+IHBhdGgsIGcudGltZXNlcmllcy1wb2ludHMgPiBwYXRoLCBkaXYuc2Nyb2xsLW5vdGljZVwiKVxuICAgICAgICAvLyAgICAgLmNsYXNzZWQoe1xuICAgICAgICAvLyAgICAgICAgIFwibG93bGlnaHRcIiA6IGZhbHNlLFxuICAgICAgICAvLyAgICAgICAgIFwiaGlnaGxpZ2h0XCIgOiBmYWxzZVxuICAgICAgICAvLyAgICAgfSk7XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VMZWdlbmQoc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBzZWxlY3Rpb24uZWFjaChmdW5jdGlvbihkYXRhKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBzaXppbmcgYW5kIG1hcmdpbiB2YXJzXG4gICAgICAgICAgICAgICAgdmFyIEJCb3ggPSB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgICAgICAgIG1hcmdpbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXCJ0b3BcIiA6IGQzLm1heChbQkJveC5oZWlnaHQgKiAwLjA4LCAzMl0pLFxuICAgICAgICAgICAgICAgICAgICBcInRvcFwiIDogQkJveC5oZWlnaHQgKiAwLjAxLFxuICAgICAgICAgICAgICAgICAgICBcInJpZ2h0XCIgOiBCQm94LndpZHRoICogMC4wMSxcbiAgICAgICAgICAgICAgICAgICAgXCJib3R0b21cIiA6IEJCb3guaGVpZ2h0ICogMC4wMSxcbiAgICAgICAgICAgICAgICAgICAgXCJsZWZ0XCIgOiBCQm94LndpZHRoICogMC4wMVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgd2lkdGggPSBCQm94LndpZHRoIC0gKG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuICAgICAgICAgICAgICAgIGhlaWdodCA9IEJCb3guaGVpZ2h0IC0gKG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKSxcblxuICAgICAgICAgICAgICAgIC8vIC8vIGNvbnRhaW5lcnNcbiAgICAgICAgICAgICAgICAvLyBzdmcgPSBkMy5zZWxlY3QodGhpcylcbiAgICAgICAgICAgICAgICAvLyAgICAgLmFwcGVuZChcInN2Z1wiKVxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcblxuICAgICAgICAgICAgICAgIC8vIGNvbG9yIHNjYWxlXG4gICAgICAgICAgICAgICAgY29sb3JzID0gZDMuc2NhbGUub3JkaW5hbCgpXG4gICAgICAgICAgICAgICAgICAgIC5yYW5nZShbXCIjMUVBQ0YxXCIsIFwiI0I5NEE0OFwiXSlcbiAgICAgICAgICAgICAgICAgICAgLmRvbWFpbihkYXRhKTtcblxuICAgICAgICAgICAgICAgIHZhciBsZWdlbmRFbnRyaWVzID0gZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoXCJkaXZcIilcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEoZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChcInN2Z1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoXCJsZWdlbmRcIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsIFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKTtcblxuICAgICAgICAgICAgICAgIHZhciBsZWdlbmRHcm91cHMgPSBsZWdlbmQuc2VsZWN0QWxsKFwiZy5lbnRyeVwiKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YShsZWdlbmREYXRhKVxuICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZGF0YS1jbGFzc1wiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNsdWdnaWZ5KGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbGFzc2VzID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVudHJ5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsdWdnaWZ5KGQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xhc3NlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkLCBpKSB7IHJldHVybiBcInRyYW5zbGF0ZSgwLCBcIiArICgxOSAqIGkpICsgXCIpXCI7fSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kYXR1bShmdW5jdGlvbihkKSB7IHJldHVybiBkOyB9KTtcblxuICAgICAgICAgICAgICAgIGxlZ2VuZEdyb3Vwcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHNwYW5Db3VudCA9IGxlZ2VuZEdyb3Vwcy5zZWxlY3RBbGwoXCJ0c3BhblwiKS5zaXplKCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIFwidHJhbnNsYXRlKDAsIFwiICsgKDE5ICogaSkgKyAoKHRzcGFuQ291bnQgLSBpKSAqIDE5KSArIFwiKVwiO30pXG5cbiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZChcInBhdGhcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbihkLCBpKSB7cmV0dXJuIGNvbG9ycyhkKTsgfSApXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInN0cm9rZVwiLCBmdW5jdGlvbihkLCBpKSB7cmV0dXJuIGNvbG9ycyhkKTsgfSApXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInN0cm9rZS13aWR0aFwiLCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkXCIsIGQzLnN2Zy5zeW1ib2woKS50eXBlKGZ1bmN0aW9uKGQpIHtyZXR1cm4gc3ltYm9sU2NhbGUoZCk7IH0pLnNpemUoMjUpKTtcblxuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJmaWxsXCIsIFwiIzRBNEE0QVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIDYpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcImR4XCIsIDgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudHNwYW5zKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDMud29yZHdyYXAoZCwgMjApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIC8vIGFsbCBzcGFucyBhcmUgYnkgZGVmYXVsdCB1bnN0eWxlZCwgd2l0aCBubyB3YXkgdG8gZG8gaXQgaW4gamV0cGFjayxcbiAgICAgICAgICAgICAgICAvLyBzbyBpbiBvcmRlciB0byBmaWdodCB0aGUgaGFuZ2luZyBpbmRlbnQgZWZmZWN0LCBtb3ZlIHRoZW0gb3ZlciA4IHB4XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKFwidHNwYW5cIikuYXR0cihcImR4XCIsIDgpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VUaW1lU2VyaWVzKHNlbGVjdGlvbikge1xuICAgICAgICAgICAgc2VsZWN0aW9uLmVhY2goZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vIHNpemluZyBhbmQgbWFyZ2luIHZhcnNcbiAgICAgICAgICAgICAgICB2YXIgQkJveCA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidG9wXCIgOiBCQm94LmhlaWdodCAqIDAuMDUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInJpZ2h0XCIgOiBCQm94LndpZHRoICogMC4wNSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYm90dG9tXCIgOiBCQm94LmhlaWdodCAqIDAuMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibGVmdFwiIDogZDMubWF4KFtCQm94LndpZHRoICogMC4wNSwgNTVdKVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IEJCb3gud2lkdGggLSAobWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IEJCb3guaGVpZ2h0IC0gKG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKSxcblxuICAgICAgICAgICAgICAgICAgICAvLyBjb250YWluZXJzXG4gICAgICAgICAgICAgICAgICAgIHN2ZyA9IGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoXCJzdmdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIEJCb3guaGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCBCQm94LndpZHRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCwgMClcIiksXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0ID0gc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsIFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGVzdGluZyBzdHVmZiAtIGRyYXdzIG91dGxpbmVzIGFyb3VuZCBzdmcgYW5kIGNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICAvLyBzdmdPdXRsaW5lID0gc3ZnLmFwcGVuZChcInJlY3RcIilcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5hdHRyKFwiaGVpZ2h0XCIsIHN2Zy5hdHRyKFwiaGVpZ2h0XCIpKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmF0dHIoXCJ3aWR0aFwiLCBzdmcuYXR0cihcIndpZHRoXCIpKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmF0dHIoXCJmaWxsXCIsIFwicmdiYSgwLDAsMCwwKVwiKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCJyZWRcIiksXG4gICAgICAgICAgICAgICAgICAgIC8vIGNoYXJ0T3V0bGluZSA9IHN2Zy5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsIFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmF0dHIoXCJoZWlnaHRcIiwgY2hhcnQuYXR0cihcImhlaWdodFwiKSlcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5hdHRyKFwid2lkdGhcIiwgY2hhcnQuYXR0cihcIndpZHRoXCIpKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmF0dHIoXCJmaWxsXCIsIFwicmdiYSgwLDAsMCwwKVwiKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmF0dHIoXCJzdHJva2VcIiAsXCJibHVlXCIpLFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbG9yIHNjYWxlXG4gICAgICAgICAgICAgICAgICAgIGNvbG9ycyA9IGQzLnNjYWxlLm9yZGluYWwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJhbmdlKFtcIiMxRUFDRjFcIiwgXCIjQjk0QTQ4XCJdKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRvbWFpbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lS2V5c1xuICAgICAgICAgICAgICAgICAgICAgICAgKSxcblxuICAgICAgICAgICAgICAgICAgICAvLyBwb2ludCBzaGFwZSBcInNjYWxlXCJcbiAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2NhbGUgPSBkMy5zY2FsZS5vcmRpbmFsKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yYW5nZShkMy5zdmcuc3ltYm9sVHlwZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZG9tYWluKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVLZXlzXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIHggYW5kIHkgc2NhbGVzXG4gICAgICAgICAgICAgICAgICAgIHRpbWVGb3JtYXQgPSBkMy50aW1lLmZvcm1hdChcIiVZXCIpLFxuICAgICAgICAgICAgICAgICAgICB0aW1lUmFuZ2UgPSBsb2Rhc2guY2hhaW4oZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLlllYXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnZhbHVlKCksXG4gICAgICAgICAgICAgICAgICAgIHggPSBkMy50aW1lLnNjYWxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yYW5nZShbMTIsIHdpZHRoXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kb21haW4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuZXh0ZW50KHRpbWVSYW5nZSkubWFwKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVGb3JtYXQucGFyc2UodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIHkgPSBkMy5zY2FsZS5saW5lYXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJhbmdlKFtoZWlnaHQsIDBdKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRvbWFpbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5leHRlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZGFzaC5jaGFpbihkYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpbmVLZXlzLm1hcChmdW5jdGlvbihrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICtkW2tdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mbGF0dGVuKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC51bmlxdWUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnZhbHVlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLy8ubWFwKGZ1bmN0aW9uKHYsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHJldHVybiAoTWF0aC5jZWlsKHYvMTApICogMTApIC0gMTA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICByZXR1cm4gKE1hdGguZmxvb3Iodi8xMCkgKiAxMCkgKyAxMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAubmljZSg1LCAxMCksXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gLy8gYXhpcyBmdW5jdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgeEF4aXMgPSBkMy5zdmcuYXhpcygpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGUoeClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vcmllbnQoXCJib3R0b21cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aWNrcyhkMy50aW1lLnllYXIsIDEpLFxuICAgICAgICAgICAgICAgICAgICB5QXhpcyA9IGQzLnN2Zy5heGlzKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zY2FsZSh5KVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9yaWVudChcImxlZnRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5pbm5lclRpY2tTaXplKC13aWR0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aWNrUGFkZGluZygxMCksXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gLy8gbGluZSBjaGFydGluZyBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICBsaW5lID0gZDMuc3ZnLmxpbmUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLngoZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB4KGQuWWVhcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC55KGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geShkLlZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIC8vIHNsdWcgZnVuY3Rpb24gZm9yIGNsYXNzaW5nIGFuZCBoaWdobGlnaHRpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gc2x1Z2dpZnkgPSBmdW5jdGlvbih0ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICByZXR1cm4gdGV4dC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCBcIl9cIik7XG4gICAgICAgICAgICAgICAgICAgIC8vIH07XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzaGFwZSBkYXRhIGZvciBsaW5lc1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0gbGluZUtleXMubWFwKGZ1bmN0aW9uKGspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJLZXlcIiA6IGssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWVzIDogbG9kYXNoLm1hcChkYXRhLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1wiWWVhclwiIDogdGltZUZvcm1hdC5wYXJzZShkLlllYXIpLCBcIlZhbHVlXCIgOiArZFtrXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAvLyAvLyB0ZXN0IG91dHB1dCBmb3IgdHJvdWJsZXNob290aW5nIHRoZSBkYXRhIHN0dWZmXG4gICAgICAgICAgICAgICAgICAgIC8vIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoXCJwcmVcIilcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC50ZXh0KEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDQpKVxuICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgY2hhcnQuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwieC1heGlzXCIgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYXhpc1wiIDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsIFwiICsgaGVpZ2h0ICsgXCIpXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2FsbCh4QXhpcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgY2hhcnQuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwieS1heGlzXCIgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYXhpc1wiIDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKC0xMiwgMClcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYWxsKHlBeGlzKTtcblxuICAgICAgICAgICAgICAgICAgICBjaGFydC5zZWxlY3RBbGwoXCJnLnRpbWVzZXJpZXMtbGluZXNcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZChcInRpbWVzZXJpZXMtbGluZXNcIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKFwicGF0aFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZChcInRpbWVzZXJpZXMtcGF0aFwiLCB0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcImRcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpbmUoZC5WYWx1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInN0cm9rZVwiLCBmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sb3JzKGQuS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvaW50RGF0YSA9IGRhdGEubWFwKGZ1bmN0aW9uKGQsIGRpLCBkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuVmFsdWVzLm1hcChmdW5jdGlvbih2LCB2aSwgdmEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LktleSA9IGQuS2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIHBvaW50RGF0YSA9IGxvZGFzaC5mbGF0dGVuKHBvaW50RGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY2hhcnQuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoXCJ0aW1lc2VyaWVzLXBvaW50c1wiLCB0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbChcImdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKHBvaW50RGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChcInBhdGhcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInN0cm9rZVwiLCBmdW5jdGlvbihkLCBpKSB7cmV0dXJuIGNvbG9ycyhkLktleSk7IH0gKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBkMy5zdmcuc3ltYm9sKCkudHlwZShcImNpcmNsZVwiKS5zaXplKDY1KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIHgoZC5ZZWFyKSArIFwiLCBcIiArIHkoZC5WYWx1ZSkgK1wiKVwiO30pO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRpbWVzZXJpZXNTZXJ2aWNlO1xufV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdBYm91dFBhZ2VDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckaHR0cCcsICckbG9nJywgJyRsb2NhdGlvbicsLyogJyRhbmNob3JTY3JvbGwnLCAnJHJvb3RTY29wZScsKi8gJyRyb3V0ZVBhcmFtcycsICdzaWRlYmFyRGlzcGxheScsICdjb250cmlidXRvcnMnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRsb2csICRsb2NhdGlvbiwvKiAkYW5jaG9yU2Nyb2xsLCAkcm9vdFNjb3BlLCovICRyb3V0ZVBhcmFtcywgc2lkZWJhckRpc3BsYXksIGNvbnRyaWJ1dG9ycyl7XG4gICAgICAgICRzY29wZS50b2dnbGUgPSBzaWRlYmFyRGlzcGxheS50b2dnbGU7XG5cbiAgICAgICAgdmFyIGNvbnRyaWJ1dG9yUHJvbWlzZSA9IGNvbnRyaWJ1dG9ycy5nZXRDb250cmlidXRvcnMoXCJhbGxcIik7XG4gICAgICAgIGNvbnRyaWJ1dG9yUHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgJHNjb3BlLmNvbnRyaWJ1dG9ycyA9IGNvbnRyaWJ1dG9ycy5saXN0O1xuICAgICAgICB9LCBmdW5jdGlvbihyZWplY3Rpb24pIHtcbiAgICAgICAgICAgIGFsZXJ0KFwicHJvbWlzZSByZWplY3RlZCFcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS4kb24oJyR2aWV3Q29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAkc2NvcGUudG9nZ2xlLm9wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIHNpZGViYXJEaXNwbGF5LnNlY3Rpb24gPSAnSW50cm9kdWN0aW9uJztcbiAgICAgICAgICAgICRzY29wZS5uZXh0U2VjdGlvbiA9ICdDaXZpYyBFbmdhZ2VtZW50JztcbiAgICAgICAgICAgICRzY29wZS5uZXh0U2VjdGlvblRlYXNlciA9ICdUZXN0aW5nJztcbiAgICAgICAgICAgICRzY29wZS5uZXh0U2VjdGlvblVSTCA9ICcjL2NpdmljLWVuZ2FnZW1lbnQnO1xuICAgICAgICB9KTtcblxufV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdDYWxsVG9BY3Rpb25QYWdlQ29udHJvbGxlcicsXG4gICAgWyckc2NvcGUnLCAnJGh0dHAnLCAnJGxvZycsICckbG9jYXRpb24nLCAnc2lkZWJhckRpc3BsYXknLFxuICAgIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRsb2csICRsb2NhdGlvbiwgc2lkZWJhckRpc3BsYXkpe1xuICAgICAgICAkc2NvcGUudG9nZ2xlID0gc2lkZWJhckRpc3BsYXkudG9nZ2xlO1xuXG4gICAgICAgICRzY29wZS4kb24oJyR2aWV3Q29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAkc2NvcGUudG9nZ2xlLm9wZW4gPSB0cnVlO1xuICAgICAgICAgICAgc2lkZWJhckRpc3BsYXkuc2VjdGlvbiA9ICdDYWxsIFRvIEFjdGlvbic7XG4gICAgICAgIH0pO1xuXG59XSlcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignQ29oZXNpb25QYWdlQ29udHJvbGxlcicsXG4gICAgWyckc2NvcGUnLCAnJGh0dHAnLCAnJGxvZycsICckbG9jYXRpb24nLCAnc2lkZWJhckRpc3BsYXknLFxuICAgIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRsb2csICRsb2NhdGlvbiwgc2lkZWJhckRpc3BsYXkpe1xuICAgICAgICAkc2NvcGUudG9nZ2xlID0gc2lkZWJhckRpc3BsYXkudG9nZ2xlO1xuXG4gICAgICAgICRzY29wZS4kb24oJyR2aWV3Q29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAkc2NvcGUudG9nZ2xlLm9wZW4gPSB0cnVlO1xuICAgICAgICAgICAgc2lkZWJhckRpc3BsYXkuc2VjdGlvbiA9ICdTb2NpYWwgTmV0d29ya3MgYW5kIENvbW11bml0eSBDb2hlc2lvbic7XG4gICAgICAgICAgICAkc2NvcGUubmV4dFNlY3Rpb24gPSAnSW5zdGl0dXRpb25hbCBQcmVzZW5jZSc7XG4gICAgICAgICAgICAkc2NvcGUubmV4dFNlY3Rpb25UZWFzZXIgPSBcIlN0dWZmIGFib3V0IGluc3RpdHV0aW9uc1wiO1xuICAgICAgICAgICAgJHNjb3BlLm5leHRTZWN0aW9uVVJMID0gJyMvaW5zdGl0dXRpb25hbC1wcmVzZW5jZSc7XG4gICAgICAgIH0pO1xuXG59XSlcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignRW5nYWdlbWVudFBhZ2VDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckaHR0cCcsICckbG9nJywgJyRsb2NhdGlvbicsLyogJyRhbmNob3JTY3JvbGwnLCAnJHJvb3RTY29wZScsICckcm91dGVQYXJhbXMnLCovICdzaWRlYmFyRGlzcGxheScsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGxvZywgJGxvY2F0aW9uLC8qICRhbmNob3JTY3JvbGwsICRyb290U2NvcGUsICRyb3V0ZVBhcmFtcywqLyBzaWRlYmFyRGlzcGxheSl7XG4gICAgICAgICRzY29wZS50b2dnbGUgPSBzaWRlYmFyRGlzcGxheS50b2dnbGU7XG5cbiAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICRzY29wZS50b2dnbGUub3BlbiA9IHRydWU7XG4gICAgICAgICAgICBzaWRlYmFyRGlzcGxheS5zZWN0aW9uID0gJ0NpdmljIEVuZ2FnZW1lbnQnO1xuICAgICAgICAgICAgJHNjb3BlLm5leHRTZWN0aW9uID0gJ1BvbGl0aWNhbCBQYXJ0aWNpcGF0aW9uJztcbiAgICAgICAgICAgICRzY29wZS5uZXh0U2VjdGlvblRlYXNlciA9IFwiU3R1ZmYgYWJvdXQgcG9saXRpY2FsIHBhcnRpY2lwYXRpb25cIjtcbiAgICAgICAgICAgICRzY29wZS5uZXh0U2VjdGlvblVSTCA9ICcjL3BvbGl0aWNhbC1wYXJ0aWNpcGF0aW9uJztcbiAgICAgICAgfSk7XG5cbn1dKVxuXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdQYXJ0aWNpcGF0aW9uUGFnZUNvbnRyb2xsZXInLFxuICAgIFsnJHNjb3BlJywgJyRodHRwJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJ3NpZGViYXJEaXNwbGF5JyxcbiAgICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkbG9nLCAkbG9jYXRpb24sIHNpZGViYXJEaXNwbGF5KXtcbiAgICAgICAgJHNjb3BlLnRvZ2dsZSA9IHNpZGViYXJEaXNwbGF5LnRvZ2dsZTtcblxuICAgICAgICAkc2NvcGUuJG9uKCckdmlld0NvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZS5vcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIHNpZGViYXJEaXNwbGF5LnNlY3Rpb24gPSAnUG9saXRpY2FsIFBhcnRpY2lwYXRpb24nO1xuICAgICAgICAgICAgJHNjb3BlLm5leHRTZWN0aW9uID0gJ0NvbW11bml0eSBDb2hlc2lvbic7XG4gICAgICAgICAgICAkc2NvcGUubmV4dFNlY3Rpb25UZWFzZXIgPSBcIlN0dWZmIGFib3V0IGNvaGVzaW9uXCI7XG4gICAgICAgICAgICAkc2NvcGUubmV4dFNlY3Rpb25VUkwgPSAnIy9jb21tdW5pdHktY29oZXNpb24nO1xuICAgICAgICB9KTtcblxufV0pXG5cbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ1BhcnRuZXJzUGFnZUNvbnRyb2xsZXInLFxuICAgIFsnJHNjb3BlJywgJyRodHRwJywgJyRsb2cnLCAnJGxvY2F0aW9uJywvKiAnJGFuY2hvclNjcm9sbCcsICckcm9vdFNjb3BlJywqLyAnJHJvdXRlUGFyYW1zJywgJ3NpZGViYXJEaXNwbGF5JywgJ2NvbnRyaWJ1dG9ycycsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGxvZywgJGxvY2F0aW9uLC8qICRhbmNob3JTY3JvbGwsICRyb290U2NvcGUsKi8gJHJvdXRlUGFyYW1zLCBzaWRlYmFyRGlzcGxheSwgY29udHJpYnV0b3JzKXtcbiAgICAgICAgJHNjb3BlLnRvZ2dsZSA9IHNpZGViYXJEaXNwbGF5LnRvZ2dsZTtcblxuICAgICAgICB2YXIgY29udHJpYnV0b3JQcm9taXNlID0gY29udHJpYnV0b3JzLmdldENvbnRyaWJ1dG9ycyhcImFsbFwiKTtcbiAgICAgICAgY29udHJpYnV0b3JQcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAkc2NvcGUuY29udHJpYnV0b3JzID0gY29udHJpYnV0b3JzLmxpc3Q7XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAgICAgICAgYWxlcnQoXCJwcm9taXNlIHJlamVjdGVkIVwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICRzY29wZS50b2dnbGUub3BlbiA9IHRydWU7XG4gICAgICAgICAgICBzaWRlYmFyRGlzcGxheS5zZWN0aW9uID0gJ1BhcnRuZXJzJztcbiAgICAgICAgICAgICRzY29wZS5uZXh0U2VjdGlvbiA9ICdSYXcgRGF0YSc7XG4gICAgICAgICAgICAkc2NvcGUubmV4dFNlY3Rpb25UZWFzZXIgPSBcIlN0dWZmIGFib3V0IHJhdyBkYXRhXCI7XG4gICAgICAgICAgICAkc2NvcGUubmV4dFNlY3Rpb25VUkwgPSAnIy9yYXctZGF0YSc7XG4gICAgICAgIH0pO1xuXG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0luc3RpdHV0aW9uUGFnZUNvbnRyb2xsZXInLFxuICAgIFsnJHNjb3BlJywgJyRodHRwJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJ3NpZGViYXJEaXNwbGF5JyxcbiAgICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkbG9nLCAkbG9jYXRpb24sIHNpZGViYXJEaXNwbGF5KXtcbiAgICAgICAgJHNjb3BlLnRvZ2dsZSA9IHNpZGViYXJEaXNwbGF5LnRvZ2dsZTtcblxuICAgICAgICAkc2NvcGUuJG9uKCckdmlld0NvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZS5vcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIHNpZGViYXJEaXNwbGF5LnNlY3Rpb24gPSAnSW5zdGl0dXRpb25hbCBQcmVzZW5jZSc7XG4gICAgICAgICAgICAkc2NvcGUubmV4dFNlY3Rpb24gPSAnQ2FsbCB0byBBY3Rpb24nO1xuICAgICAgICAgICAgJHNjb3BlLm5leHRTZWN0aW9uVGVhc2VyID0gXCJTdHVmZiBhYm91dCBjYWxsIHRvIGFjdGlvblwiO1xuICAgICAgICAgICAgJHNjb3BlLm5leHRTZWN0aW9uVVJMID0gJyMvY2FsbC10by1hY3Rpb24nO1xuICAgICAgICB9KTtcblxufV0pXG5cbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ2NhdGVnb3JpZXMnLCBbJyRodHRwJywgJyRxJywgJ2xvZGFzaCcsIGZ1bmN0aW9uKCRodHRwLCAkcSwgbG9kYXNoKSB7XG4gICAgdmFyIGNhdGVnb3JpZXMgPSB7fTtcbiAgICBjYXRlZ29yaWVzLmxpc3QgPSBbXTtcblxuICAgIGNhdGVnb3JpZXMudG9nZ2xlID0gZnVuY3Rpb24oY2F0ZWdvcnkpIHtcbiAgICAgICAgcG9zaXRpb24gPSBsb2Rhc2guZmluZEluZGV4KGNhdGVnb3JpZXMubGlzdCwgZnVuY3Rpb24obGlzdGNhdCkge1xuICAgICAgICAgICAgcmV0dXJuIGxpc3RjYXQubmFtZSA9PSBjYXRlZ29yeS5uYW1lO1xuICAgICAgICB9KTtcbiAgICAgICAgY2F0ZWdvcmllcy5saXN0W3Bvc2l0aW9uXS5zZWxlY3RlZCA9ICFjYXRlZ29yaWVzLmxpc3RbcG9zaXRpb25dLnNlbGVjdGVkO1xuICAgIH07XG5cbiAgICBjYXRlZ29yaWVzLmdldENhdGVnb3JpZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNhdGVnb3JpZXMubGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBpZiB0aGlzIG9iamVjdCBhbHJlYWR5IGhhcyBkYXRhLCBqdXN0IHVzZSB3aGF0J3MgY3VycmVudGx5IGF2YWlsYWJsZVxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUpe3Jlc29sdmUoY2F0ZWdvcmllcyl9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSBnZXQgZGF0YSBmcmVzaCBmcm9tIGZpbGVcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9zdGF0aWMvZGlzdC9kYXRhL2RhdGEuanNvbicpXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0ID0gbG9kYXNoLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzb3J0IGNhdGVnb3JpZXMgYnkgcmFua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZGFzaC5zb3J0QnkocmVzcG9uc2UsIFwicmFua1wiKSwgZnVuY3Rpb24obykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciBlYWNoIGluZGljYXRvciBpbiBlYWNoIGNhdGVnb3J5LCBzb3J0ICdsZXZlbHMnIGJ5IGEgcmFuayBhcyB3ZWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgby5kYXRhLmZvckVhY2goZnVuY3Rpb24oaW5kaWNhdG9yLCBpaSwgaWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5kYXRhW2lpXS5kYXRhID0gbG9kYXNoLnNvcnRCeUFsbChvLmRhdGFbaWldLmRhdGEsIFwicmFua1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4dGVuZCBlYWNoIGNhdGVnb3J5IHRvIGhhdmUgYSBcInNlbGVjdGVkXCIgdmFsdWUsIGRlZmF1bHQgdG8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBsb2Rhc2guZXh0ZW5kKHt9LCBvLCB7XCJzZWxlY3RlZFwiIDogdHJ1ZX0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjYXRlZ29yaWVzLmxpc3QgdG8gYSBzb3J0ZWQgYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMubGlzdCA9IGxpc3Q7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoY2F0ZWdvcmllcyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChcIlRoZXJlIHdhcyBhbiBlcnJvciBnZXR0aW5nIGNhdGVnb3JpZXNcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGNhdGVnb3JpZXM7XG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ2NvbnRyaWJ1dG9ycycsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbigkaHR0cCwgJHEpIHtcbiAgICB2YXIgY29udHJpYnV0b3JzID0ge307XG4gICAgY29udHJpYnV0b3JzLmxpc3QgPSBbXTtcblxuICAgIGNvbnRyaWJ1dG9ycy5nZXRDb250cmlidXRvcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNvbnRyaWJ1dG9ycy5saXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIGlmIHRoaXMgb2JqZWN0IGFscmVhZHkgaGFzIGRhdGEsIGp1c3QgdXNlIHdoYXQncyBjdXJyZW50bHkgYXZhaWxhYmxlXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSl7cmVzb2x2ZShjb250cmlidXRvcnMpfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UgZ2V0IGRhdGEgZnJlc2ggZnJvbSBmaWxlXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvc3RhdGljL2Rpc3QvZGF0YS9jb250cmlidXRvcnMuanNvbicpXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cmlidXRvcnMubGlzdCA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShjb250cmlidXRvcnMpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoXCJUaGVyZSB3YXMgYW4gZXJyb3IgZ2V0dGluZyBjb250cmlidXRvcnNcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGNvbnRyaWJ1dG9ycztcbn1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignU2lkZWJhckNvbnRyb2xsZXInLFxuICAgIFsnJHNjb3BlJywgJyRsb2cnLCdsb2Rhc2gnLCAnY2F0ZWdvcmllcycsICdjb250cmlidXRvcnMnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSwgJGxvZywgbG9kYXNoLCBjYXRlZ29yaWVzLCBjb250cmlidXRvcnMpIHtcbiAgICAgICAgLy8gJHNjb3BlLnN0YXR1cyA9IHtcbiAgICAgICAgLy8gICAgIGlzb3BlbjogZmFsc2VcbiAgICAgICAgLy8gfTtcblxuICAgICAgICB2YXIgY2F0ZWdvcnlQcm9taXNlID0gY2F0ZWdvcmllcy5nZXRDYXRlZ29yaWVzKCk7XG4gICAgICAgIGNhdGVnb3J5UHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBjYXRlZ29yaWVzLmxpc3Q7XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAgICAgICAgYWxlcnQoXCJwcm9taXNlIHJlamVjdGVkIVwiKTtcbiAgICAgICAgfSlcblxuICAgICAgICB2YXIgY29udHJpYnV0b3JQcm9taXNlID0gY29udHJpYnV0b3JzLmdldENvbnRyaWJ1dG9ycygpO1xuICAgICAgICBjb250cmlidXRvclByb21pc2UudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICRzY29wZS5jb250cmlidXRvcnMgPSBjb250cmlidXRvcnMubGlzdDtcbiAgICAgICAgfSwgZnVuY3Rpb24ocmVqZWN0aW9uKSB7XG4gICAgICAgICAgICBhbGVydChcInByb21pc2UgcmVqZWN0ZWQhXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBGdW5jdGlvbnMgZm9yIG1hbmFnaW5nIHRoZSBwcmVzZW50YXRpb24gb2YgdGhlIHNlbGVjdGVkIGl0ZW1zIGluXG4gICAgICAgIC8vIHRoZSBzaWRlYmFyIGFuZCBwcm9waWdhdGluZyBzZWxlY3Rpb25zIHRocm91Z2ggdGhlIGNhdGdvcmllcyBzZXJ2aWNlXG4gICAgICAgICRzY29wZS51cGRhdGVTZWxlY3RlZCA9IGZ1bmN0aW9uKGNhdGVnb3J5KSB7XG4gICAgICAgICAgICBjYXRlZ29yaWVzLnRvZ2dsZShjYXRlZ29yeSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmNoZWNrU2VsZWN0ZWQgPSBmdW5jdGlvbihib29sKSB7XG4gICAgICAgICAgICBpZiAoYm9vbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcInNlbGVjdGVkXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImRlc2VsZWN0ZWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLnRvZ2dsZTtcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInRvZ2dsZWQgdHJpZ2dlcmVkIGZyb20gc2lkZWJhclwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS50b2dnbGUpO1xuICAgICAgICB9KTtcbn1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnc2lkZWJhckRpc3BsYXknLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0b2dnbGU6IHsgb3BlbjogdHJ1ZSB9LFxuICAgICAgICBzZWN0aW9uOiAnSW50cm9kdWN0aW9uJ1xuICAgIH1cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignV3JhcENvbnRyb2xsZXInLCBbJyRzY29wZScsICdzaWRlYmFyRGlzcGxheScsIGZ1bmN0aW9uICgkc2NvcGUsIHNpZGViYXJEaXNwbGF5KSB7XG4gICAgICAgICRzY29wZS50b2dnbGUgPSBzaWRlYmFyRGlzcGxheS50b2dnbGU7XG4gICAgICAgICRzY29wZS5zZWN0aW9uID0gc2lkZWJhckRpc3BsYXkuc2VjdGlvbjtcblxuICAgICAgICAkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLnRvZ2dsZTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0b2dnbGVkIHRyaWdnZXJlZCBmcm9tIHdyYXBcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudG9nZ2xlKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICAkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2lkZWJhckRpc3BsYXkuc2VjdGlvbjtcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLnNlY3Rpb24gPSBzaWRlYmFyRGlzcGxheS5zZWN0aW9uO1xuICAgICAgICB9KTtcbiAgICB9XSlcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
