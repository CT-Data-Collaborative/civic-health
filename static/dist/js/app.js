var app=angular.module("app",["ngAnimate","ui.bootstrap","ngLodash","ngRoute"]);angular.module("app").config(["$routeProvider","$locationProvider",function(t,e){t.when("/data",{templateUrl:"static/dist/templates/data.html",controller:"DataVizController"}).when("/about",{templateUrl:"static/dist/templates/about.html",controller:"AboutPageController"}).otherwise({redirectTo:"/data"})}]),angular.module("app").filter("suppressions",function(){return function(t){return"-9,999.0"===t||"-9999"===t?"NA":"-666,666.0"===t||"-666666"===t?" * ":t}}).filter("percent",function(){return function(t){return parseInt(t)>0?t+"%":t}}).filter("any",["lodash",function(t){return function(e,n){return"undefined"!=typeof n?t.some(e,n):t.some(e)}}]).filter("none",["lodash",function(t){return function(e,n){return"undefined"!=typeof n?!t.some(e,n):!t.some(e)}}]).filter("sluggify",function(){return function(t){return t.toLowerCase().replace(/[^a-zA-Z0-9_]/g,"_")}}).filter("safe",["$sce",function(t){return function(e){return t.trustAsHtml(e.toString())}}]),angular.module("app").controller("AboutPageController",["$scope","$http","$log","$location","sidebarDisplay","contributors",function(t,e,n,o,r,i){t.toggle=r.toggle,console.log(t.toggle);var l=i.getContributors("all");l.then(function(e){t.contributors=i.list},function(t){alert("promise rejected!")}),t.$on("$viewContentLoaded",function(e){t.toggle.open=!1})}]),angular.module("app").controller("DataVizController",["$scope","$http","$log","$location","$filter","sidebarDisplay","categories","lodash",function(t,e,n,o,r,i,l,a){t.toggle=i.toggle,t.aboutCollapsed=!1,t.toggleChart=function(t){t=r("sluggify")(t),$("#"+t).toggle()};var c=l.getCategories("all");c.then(function(e){t.categories=l.list},function(t){alert("promise rejected!")}),t.$on("$viewContentLoaded",function(e){t.toggle.open=!0})}]),angular.module("app").directive("simpletable",function(){var t=tableChart();return{restrict:"E",scope:{data:"=data"},link:function(e,n,o){e.$watchCollection("data",function(e){d3.select(n[0]).datum(e).call(t)})}}}),angular.module("app").directive("timeseries",["$window",function(t){var e=timeSeries();return{restrict:"E",scope:{data:"=data"},link:function(n,o,r){n.render=function(){data={data:n.data,config:{width:.6*o.parent().parent().parent()[0].getBoundingClientRect().width}},d3.select(o[0]).datum(data).call(e)},n.$watchCollection("data",function(t){n.render()}),t.onresize=function(){n.render()}}}}]),angular.module("app").service("categories",["$http","$q","lodash",function(t,e,n){var o={};return o.list=[],o.toggle=function(t){position=n.findIndex(o.list,function(e){return e.name==t.name}),o.list[position].selected=!o.list[position].selected},o.getCategories=function(){return e(o.list.length>0?function(t){t(o)}:function(e,r){t.get("/static/dist/data/data.json").success(function(t){o.list=n.map(n.sortBy(t,"rank"),function(t){return n.extend({},t,{selected:!0})}),o.list,e(o)}).error(function(){r("There was an error getting categories")})})},o}]),angular.module("app").service("contributors",["$http","$q",function(t,e){var n={};return n.list=[],n.getContributors=function(){return e(n.list.length>0?function(t){t(n)}:function(e,o){t.get("/static/dist/data/contributors.json").success(function(t){n.list=t,e(n)}).error(function(){o("There was an error getting contributors")})})},n}]),angular.module("app").controller("SidebarController",["$scope","$log","lodash","categories","contributors",function(t,e,n,o,r){var i=o.getCategories();i.then(function(e){t.categories=o.list},function(t){alert("promise rejected!")});var l=r.getContributors();l.then(function(e){t.contributors=r.list},function(t){alert("promise rejected!")}),t.updateSelected=function(t){o.toggle(t),console.log(n.pluck(o.list,"selected"))},t.checkSelected=function(t){return t?"selected":"deselected"},t.$watchCollection(function(){return t.toggle},function(){console.log("toggled triggered from sidebar"),console.log(t.toggle)})}]),angular.module("app").service("sidebarDisplay",function(){return{toggle:{open:!0}}}),angular.module("app").controller("WrapController",["$scope","sidebarDisplay",function(t,e){t.toggle=e.toggle,t.$watchCollection(function(){return t.toggle},function(){console.log("toggled triggered from wrap"),console.log(t.toggle)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsInJvdXRlcy5qcyIsImZpbHRlcnMuanMiLCJhYm91dHBhZ2UvYWJvdXRwYWdlLmNvbnRyb2xsZXIuanMiLCJkYXRhdml6L2RhdGF2aXouY29udHJvbGxlci5qcyIsImRhdGF2aXovc2ltcGxldGFibGUuZGlyZWN0aXZlLmpzIiwiZGF0YXZpei90aW1lc2VyaWVzLmRpcmVjdGl2ZS5qcyIsInNpZGViYXIvY2F0ZWdvcmllcy5zZXJ2aWNlLmpzIiwic2lkZWJhci9jb250cmlidXRvcnMuc2VydmljZS5qcyIsInNpZGViYXIvc2lkZWJhci5jb250cm9sbGVyLmpzIiwic2lkZWJhci9zaWRlYmFyZGlzcGxheS5zZXJ2aWNlLmpzIiwic2lkZWJhci93cmFwLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZpbHRlciIsImlucHV0Iiwic3RyIiwicGFyc2VJbnQiLCJsb2Rhc2giLCJhcnIiLCJwcm9wIiwic29tZSIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsIiRzY2UiLCJ2YWwiLCJ0cnVzdEFzSHRtbCIsInRvU3RyaW5nIiwiJHNjb3BlIiwiJGh0dHAiLCIkbG9nIiwiJGxvY2F0aW9uIiwic2lkZWJhckRpc3BsYXkiLCJjb250cmlidXRvcnMiLCJ0b2dnbGUiLCJjb25zb2xlIiwibG9nIiwiY29udHJpYnV0b3JQcm9taXNlIiwiZ2V0Q29udHJpYnV0b3JzIiwidGhlbiIsInJlc3VsdCIsImxpc3QiLCJyZWplY3Rpb24iLCJhbGVydCIsIiRvbiIsImV2ZW50Iiwib3BlbiIsIiRmaWx0ZXIiLCJjYXRlZ29yaWVzIiwiYWJvdXRDb2xsYXBzZWQiLCJ0b2dnbGVDaGFydCIsInNsdWciLCIkIiwicHJvbWlzZSIsImdldENhdGVnb3JpZXMiLCJkaXJlY3RpdmUiLCJjaGFydCIsInRhYmxlQ2hhcnQiLCJyZXN0cmljdCIsInNjb3BlIiwiZGF0YSIsImxpbmsiLCJlbGVtZW50IiwiYXR0cnMiLCIkd2F0Y2hDb2xsZWN0aW9uIiwiZDMiLCJzZWxlY3QiLCJkYXR1bSIsImNhbGwiLCIkd2luZG93IiwidGltZVNlcmllcyIsInJlbmRlciIsIndpZHRoIiwicGFyZW50IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwib25yZXNpemUiLCJzZXJ2aWNlIiwiJHEiLCJjYXRlZ29yeSIsInBvc2l0aW9uIiwiZmluZEluZGV4IiwibGlzdGNhdCIsIm5hbWUiLCJzZWxlY3RlZCIsImxlbmd0aCIsInJlc29sdmUiLCJyZWplY3QiLCJnZXQiLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJtYXAiLCJzb3J0QnkiLCJvIiwiZXh0ZW5kIiwiZXJyb3IiLCJjYXRlZ29yeVByb21pc2UiLCJ1cGRhdGVTZWxlY3RlZCIsInBsdWNrIiwiY2hlY2tTZWxlY3RlZCIsImJvb2wiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLEtBQUFDLFFBQUFDLE9BQUEsT0FDQSxZQUNBLGVBQ0EsV0FDQSxXQ0pBRCxTQUFBQyxPQUFBLE9BQ0FDLFFBQUEsaUJBQUEsb0JBQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFDQUUsS0FBQSxTQUNBQyxZQUFBLGtDQUNBQyxXQUFBLHNCQUVBRixLQUFBLFVBQ0FDLFlBQUEsbUNBQ0FDLFdBQUEsd0JBRUFDLFdBQ0FDLFdBQUEsYUNaQVQsUUFBQUMsT0FBQSxPQUNBUyxPQUFBLGVBQUEsV0FDQSxNQUFBLFVBQUFDLEdBQ0EsTUFBQSxhQUFBQSxHQUFBLFVBQUFBLEVBQ0EsS0FDQSxlQUFBQSxHQUFBLFlBQUFBLEVBQ0EsTUFFQUEsS0FJQUQsT0FBQSxVQUFBLFdBQ0EsTUFBQSxVQUFBRSxHQUNBLE1BQUFDLFVBQUFELEdBQUEsRUFDQUEsRUFBQSxJQUVBQSxLQUlBRixPQUFBLE9BQUEsU0FBQSxTQUFBSSxHQUNBLE1BQUEsVUFBQUMsRUFB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QUFBZCxPQUFBNEMsR0FDQTNDLFFBQUFDLElBQUFsQixFQUFBK0UsTUFBQWpELEVBQUFQLEtBQUEsY0FHQWIsRUFBQXNFLGNBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUNBLFdBRUEsY0FHQXZFLEVBQUFvQyxpQkFBQSxXQUNBLE1BQUFwQyxHQUFBTSxRQUNBLFdBQ0FDLFFBQUFDLElBQUEsa0NBQ0FELFFBQUFDLElBQUFSLEVBQUFNLGFDeENBOUIsUUFBQUMsT0FBQSxPQUNBdUUsUUFBQSxpQkFBQSxXQUNBLE9BQ0ExQyxRQUFBWSxNQUFBLE1DSEExQyxRQUFBQyxPQUFBLE9BQ0FNLFdBQUEsa0JBQUEsU0FBQSxpQkFBQSxTQUFBaUIsRUFBQUksR0FDQUosRUFBQU0sT0FBQUYsRUFBQUUsT0FFQU4sRUFBQW9DLGlCQUFBLFdBQ0EsTUFBQXBDLEdBQUFNLFFBQ0EsV0FDQUMsUUFBQUMsSUFBQSwrQkFDQUQsUUFBQUMsSUFBQVIsRUFBQU0iLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG4gICAgJ25nQW5pbWF0ZScsXG4gICAgJ3VpLmJvb3RzdHJhcCcsXG4gICAgJ25nTG9kYXNoJyxcbiAgICAnbmdSb3V0ZSdcbiAgICBdKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbmZpZyhmdW5jdGlvbigkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAkcm91dGVQcm92aWRlclxuICAgICAgICAud2hlbignL2RhdGEnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy9kaXN0L3RlbXBsYXRlcy9kYXRhLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0RhdGFWaXpDb250cm9sbGVyJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2Fib3V0Jywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvZGlzdC90ZW1wbGF0ZXMvYWJvdXQuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQWJvdXRQYWdlQ29udHJvbGxlcidcbiAgICAgICAgfSlcbiAgICAgICAgLm90aGVyd2lzZSh7XG4gICAgICAgICAgICByZWRpcmVjdFRvOiAnL2RhdGEnXG4gICAgICAgIH0pO1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5maWx0ZXIoJ3N1cHByZXNzaW9ucycsIGZ1bmN0aW9uKCkge1xuICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQgPT09IFwiLTksOTk5LjBcIiB8fCBpbnB1dCA9PT0gXCItOTk5OVwiKSB7XG4gICAgICAgIHJldHVybiAnTkEnO1xuICAgIH0gZWxzZSBpZiAoaW5wdXQgPT09IFwiLTY2Niw2NjYuMFwiIHx8IGlucHV0ID09PSBcIi02NjY2NjZcIikge1xuICAgICAgICByZXR1cm4gJyAqICc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cbiAgfTtcbn0pXG4uZmlsdGVyKCdwZXJjZW50JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cikge1xuICAgICAgICBpZiAocGFyc2VJbnQoc3RyKSA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBzdHIgKyBcIiVcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzdHI7XG4gICAgICAgIH1cbiAgICB9XG59KVxuLmZpbHRlcignYW55JywgWydsb2Rhc2gnLCBmdW5jdGlvbihsb2Rhc2gpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJyLCBwcm9wKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvcCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgcmV0dXJuIGxvZGFzaC5zb21lKGFyciwgcHJvcClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBsb2Rhc2guc29tZShhcnIpXG4gICAgICAgIH1cbiAgICB9XG59XSlcbi5maWx0ZXIoJ25vbmUnLCBbJ2xvZGFzaCcsIGZ1bmN0aW9uKGxvZGFzaCkge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnIsIHByb3ApIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9wICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gIWxvZGFzaC5zb21lKGFyciwgcHJvcClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAhbG9kYXNoLnNvbWUoYXJyKVxuICAgICAgICB9XG4gICAgfVxufV0pXG4uZmlsdGVyKCdzbHVnZ2lmeScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gaW5wdXQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXmEtekEtWjAtOV9dL2csIFwiX1wiKVxuICAgIH07XG59KVxuLmZpbHRlcignc2FmZScsIFsnJHNjZScsIGZ1bmN0aW9uKCRzY2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIHJldHVybiAkc2NlLnRydXN0QXNIdG1sKHZhbC50b1N0cmluZygpKTtcbiAgICB9O1xufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0Fib3V0UGFnZUNvbnRyb2xsZXInLFxuICAgIFsnJHNjb3BlJywgJyRodHRwJywgJyRsb2cnLCAnJGxvY2F0aW9uJywvKiAnJGFuY2hvclNjcm9sbCcsICckcm9vdFNjb3BlJywgJyRyb3V0ZVBhcmFtcycsICovJ3NpZGViYXJEaXNwbGF5JywgJ2NvbnRyaWJ1dG9ycycsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGxvZywgJGxvY2F0aW9uLC8qICRhbmNob3JTY3JvbGwsICRyb290U2NvcGUsICRyb3V0ZVBhcmFtcywgKi9zaWRlYmFyRGlzcGxheSwgY29udHJpYnV0b3JzKXtcbiAgICAgICAgJHNjb3BlLnRvZ2dsZSA9IHNpZGViYXJEaXNwbGF5LnRvZ2dsZTtcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnRvZ2dsZSk7XG5cbiAgICAgICAgLy8gJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbihuZXdSb3V0ZSwgb2xkUm91dGUpIHtcbiAgICAgICAgLy8gICAgICRsb2NhdGlvbi5oYXNoKCRyb3V0ZVBhcmFtcy5zY3JvbGxUbyk7XG4gICAgICAgIC8vICAgICAkYW5jaG9yU2Nyb2xsKCk7XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIHZhciBjb250cmlidXRvclByb21pc2UgPSBjb250cmlidXRvcnMuZ2V0Q29udHJpYnV0b3JzKFwiYWxsXCIpO1xuICAgICAgICBjb250cmlidXRvclByb21pc2UudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICRzY29wZS5jb250cmlidXRvcnMgPSBjb250cmlidXRvcnMubGlzdDtcbiAgICAgICAgfSwgZnVuY3Rpb24ocmVqZWN0aW9uKSB7XG4gICAgICAgICAgICBhbGVydChcInByb21pc2UgcmVqZWN0ZWQhXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkc2NvcGUuJG9uKCckdmlld0NvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgLy8gSSBtYWRlIGNoYW5nZXMgdG8gdGhlIHNpZGViYXIgZGlzcGxheSBzZXJ2aWNlLCByZW5hbWluZyB0aGUgaW50ZXJuYWxcbiAgICAgICAgICAgIC8vIHNldHRpbmcgdG8gYmUgXCJvcGVuXCIsIHdoaWNoIG1ha2VzIGl0IGVhc2llciB0byBpbnRlcnByZXQgdGhpcy4gSSBtYWRlXG4gICAgICAgICAgICAvLyBjb3JyZXNwb25kaW5nIGNoYW5nZXMgaW4gdGhlIGFib3V0IGFuZCBkYXRhIHRlbXBsYXRlcy5cbiAgICAgICAgICAgIC8vIFRoaXMgbGlzdGVuZXIgZW5zdXJlcyB0aGF0IHRoZSBzaWRlYmFyIGRvZXNuJ3QgZ2V0IGNsb3NlZCwgd2hpY2ggc29tZWhvd1xuICAgICAgICAgICAgLy8gcmVzb2x2ZXMgdGhlIGlzc3VlIG9mIHJlbmRlcmluZyB0aGUgdGVtcGxhdGUgdW5kZXJuZWF0IHRoZSBzbGlkZW91dCBtZW51XG4gICAgICAgICAgICAkc2NvcGUudG9nZ2xlLm9wZW4gPSBmYWxzZTtcbiAgICAgICAgfSk7XG5cbn1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignRGF0YVZpekNvbnRyb2xsZXInLFxuICAgIFsnJHNjb3BlJywgJyRodHRwJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRmaWx0ZXInLC8qICckYW5jaG9yU2Nyb2xsJywgJyRyb290U2NvcGUnLCAnJHJvdXRlUGFyYW1zJywgKi8nc2lkZWJhckRpc3BsYXknLCAnY2F0ZWdvcmllcycsICdsb2Rhc2gnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRsb2csICRsb2NhdGlvbiwgJGZpbHRlciwvKiAkYW5jaG9yU2Nyb2xsLCAkcm9vdFNjb3BlLCAkcm91dGVQYXJhbXMsICovc2lkZWJhckRpc3BsYXksIGNhdGVnb3JpZXMsIGxvZGFzaCl7XG4gICAgICAgIHZhciBsbyA9IGxvZGFzaDtcbiAgICAgICAgJHNjb3BlLnRvZ2dsZSA9IHNpZGViYXJEaXNwbGF5LnRvZ2dsZTtcblxuICAgICAgICAkc2NvcGUuYWJvdXRDb2xsYXBzZWQgPSBmYWxzZTtcblxuICAgICAgICAkc2NvcGUudG9nZ2xlQ2hhcnQgPSBmdW5jdGlvbihzbHVnKSB7XG4gICAgICAgICAgICBzbHVnID0gJGZpbHRlcignc2x1Z2dpZnknKShzbHVnKTtcblxuICAgICAgICAgICAgJChcIiNcIitzbHVnKS50b2dnbGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24obmV3Um91dGUsIG9sZFJvdXRlKSB7XG4gICAgICAgIC8vICAgICAkbG9jYXRpb24uaGFzaCgkcm91dGVQYXJhbXMuc2Nyb2xsVG8pO1xuICAgICAgICAvLyAgICAgJGFuY2hvclNjcm9sbCgpO1xuICAgICAgICAvLyB9KTtcblxuICAgICAgICB2YXIgcHJvbWlzZSA9IGNhdGVnb3JpZXMuZ2V0Q2F0ZWdvcmllcyhcImFsbFwiKTtcbiAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBjYXRlZ29yaWVzLmxpc3Q7XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAgICAgICAgYWxlcnQoXCJwcm9taXNlIHJlamVjdGVkIVwiKTtcbiAgICAgICAgfSlcblxuICAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICRzY29wZS50b2dnbGUub3BlbiA9IHRydWU7XG4gICAgICAgIH0pO1xufV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5kaXJlY3RpdmUoJ3NpbXBsZXRhYmxlJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gVGhpcyBmdW5jdGlvbiBzaG91bGQgcmVmbGVjdCB3aGF0ZXZlciB5b3VyIGQzIHRhYmxlIGZ1bmN0aW9uIGlzIGNhbGxlZC5cbiAgICB2YXIgY2hhcnQgPSB0YWJsZUNoYXJ0KCk7XG4gICAgcmV0dXJuICB7XG4gICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBkYXRhOiBcIj1kYXRhXCIgLy8gV2UgY2FuIGNhbGwgdGhpcyB3L2Ugd2Ugd2FudC5cbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgICAgICBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdChlbGVtZW50WzBdKS5kYXR1bShkYXRhKS5jYWxsKGNoYXJ0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmRpcmVjdGl2ZSgndGltZXNlcmllcycsIFsnJHdpbmRvdycsIGZ1bmN0aW9uKCR3aW5kb3cpIHtcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIHNob3VsZCByZWZsZWN0IHdoYXRldmVyIHlvdXIgZDMgZnVuY3Rpb24gaXMgY2FsbGVkLlxuICAgIHZhciBjaGFydCA9IHRpbWVTZXJpZXMoKTtcbiAgICByZXR1cm4gIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGRhdGE6IFwiPWRhdGFcIiAvLyBXZSBjYW4gY2FsbCB0aGlzIHcvZSB3ZSB3YW50LlxuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAgIHNjb3BlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgOiBzY29wZS5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBjb25maWcgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIndpZHRoXCIgOiBlbGVtZW50LnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICogMC42XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KGVsZW1lbnRbMF0pLmRhdHVtKGRhdGEpLmNhbGwoY2hhcnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgLy8gICAgIGRhdGEgOiBkYXRhLFxuICAgICAgICAgICAgICAgIC8vICAgICBjb25maWcgOiB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBcIndpZHRoXCIgOiBlbGVtZW50LnBhcmVudCgpWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoXG4gICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgICAgICAvLyBkMy5zZWxlY3QoZWxlbWVudFswXSkuZGF0dW0oZGF0YSkuY2FsbChjaGFydCk7XG4gICAgICAgICAgICAgICAgc2NvcGUucmVuZGVyKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgVGhpcyBjb2RlIGlzIGludGVuZGVkIHRvIGdldCB0aGUgY2hhcnQgdG8gcmVkcmF3IHdoZW4gdGhlIHdpbmRvdyBpcyByZXNpemVkXG4gICAgICAgICAgICAgICAgQnV0IGFzIGl0IHN0YW5kcywgc29tZWhvdyB0aGlzIG92ZXJyaWRlcyB0aGUgZGF0YSBhbmQgdGhlIGNoYXJ0IGJlY29tZXMgdXNlbGVzcy5cbiAgICAgICAgICAgICAgICBJIGRvbid0IHRoaW5rIHRoaXMgZmVhdHVyZSBpcyB3b3J0aCB0aGUgZGVidWcgdGltZSBub3csIGJ1dCBpdCdzIHdvcnRoIGtlZXBpbmcgaW4gbWluZCBmb3IgdGhlIGZ1dHVyZS5cbiAgICAgICAgICAgICoqL1xuICAgICAgICAgICAgJHdpbmRvdy5vbnJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNjb3BlLnJlbmRlcigpXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKCdkYXRhJywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgLy8gICAgIHNjb3BlLnJlbmRlcihkYXRhKTtcbiAgICAgICAgICAgIC8vIH0pO1xuXG4gICAgICAgIH1cbiAgICB9XG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ2NhdGVnb3JpZXMnLCBbJyRodHRwJywgJyRxJywgJ2xvZGFzaCcsIGZ1bmN0aW9uKCRodHRwLCAkcSwgbG9kYXNoKSB7XG4gICAgdmFyIGNhdGVnb3JpZXMgPSB7fTtcbiAgICBjYXRlZ29yaWVzLmxpc3QgPSBbXTtcblxuICAgIGNhdGVnb3JpZXMudG9nZ2xlID0gZnVuY3Rpb24oY2F0ZWdvcnkpIHtcbiAgICAgICAgcG9zaXRpb24gPSBsb2Rhc2guZmluZEluZGV4KGNhdGVnb3JpZXMubGlzdCwgZnVuY3Rpb24obGlzdGNhdCkge1xuICAgICAgICAgICAgcmV0dXJuIGxpc3RjYXQubmFtZSA9PSBjYXRlZ29yeS5uYW1lO1xuICAgICAgICB9KTtcbiAgICAgICAgY2F0ZWdvcmllcy5saXN0W3Bvc2l0aW9uXS5zZWxlY3RlZCA9ICFjYXRlZ29yaWVzLmxpc3RbcG9zaXRpb25dLnNlbGVjdGVkO1xuICAgIH07XG5cbiAgICBjYXRlZ29yaWVzLmdldENhdGVnb3JpZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNhdGVnb3JpZXMubGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBpZiB0aGlzIG9iamVjdCBhbHJlYWR5IGhhcyBkYXRhLCBqdXN0IHVzZSB3aGF0J3MgY3VycmVudGx5IGF2YWlsYWJsZVxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUpe3Jlc29sdmUoY2F0ZWdvcmllcyl9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSBnZXQgZGF0YSBmcmVzaCBmcm9tIGZpbGVcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9zdGF0aWMvZGlzdC9kYXRhL2RhdGEuanNvbicpXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzLmxpc3QgPSBsb2Rhc2gubWFwKGxvZGFzaC5zb3J0QnkocmVzcG9uc2UsIFwicmFua1wiKSwgZnVuY3Rpb24obykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2Rhc2guZXh0ZW5kKHt9LCBvLCB7XCJzZWxlY3RlZFwiIDogdHJ1ZX0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllcy5saXN0XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGNhdGVnb3JpZXMpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoXCJUaGVyZSB3YXMgYW4gZXJyb3IgZ2V0dGluZyBjYXRlZ29yaWVzXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBjYXRlZ29yaWVzO1xufV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdjb250cmlidXRvcnMnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24oJGh0dHAsICRxKSB7XG4gICAgdmFyIGNvbnRyaWJ1dG9ycyA9IHt9O1xuICAgIGNvbnRyaWJ1dG9ycy5saXN0ID0gW107XG5cbiAgICBjb250cmlidXRvcnMuZ2V0Q29udHJpYnV0b3JzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChjb250cmlidXRvcnMubGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBpZiB0aGlzIG9iamVjdCBhbHJlYWR5IGhhcyBkYXRhLCBqdXN0IHVzZSB3aGF0J3MgY3VycmVudGx5IGF2YWlsYWJsZVxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUpe3Jlc29sdmUoY29udHJpYnV0b3JzKX0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIGdldCBkYXRhIGZyZXNoIGZyb20gZmlsZVxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL3N0YXRpYy9kaXN0L2RhdGEvY29udHJpYnV0b3JzLmpzb24nKVxuICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJpYnV0b3JzLmxpc3QgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoY29udHJpYnV0b3JzKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiVGhlcmUgd2FzIGFuIGVycm9yIGdldHRpbmcgY29udHJpYnV0b3JzXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBjb250cmlidXRvcnM7XG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ1NpZGViYXJDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckbG9nJywnbG9kYXNoJywgJ2NhdGVnb3JpZXMnLCAnY29udHJpYnV0b3JzJyxcbiAgICBmdW5jdGlvbigkc2NvcGUsICRsb2csIGxvZGFzaCwgY2F0ZWdvcmllcywgY29udHJpYnV0b3JzKSB7XG4gICAgICAgIC8vICRzY29wZS5zdGF0dXMgPSB7XG4gICAgICAgIC8vICAgICBpc29wZW46IGZhbHNlXG4gICAgICAgIC8vIH07XG5cbiAgICAgICAgdmFyIGNhdGVnb3J5UHJvbWlzZSA9IGNhdGVnb3JpZXMuZ2V0Q2F0ZWdvcmllcygpO1xuICAgICAgICBjYXRlZ29yeVByb21pc2UudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gY2F0ZWdvcmllcy5saXN0O1xuICAgICAgICB9LCBmdW5jdGlvbihyZWplY3Rpb24pIHtcbiAgICAgICAgICAgIGFsZXJ0KFwicHJvbWlzZSByZWplY3RlZCFcIik7XG4gICAgICAgIH0pXG5cbiAgICAgICAgdmFyIGNvbnRyaWJ1dG9yUHJvbWlzZSA9IGNvbnRyaWJ1dG9ycy5nZXRDb250cmlidXRvcnMoKTtcbiAgICAgICAgY29udHJpYnV0b3JQcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAkc2NvcGUuY29udHJpYnV0b3JzID0gY29udHJpYnV0b3JzLmxpc3Q7XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAgICAgICAgYWxlcnQoXCJwcm9taXNlIHJlamVjdGVkIVwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRnVuY3Rpb25zIGZvciBtYW5hZ2luZyB0aGUgcHJlc2VudGF0aW9uIG9mIHRoZSBzZWxlY3RlZCBpdGVtcyBpblxuICAgICAgICAvLyB0aGUgc2lkZWJhciBhbmQgcHJvcGlnYXRpbmcgc2VsZWN0aW9ucyB0aHJvdWdoIHRoZSBjYXRnb3JpZXMgc2VydmljZVxuICAgICAgICAkc2NvcGUudXBkYXRlU2VsZWN0ZWQgPSBmdW5jdGlvbihjYXRlZ29yeSkge1xuICAgICAgICAgICAgY2F0ZWdvcmllcy50b2dnbGUoY2F0ZWdvcnkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cobG9kYXNoLnBsdWNrKGNhdGVnb3JpZXMubGlzdCwgXCJzZWxlY3RlZFwiKSlcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuY2hlY2tTZWxlY3RlZCA9IGZ1bmN0aW9uKGJvb2wpIHtcbiAgICAgICAgICAgIGlmIChib29sKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwic2VsZWN0ZWRcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZGVzZWxlY3RlZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkc2NvcGUudG9nZ2xlO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidG9nZ2xlZCB0cmlnZ2VyZWQgZnJvbSBzaWRlYmFyXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnRvZ2dsZSk7XG4gICAgICAgIH0pO1xufV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdzaWRlYmFyRGlzcGxheScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRvZ2dsZTogeyBvcGVuOiB0cnVlIH1cbiAgICB9XG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignV3JhcENvbnRyb2xsZXInLCBbJyRzY29wZScsICdzaWRlYmFyRGlzcGxheScsIGZ1bmN0aW9uKCRzY29wZSwgc2lkZWJhckRpc3BsYXkpIHtcbiAgICAkc2NvcGUudG9nZ2xlID0gc2lkZWJhckRpc3BsYXkudG9nZ2xlO1xuXG4gICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLnRvZ2dsZTtcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInRvZ2dsZWQgdHJpZ2dlcmVkIGZyb20gd3JhcFwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS50b2dnbGUpO1xuICAgICAgICB9KTtcbn1dKVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
