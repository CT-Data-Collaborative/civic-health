var app=angular.module("app",["ngAnimate","ui.bootstrap","ngLodash","ngRoute"]);angular.module("app").config(["$routeProvider","$locationProvider",function(t,e){t.when("/introduction",{templateUrl:"static/dist/templates/introduction.html",controller:"AboutPageController"}).when("/civic-engagement",{templateUrl:"static/dist/templates/civic-engagement.html",controller:"EngagementPageController"}).when("/political-participation",{templateUrl:"static/dist/templates/political-participation.html",controller:"ParticipationPageController"}).when("/community-cohesion",{templateUrl:"static/dist/templates/community-cohesion.html",controller:"CohesionPageController"}).when("/institutional-presence",{templateUrl:"static/dist/templates/institutional-presence.html",controller:"InstitutionPageController"}).when("/a-closer-look",{templateUrl:"static/dist/templates/closer-look.html",controller:"CloserLookPageController"}).when("/call-to-action",{templateUrl:"static/dist/templates/call-to-action.html",controller:"CallToActionPageController"}).when("/partners",{templateUrl:"static/dist/templates/partners.html",controller:"PartnersPageController"}).when("/raw-data",{templateUrl:"static/dist/templates/data.html",controller:"DataVizController"}).otherwise({redirectTo:"/introduction"})}]),angular.module("app").filter("suppressions",function(){return function(t){return"-9,999.0"===t||"-9999"===t?"&ddagger;":"-666,666.0"===t||"-666666"===t?"&dagger;":t}}).filter("percent",function(){return function(t){return parseInt(t)>0?t+"%":t}}).filter("anySuppressed",["lodash",function(t){return function(e,n){return e=t.flattenDeep(t.pluck(e,"data")),"undefined"!=typeof n?t.some(e,function(e){return e=t.values(e),-1!==t.indexOf(e,n)}):t.some(e,function(e){return e=t.values(e),-1!==t.indexOf(e,"-666666")||-1!==t.indexOf(e,"-9999")})}}]).filter("any",["lodash",function(t){return function(e,n){return"undefined"!=typeof n?t.some(e,n):t.some(e)}}]).filter("none",["lodash",function(t){return function(e,n){return"undefined"!=typeof n?!t.some(e,n):!t.some(e)}}]).filter("sluggify",function(){return function(t){return t.toLowerCase().replace(/[^a-zA-Z0-9_]/g,"_")}}).filter("safe",["$sce",function(t){return t.trustAsHtml}]),angular.module("app").service("barChartService",["$q","$http","lodash",function(t,e,n){var a={};return a.chart=function(t,e,a){function r(t){function e(t,e){t.each(function(){for(var t,n=d3.select(this),a=n.text().split(/\s+/).reverse(),r=[],o=0,i=1.1,l=n.attr("y"),c=parseFloat(n.attr("dy")),s=n.text(null).append("tspan").attr("x",0).attr("y",l).attr("dy",c+"em");t=a.pop();)r.push(t),s.text(r.join(" ")),s.node().getComputedTextLength()>e&&(r.pop(),s.text(r.join(" ")),r=[t],s=n.append("tspan").attr("x",0).attr("y",l).attr("dy",++o*i+c+"em").text(t))})}t.each(function(t){var a=this.getBoundingClientRect(),r={top:.05*a.height,right:.05*a.width,bottom:.3*a.height,left:d3.max([.05*a.width,75])},i=a.width-(r.left+r.right);height=a.height-(r.top+r.bottom),tip=d3.tip().attr("class","groupedbar-tip").html(function(t){return n.chain([t.Label,d3.format("f")(t.Value)+"%"]).compact().join("<br />")}),svg=d3.select(this).append("svg").attr("height",a.height).attr("width",a.width).call(tip),chart=svg.append("g").attr("height",height).attr("width",i).attr("transform","translate("+r.left+", "+r.top+")"),x=d3.scale.ordinal().rangeRoundBands([0,i],.1,.1).domain(o),y=d3.scale.linear().range([height,0]).domain([0,yRangeMax]).nice(10),xAxis=d3.svg.axis().scale(x).orient("bottom"),yAxis=d3.svg.axis().scale(y).orient("left").innerTickSize(-i).tickPadding(10).tickFormat(function(t){return d3.format("f")(t)+"%"});var l=chart.append("g").classed({"x-axis":!0,axis:!0}).attr("transform","translate(0, "+height+")").call(xAxis);l.selectAll(".tick text").call(e,x.rangeBand()),chart.append("g").classed({"y-axis":!0,axis:!0}).attr("transform","translate(-12, 0)").call(yAxis),chart.selectAll("rect.barchart-bar").data(t).enter().append("rect").attr("class",function(t,e){var n="bar-color-"+(e%2+1);return["barchart-bar",n].join(" ")}).attr("width",x.rangeBand()).attr("height",function(t){return height-y(t.Value)}).attr("x",function(t){return x(t.Bar)}).attr("y",function(t){return y(t.Value)}).on("mouseover",tip.show).on("mouseout",tip.hide)})}a.facet=n.difference(["structure","time"],[a.facet])[0],e=d3.csv.parse(e);var o=n.chain(e).map(function(t){return t.Bar}).unique().value();yRangeMax=n.chain(e).map(function(t){return+t.Value}).max().value(),chartContainer=d3.select(t).append("div").classed("barchart-container",!0).append("div").classed("barchart-container-internal",!0).datum(e),r(chartContainer)},a}]),angular.module("app").controller("DataVizController",["$scope","$http","$log","$location","$filter","sidebarDisplay","categories",function(t,e,n,a,r,o,i){t.toggle=o.toggle;var l=i.getCategories("all");l.then(function(e){t.categories=i.list},function(t){alert("promise rejected!")}),t.$on("$viewContentLoaded",function(e){t.toggle.open=!0,o.section="Raw Data"})}]),angular.module("app").directive("dataviz",["$window","$http","timeseriesService","groupedBarChartService","barChartService","tableService",function(t,e,n,a,r,o){var i={line:n.chart,bar:r.chart,groupedBar:a.chart,table:o.chart};return{restrict:"E",scope:{which:"=which",type:"=type"},link:function(t,n,a){t.render=function(){t.data?i[t.type](n[0],result.data,{}):e.get("/static/dist/data/csv/"+t.which+".csv").then(function(e){t.data=e.data,i[t.type](n[0],t.data,{})})},t.$watchCollection("which",function(){t.render()})}}}]),angular.module("app").service("groupedBarChartService",["$q","$http","lodash",function(t,e,n){var a={};return a.chart=function(t,e,a){function r(t){t.each(function(t){var e=d3.scale.ordinal().range(["bar-color-1","bar-color-2","bar-color-3","bar-color-4"]).domain(l),n=d3.select(this).selectAll("div.groupedbar-legend-entry").data(t).enter().append("div").classed("groupedbar-legend-entry",!0).datum(function(t){return t});n.each(function(t){d3.select(this).append("span").attr("class",function(n){return["groupedbar-legend-entry-color",e(t)].join(" ")}),d3.select(this).append("span").classed("groupedbar-legend-entry-label",!0).text(t)})})}function o(t){function e(t,e){t.each(function(){for(var t,n=d3.select(this),a=n.text().split(/\s+/).reverse(),r=[],o=0,i=1.1,l=n.attr("y"),c=parseFloat(n.attr("dy")),s=n.text(null).append("tspan").attr("x",0).attr("y",l).attr("dy",c+"em");t=a.pop();)r.push(t),s.text(r.join(" ")),s.node().getComputedTextLength()>e&&(r.pop(),s.text(r.join(" ")),r=[t],s=n.append("tspan").attr("x",0).attr("y",l).attr("dy",++o*i+c+"em").text(t))})}t.each(function(t){var a=this.getBoundingClientRect(),r={top:.05*a.height,right:.05*a.width,bottom:.3*a.height,left:d3.max([.05*a.width,75])},o=a.width-(r.left+r.right);height=a.height-(r.top+r.bottom),tip=d3.tip().attr("class","groupedbar-tip").html(function(t){return n.chain([t.Label,d3.format("f")(t.Value)+"%"]).compact().join("<br />")}),svg=d3.select(this).append("svg").attr("height",a.height).attr("width",a.width).call(tip),chart=svg.append("g").attr("height",height).attr("width",o).attr("transform","translate("+r.left+", "+r.top+")"),colors=d3.scale.ordinal().range(["bar-color-1","bar-color-2","bar-color-3","bar-color-4"]).domain(l),x0=d3.scale.ordinal().rangeRoundBands([0,o],.2,.2).domain(i),x1=d3.scale.ordinal().rangeRoundBands([0,x0.rangeBand()],.1,0).domain(l),y=d3.scale.linear().range([height,0]).domain([0,yRangeMax]).nice(5),x0Axis=d3.svg.axis().scale(x0).orient("bottom"),x1Axis=d3.svg.axis().scale(x1).orient("bottom"),yAxis=d3.svg.axis().scale(y).orient("left").innerTickSize(-o).tickPadding(10).tickFormat(function(t){return d3.format("f")(t)+"%"});var c=chart.append("g").classed({"x-axis":!0,axis:!0}).attr("transform","translate(0, "+height+")").call(x0Axis);c.selectAll(".tick text").call(e,x0.rangeBand()),chart.append("g").classed({"y-axis":!0,axis:!0}).attr("transform","translate(-12, 0)").call(yAxis);var s=chart.selectAll("g.groupedbar-group").data(t).enter().append("g").classed("groupedbar-group",!0).attr("width",x0.rangeBand()).attr("height",height).attr("transform",function(t){return"translate("+x0(t.key)+", 0)"}).datum(function(t){return t.values});s.each(function(t){var e=n.chain(t).map(function(t){return t.Bar}).without("").value(),a=(n.chain(t).map(function(t){return t.Label}).without("").value(),x1.copy().domain(e));d3.select(this).selectAll("rect.groupedbar-bar").data(t).enter().append("rect").attr("class",function(t){return["groupedbar-bar",colors(t.Bar)].join(" ")}).attr("width",a.rangeBand()).attr("height",function(t){return height-y(t.Value)}).attr("x",function(t){return a(t.Bar)}).attr("y",function(t){return y(t.Value)}).on("mouseover",tip.show).on("mouseout",tip.hide)})})}a.facet=n.difference(["structure","time"],[a.facet])[0],e=d3.csv.parse(e);var i=n.chain(e).map(function(t){return t.Group}).unique().value(),l=n.chain(e).map(function(t){return t.Bar}).unique().value();yRangeMax=n.chain(e).map(function(t){return+t.Value}).max().value(),e=d3.nest().key(function(t){return t.Group}).entries(e),chartContainer=d3.select(t).append("div").classed("groupedbar-container",!0).append("div").classed("groupedbar-container-internal",!0).datum(e),legendContainer=d3.select(t).append("div").classed({"legend-container":!0,"groupedbar-legend-container":!0}).append("div").classed({"groupedbar-legend-container-internal":!0}).datum(l),o(chartContainer),r(legendContainer)},a}]),angular.module("app").directive("simpletable",function(){var t=tableChart();return{restrict:"E",scope:{data:"=data"},link:function(e,n,a){e.$watchCollection("data",function(e){d3.select(n[0]).datum(e).call(t)})}}}),angular.module("app").service("tableService",["$q","$http","lodash",function(t,e,n){var a={};return a.chart=function(t,e,a){function r(t){t.each(function(t){var e=d3.select(this).append("table").attr("class","ctdata-table"),n=e.append("thead"),a=e.append("tbody");n.append("tr").selectAll("th").data(o).enter().append("th").attr("class",function(t){return"Indicator"===t?"hide":"col-name"}).text(function(t){return t});var r=a.selectAll("tr").data(t).enter().append("tr");r.selectAll("td").data(function(t){return o.map(function(e){return{column:e,value:t[e]}})}).enter().append("td").attr("class",function(t){return"Indicator"===t.column?"name":"value"}).html(function(t){return t.value})})}a.facet=n.difference(["structure","time"],[a.facet])[0],e=d3.csv.parse(e);var o=[];for(k in e[0])o.push(k);chartContainer=d3.select(t).append("div").classed("table-container-internal",!0).datum(e),r(chartContainer)},a}]),angular.module("app").service("timeseriesService",["$q","$http","lodash",function(t,e,n){var a={};return a.chart=function(t,e,a){function r(t){t.each(function(t){colors=d3.scale.ordinal().range(["#1EACF1","#B94A48"]).domain(i);var e=d3.select(this).selectAll("div.timeseries-legend-entry").data(t).enter().append("div").classed("timeseries-legend-entry",!0).datum(function(t){return t});e.each(function(t){d3.select(this).append("span").classed("timeseries-legend-entry-color",!0).style("background-color",colors(t)),d3.select(this).append("span").classed("timeseries-legend-entry-label",!0).text(t)})})}function o(t){t.each(function(t){var e=this.getBoundingClientRect(),a={top:.05*e.height,right:.05*e.width,bottom:.1*e.height,left:d3.max([.05*e.width,55])},r=e.width-(a.left+a.right);height=e.height-(a.top+a.bottom),svg=d3.select(this).append("svg").attr("height",e.height).attr("width",e.width),chart=svg.append("g").attr("height",height).attr("width",r).attr("transform","translate("+a.left+", "+a.top+")"),colors=d3.scale.ordinal().range(["#1EACF1","#B94A48"]).domain(i),symbolScale=d3.scale.ordinal().range(d3.svg.symbolTypes).domain(i),timeFormat=d3.time.format("%Y"),timeRange=n.chain(t).map(function(t){return t.Year}).value(),x=d3.time.scale().range([12,r]).domain(d3.extent(timeRange).map(function(t){return timeFormat.parse(t)})),y=d3.scale.linear().range([height,0]).domain(d3.extent(n.chain(t).map(function(t){return i.map(function(e){return+t[e]})}).flatten().unique().value())).nice(5,10),xAxis=d3.svg.axis().scale(x).orient("bottom").ticks(d3.time.year,1),yAxis=d3.svg.axis().scale(y).orient("left").innerTickSize(-r).tickPadding(10).tickFormat(function(t){return d3.format("f")(t)+"%"}),line=d3.svg.line().x(function(t){return x(t.Year)}).y(function(t){return y(t.Value)}),t=i.map(function(e){return{Key:e,Values:n.map(t,function(t){return{Year:timeFormat.parse(t.Year),Value:+t[e]}})}}),chart.append("g").classed({"x-axis":!0,axis:!0}).attr("transform","translate(0, "+height+")").call(xAxis),chart.append("g").classed({"y-axis":!0,axis:!0}).attr("transform","translate(-12, 0)").call(yAxis),chart.selectAll("g.timeseries-lines").data(t).enter().append("g").classed("timeseries-lines",!0).append("path").classed("timeseries-path",!0).attr("d",function(t){return line(t.Values)}).attr("stroke",function(t,e){return colors(t.Key)});var o=t.map(function(t,e,n){return t.Values.map(function(e,n,a){return e.Key=t.Key,e})});o=n.flatten(o),chart.append("g").classed("timeseries-points",!0).selectAll("g").data(o).enter().append("path").attr("stroke",function(t,e){return colors(t.Key)}).attr("d",d3.svg.symbol().type("circle").size(65)).attr("transform",function(t){return"translate("+x(t.Year)+", "+y(t.Value)+")"})})}a.facet=n.difference(["structure","time"],[a.facet])[0],e=d3.csv.parse(e);var i=n.chain(e[0]).keys().filter(function(t){return"Year"!==t}).value();chartContainer=d3.select(t).append("div").classed("timeseries-container",!0).append("div").classed("timeseries-container-internal",!0).datum(e),legendContainer=d3.select(t).append("div").classed({"legend-container":!0,"timeseries-legend-container":!0}),o(chartContainer),legendContainer=d3.select(t).append("div").classed({"legend-container":!0,"timeseries-legend-container":!0}).append("div").classed({"timeseries-legend-container-internal":!0}).datum(i),r(legendContainer)},a}]),angular.module("app").controller("AboutPageController",["$scope","$http","$log","$location","$routeParams","sidebarDisplay","contributors",function(t,e,n,a,r,o,i){t.toggle=o.toggle;var l=i.getContributors("all");l.then(function(e){t.contributors=i.list},function(t){alert("promise rejected!")}),t.$on("$viewContentLoaded",function(e){t.toggle.open=!1,o.section="Introduction",t.nextSection="Civic Engagement",t.nextSectionTeaser="Testing",t.nextSectionURL="#/civic-engagement"})}]),angular.module("app").controller("CallToActionPageController",["$scope","$http","$log","$location","sidebarDisplay",function(t,e,n,a,r){t.toggle=r.toggle,t.$on("$viewContentLoaded",function(e){t.toggle.open=!1,r.section="Call To Action"})}]),angular.module("app").controller("CloserLookPageController",["$scope","$http","$log","$location","sidebarDisplay",function(t,e,n,a,r){t.toggle=r.toggle,t.$on("$viewContentLoaded",function(e){t.toggle.open=!1,r.section="A Closer Look",t.nextSection="Institutional Presence",t.nextSectionTeaser="Stuff about institutions",t.nextSectionURL="#/institutional-presence"})}]),angular.module("app").controller("CohesionPageController",["$scope","$http","$log","$location","sidebarDisplay",function(t,e,n,a,r){t.toggle=r.toggle,t.$on("$viewContentLoaded",function(e){t.toggle.open=!1,r.section="Social Networks and Community Cohesion",t.nextSection="Institutional Presence",t.nextSectionTeaser="Stuff about institutions",t.nextSectionURL="#/institutional-presence"})}]),angular.module("app").controller("EngagementPageController",["$scope","$http","$log","$location","sidebarDisplay",function(t,e,n,a,r){t.toggle=r.toggle,t.$on("$viewContentLoaded",function(e){t.toggle.open=!1,r.section="Civic Engagement",t.nextSection="Political Participation",t.nextSectionTeaser="Stuff about political participation",t.nextSectionURL="#/political-participation"})}]),angular.module("app").controller("ParticipationPageController",["$scope","$http","$log","$location","sidebarDisplay",function(t,e,n,a,r){t.toggle=r.toggle,t.$on("$viewContentLoaded",function(e){t.toggle.open=!1,r.section="Political Participation",t.nextSection="Community Cohesion",t.nextSectionTeaser="Stuff about cohesion",t.nextSectionURL="#/community-cohesion"})}]),angular.module("app").controller("PartnersPageController",["$scope","$http","$log","$location","$routeParams","sidebarDisplay","contributors",function(t,e,n,a,r,o,i){t.toggle=o.toggle;var l=i.getContributors("all");l.then(function(e){t.contributors=i.list},function(t){alert("promise rejected!")}),t.$on("$viewContentLoaded",function(e){t.toggle.open=!1,o.section="Partners",t.nextSection="Raw Data",t.nextSectionTeaser="Stuff about raw data",t.nextSectionURL="#/raw-data"})}]),angular.module("app").controller("InstitutionPageController",["$scope","$http","$log","$location","sidebarDisplay",function(t,e,n,a,r){t.toggle=r.toggle,t.$on("$viewContentLoaded",function(e){t.toggle.open=!1,r.section="Institutional Presence",t.nextSection="Call to Action",t.nextSectionTeaser="Stuff about call to action",t.nextSectionURL="#/call-to-action"})}]),angular.module("app").service("categories",["$http","$q","lodash",function(t,e,n){var a={};return a.list=[],a.toggle=function(t){position=n.findIndex(a.list,function(e){return e.name==t.name}),a.list[position].selected=!a.list[position].selected},a.getCategories=function(){return e(a.list.length>0?function(t){t(a)}:function(e,r){t.get("/static/dist/data/data.json").success(function(t){list=n.map(n.sortBy(t,"rank"),function(t){return t.data.forEach(function(e,a,r){t.data[a].data=n.sortByAll(t.data[a].data,"rank")}),t=n.extend({},t,{selected:!0})}),a.list=list,e(a)}).error(function(){r("There was an error getting categories")})})},a}]),angular.module("app").service("contributors",["$http","$q",function(t,e){var n={};return n.list=[],n.getContributors=function(){return e(n.list.length>0?function(t){t(n)}:function(e,a){t.get("/static/dist/data/contributors.json").success(function(t){n.list=t,e(n)}).error(function(){a("There was an error getting contributors")})})},n}]),angular.module("app").controller("SidebarController",["$scope","$log","lodash","categories","contributors",function(t,e,n,a,r){var o=a.getCategories();o.then(function(e){t.categories=a.list},function(t){alert("promise rejected!")});var i=r.getContributors();i.then(function(e){t.contributors=r.list},function(t){alert("promise rejected!")}),t.updateSelected=function(t){a.toggle(t)},t.checkSelected=function(t){return t?"selected":"deselected"},t.$watchCollection(function(){return t.toggle},function(){console.log("toggled triggered from sidebar"),console.log(t.toggle)})}]),angular.module("app").service("sidebarDisplay",function(){return{toggle:{open:!0},section:"Introduction"}}),angular.module("app").controller("WrapController",["$scope","sidebarDisplay",function(t,e){t.toggle=e.toggle,t.section=e.section,t.$watchCollection(function(){return e.section},function(){t.section=e.section})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsInJvdXRlcy5qcyIsImZpbHRlcnMuanMiLCJkYXRhdml6L2JhckNoYXJ0U2VydmljZS5zZXJ2aWNlLmpzIiwiZGF0YXZpei9kYXRhdml6LmNvbnRyb2xsZXIuanMiLCJkYXRhdml6L2RhdGF2aXouZGlyZWN0aXZlLmpzIiwiZGF0YXZpei9ncm91cGVkQmFyQ2hhcnQuc2VydmljZS5qcyIsImRhdGF2aXovc2ltcGxldGFibGUuZGlyZWN0aXZlLmpzIiwiZGF0YXZpei90YWJsZS5zZXJ2aWNlLmpzIiwiZGF0YXZpei90aW1lc2VyaWVzLnNlcnZpY2UuanMiLCJwYWdlcy9hYm91dHBhZ2UuY29udHJvbGxlci5qcyIsInBhZ2VzL2NhbGx0b2FjdGlvbi5jb250cm9sbGVyLmpzIiwicGFnZXMvY2xvc2VybG9vay5jb250cm9sbGVyLmpzIiwicGFnZXMvY29oZXNpb24uY29udHJvbGxlci5qcyIsInBhZ2VzL2VuZ2FnZW1lbnQuY29udHJvbGxlci5qcyIsInBhZ2VzL3BhcnRpY2lwYXRpb24uY29udHJvbGxlci5qcyIsInBhZ2VzL3BhcnRuZXJzLmNvbnRyb2xsZXJzLmpzIiwicGFnZXMvcHJlc2VuY2UuY29udHJvbGxlci5qcyIsInNpZGViYXIvY2F0ZWdvcmllcy5zZXJ2aWNlLmpzIiwic2lkZWJhci9jb250cmlidXRvcnMuc2VydmljZS5qcyIsInNpZGViYXIvc2lkZWJhci5jb250cm9sbGVyLmpzIiwic2lkZWJhci9zaWRlYmFyZGlzcGxheS5zZXJ2aWNlLmpzIiwic2lkZWJhci93cmFwLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZpbHRlciIsImlucHV0Iiwic3RyIiwicGFyc2VJbnQiLCJsb2Rhc2giLCJhcnIiLCJzdXBwcmVzc2lvbiIsImZsYXR0ZW5EZWVwIiwicGx1Y2siLCJzb21lIiwibyIsInZhbHVlcyIsImluZGV4T2YiLCJwcm9wIiwidG9Mb3dlckNhc2UiLCJyZXBsYWNlIiwiJHNjZSIsInRydXN0QXNIdG1sIiwic2VydmljZSIsIiRxIiwiJGh0dHAiLCJiYXJDaGFydFNlcnZpY2UiLCJjaGFydCIsImNvbnRhaW5lciIsImRhdGEiLCJtYWtlYmFyY2hhcnRDaGFydCIsInNlbGVjdGlvbiIsIndyYXAiLCJ0ZXh0Iiwid2lkdGgiLCJlYWNoIiwid29yZCIsImQzIiwic2VsZWN0IiwidGhpcyIsIndvcmRzIiwic3BsaXQiLCJyZXZlcnNlIiwibGluZSIsImxpbmVOdW1iZXIiLCJsaW5lSGVpZ2h0IiwieSIsImF0dHIiLCJkeSIsInBhcnNlRmxvYXQiLCJ0c3BhbiIsImFwcGVuZCIsInBvcCIsInB1c2giLCJqb2luIiwibm9kZSIsImdldENvbXB1dGVkVGV4dExlbmd0aCIsIkJCb3giLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJtYXJnaW4iLCJ0b3AiLCJoZWlnaHQiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiLCJtYXgiLCJ0aXAiLCJodG1sIiwiZCIsImNoYWluIiwiTGFiZWwiLCJmb3JtYXQiLCJWYWx1ZSIsImNvbXBhY3QiLCJzdmciLCJjYWxsIiwieCIsInNjYWxlIiwib3JkaW5hbCIsInJhbmdlUm91bmRCYW5kcyIsImRvbWFpbiIsImJhcktleXMiLCJsaW5lYXIiLCJyYW5nZSIsInlSYW5nZU1heCIsIm5pY2UiLCJ4QXhpcyIsImF4aXMiLCJvcmllbnQiLCJ5QXhpcyIsImlubmVyVGlja1NpemUiLCJ0aWNrUGFkZGluZyIsInRpY2tGb3JtYXQiLCJ0IiwieEF4aXNHcm91cCIsImNsYXNzZWQiLCJ4LWF4aXMiLCJzZWxlY3RBbGwiLCJyYW5nZUJhbmQiLCJ5LWF4aXMiLCJlbnRlciIsImkiLCJjb2xvckNsYXNzIiwiQmFyIiwib24iLCJzaG93IiwiaGlkZSIsImZhY2V0IiwiZGlmZmVyZW5jZSIsImNzdiIsInBhcnNlIiwibWFwIiwidW5pcXVlIiwidmFsdWUiLCJjaGFydENvbnRhaW5lciIsImRhdHVtIiwiJHNjb3BlIiwiJGxvZyIsIiRsb2NhdGlvbiIsIiRmaWx0ZXIiLCJzaWRlYmFyRGlzcGxheSIsImNhdGVnb3JpZXMiLCJ0b2dnbGUiLCJwcm9taXNlIiwiZ2V0Q2F0ZWdvcmllcyIsInRoZW4iLCJyZXN1bHQiLCJsaXN0IiwicmVqZWN0aW9uIiwiYWxlcnQiLCIkb24iLCJldmVudCIsIm9wZW4iLCJzZWN0aW9uIiwiZGlyZWN0aXZlIiwiJHdpbmRvdyIsInRpbWVzZXJpZXNTZXJ2aWNlIiwiZ3JvdXBlZEJhckNoYXJ0U2VydmljZSIsInRhYmxlU2VydmljZSIsImNoYXJ0cyIsImJhciIsImdyb3VwZWRCYXIiLCJ0YWJsZSIsInJlc3RyaWN0Iiwic2NvcGUiLCJ3aGljaCIsInR5cGUiLCJsaW5rIiwiZWxlbWVudCIsImF0dHJzIiwicmVuZGVyIiwiZ2V0IiwiJHdhdGNoQ29sbGVjdGlvbiIsIm1ha2VMZWdlbmQiLCJsZWdlbmREYXRhIiwiY29sb3JzIiwibGVnZW5kRW50cmllcyIsImVudHJ5RGF0YSIsIm1ha2VHcm91cGVkQmFyQ2hhcnQiLCJ4MCIsImdyb3VwS2V5cyIsIngxIiwieDBBeGlzIiwieDFBeGlzIiwieDBBeGlzR3JvdXAiLCJiYXJHcm91cHMiLCJrZXkiLCJncm91cERhdGEiLCJ0aGlzR3JvdXBCYXJzIiwid2l0aG91dCIsInRoaXNHcm91cFgxIiwiY29weSIsIkdyb3VwIiwibmVzdCIsImVudHJpZXMiLCJsZWdlbmRDb250YWluZXIiLCJsZWdlbmQtY29udGFpbmVyIiwiZ3JvdXBlZGJhci1sZWdlbmQtY29udGFpbmVyIiwiZ3JvdXBlZGJhci1sZWdlbmQtY29udGFpbmVyLWludGVybmFsIiwidGFibGVDaGFydCIsIm1ha2VUYWJsZSIsInRoZWFkIiwidGJvZHkiLCJjb2x1bW5zIiwicm93cyIsInJvdyIsImNvbHVtbiIsImsiLCJsaW5lS2V5cyIsInN0eWxlIiwibWFrZVRpbWVTZXJpZXMiLCJzeW1ib2xTY2FsZSIsInN5bWJvbFR5cGVzIiwidGltZUZvcm1hdCIsInRpbWUiLCJ0aW1lUmFuZ2UiLCJZZWFyIiwiZXh0ZW50IiwiZmxhdHRlbiIsInRpY2tzIiwieWVhciIsIktleSIsIlZhbHVlcyIsInBvaW50RGF0YSIsImRpIiwiZGEiLCJ2IiwidmkiLCJ2YSIsInN5bWJvbCIsInNpemUiLCJrZXlzIiwidGltZXNlcmllcy1sZWdlbmQtY29udGFpbmVyIiwidGltZXNlcmllcy1sZWdlbmQtY29udGFpbmVyLWludGVybmFsIiwiJHJvdXRlUGFyYW1zIiwiY29udHJpYnV0b3JzIiwiY29udHJpYnV0b3JQcm9taXNlIiwiZ2V0Q29udHJpYnV0b3JzIiwibmV4dFNlY3Rpb24iLCJuZXh0U2VjdGlvblRlYXNlciIsIm5leHRTZWN0aW9uVVJMIiwiY2F0ZWdvcnkiLCJwb3NpdGlvbiIsImZpbmRJbmRleCIsImxpc3RjYXQiLCJuYW1lIiwic2VsZWN0ZWQiLCJsZW5ndGgiLCJyZXNvbHZlIiwicmVqZWN0Iiwic3VjY2VzcyIsInJlc3BvbnNlIiwic29ydEJ5IiwiZm9yRWFjaCIsImluZGljYXRvciIsImlpIiwiaWEiLCJzb3J0QnlBbGwiLCJleHRlbmQiLCJlcnJvciIsImNhdGVnb3J5UHJvbWlzZSIsInVwZGF0ZVNlbGVjdGVkIiwiY2hlY2tTZWxlY3RlZCIsImJvb2wiLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLE9BQ0EsWUFDQSxlQUNBLFdBQ0EsV0NKQUQsU0FBQUMsT0FBQSxPQUNBQyxRQUFBLGlCQUFBLG9CQUFBLFNBQUFDLEVBQUFDLEdBQ0FELEVBQ0FFLEtBQUEsaUJBQ0FDLFlBQUEsMENBQ0FDLFdBQUEsd0JBRUFGLEtBQUEscUJBQ0FDLFlBQUEsOENBQ0FDLFdBQUEsNkJBRUFGLEtBQUEsNEJBQ0FDLFlBQUEscURBQ0FDLFdBQUEsZ0NBRUFGLEtBQUEsdUJBQ0FDLFlBQUEsZ0RBQ0FDLFdBQUEsMkJB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S0FiLEVBQUE2SCxlQUFBLFNBQUFwQixHQUNBcEcsRUFBQUMsT0FBQW1HLElBR0F6RyxFQUFBOEgsY0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQ0EsV0FFQSxjQUdBL0gsRUFBQW9DLGlCQUFBLFdBQ0EsTUFBQXBDLEdBQUFNLFFBQ0EsV0FDQTBILFFBQUFDLElBQUEsa0NBQ0FELFFBQUFDLElBQUFqSSxFQUFBTSxhQ3ZDQS9ILFFBQUFDLE9BQUEsT0FDQTJCLFFBQUEsaUJBQUEsV0FDQSxPQUNBbUcsUUFBQVUsTUFBQSxHQUNBQyxRQUFBLGtCQ0pBMUksUUFBQUMsT0FBQSxPQUNBTSxXQUFBLGtCQUFBLFNBQUEsaUJBQUEsU0FBQWtILEVBQUFJLEdBQ0FKLEVBQUFNLE9BQUFGLEVBQUFFLE9BQ0FOLEVBQUFpQixRQUFBYixFQUFBYSxRQUVBakIsRUFBQW9DLGlCQUFBLFdBQ0EsTUFBQWhDLEdBQUFhLFNBQ0EsV0FDQWpCLEVBQUFpQixRQUFBYixFQUFBYSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcbiAgICAnbmdBbmltYXRlJyxcbiAgICAndWkuYm9vdHN0cmFwJyxcbiAgICAnbmdMb2Rhc2gnLFxuICAgICduZ1JvdXRlJ1xuICAgIF0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29uZmlnKGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgIC53aGVuKCcvaW50cm9kdWN0aW9uJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvZGlzdC90ZW1wbGF0ZXMvaW50cm9kdWN0aW9uLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0Fib3V0UGFnZUNvbnRyb2xsZXInXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvY2l2aWMtZW5nYWdlbWVudCcsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL2Rpc3QvdGVtcGxhdGVzL2NpdmljLWVuZ2FnZW1lbnQuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRW5nYWdlbWVudFBhZ2VDb250cm9sbGVyJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL3BvbGl0aWNhbC1wYXJ0aWNpcGF0aW9uJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvZGlzdC90ZW1wbGF0ZXMvcG9saXRpY2FsLXBhcnRpY2lwYXRpb24uaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUGFydGljaXBhdGlvblBhZ2VDb250cm9sbGVyJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2NvbW11bml0eS1jb2hlc2lvbicsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL2Rpc3QvdGVtcGxhdGVzL2NvbW11bml0eS1jb2hlc2lvbi5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDb2hlc2lvblBhZ2VDb250cm9sbGVyJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2luc3RpdHV0aW9uYWwtcHJlc2VuY2UnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy9kaXN0L3RlbXBsYXRlcy9pbnN0aXR1dGlvbmFsLXByZXNlbmNlLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0luc3RpdHV0aW9uUGFnZUNvbnRyb2xsZXInXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvYS1jbG9zZXItbG9vaycsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL2Rpc3QvdGVtcGxhdGVzL2Nsb3Nlci1sb29rLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0Nsb3Nlckxvb2tQYWdlQ29udHJvbGxlcidcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9jYWxsLXRvLWFjdGlvbicsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL2Rpc3QvdGVtcGxhdGVzL2NhbGwtdG8tYWN0aW9uLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NhbGxUb0FjdGlvblBhZ2VDb250cm9sbGVyJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL3BhcnRuZXJzJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvZGlzdC90ZW1wbGF0ZXMvcGFydG5lcnMuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUGFydG5lcnNQYWdlQ29udHJvbGxlcidcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9yYXctZGF0YScsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL2Rpc3QvdGVtcGxhdGVzL2RhdGEuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRGF0YVZpekNvbnRyb2xsZXInXG4gICAgICAgIH0pXG4gICAgICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICAgICAgcmVkaXJlY3RUbzogJy9pbnRyb2R1Y3Rpb24nXG4gICAgICAgIH0pO1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5maWx0ZXIoJ3N1cHByZXNzaW9ucycsIGZ1bmN0aW9uKCkge1xuICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQgPT09IFwiLTksOTk5LjBcIiB8fCBpbnB1dCA9PT0gXCItOTk5OVwiKSB7XG4gICAgICAgIHJldHVybiAnJmRkYWdnZXI7JztcbiAgICB9IGVsc2UgaWYgKGlucHV0ID09PSBcIi02NjYsNjY2LjBcIiB8fCBpbnB1dCA9PT0gXCItNjY2NjY2XCIpIHtcbiAgICAgICAgcmV0dXJuICcmZGFnZ2VyOyc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cbiAgfTtcbn0pXG4uZmlsdGVyKCdwZXJjZW50JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cikge1xuICAgICAgICBpZiAocGFyc2VJbnQoc3RyKSA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBzdHIgKyBcIiVcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzdHI7XG4gICAgICAgIH1cbiAgICB9XG59KVxuLmZpbHRlcignYW55U3VwcHJlc3NlZCcsIFsnbG9kYXNoJywgZnVuY3Rpb24obG9kYXNoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFyciwgc3VwcHJlc3Npb24pIHtcbiAgICAgICAgYXJyID0gbG9kYXNoLmZsYXR0ZW5EZWVwKGxvZGFzaC5wbHVjayhhcnIsIFwiZGF0YVwiKSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBzdXBwcmVzc2lvbiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJjaGVja2luZyBzdXBwcmVzc2lvbjogXCIrc3VwcHJlc3Npb24pO1xuICAgICAgICAgICAgcmV0dXJuIGxvZGFzaC5zb21lKGFyciwgZnVuY3Rpb24obykge1xuICAgICAgICAgICAgICAgIG8gPSBsb2Rhc2gudmFsdWVzKG8pO1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2Rhc2guaW5kZXhPZihvLCBzdXBwcmVzc2lvbikgIT09IC0xO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBhc3N1bWUgdG8gY2hlY2sgZWl0aGVyIHN1cHByZXNzaW9uXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImNoZWNraW5nIGJvdGggc3VwcHJlc3Npb24gdHlwZXNcIik7XG4gICAgICAgICAgICByZXR1cm4gbG9kYXNoLnNvbWUoYXJyLCBmdW5jdGlvbihvKSB7XG4gICAgICAgICAgICAgICAgbyA9IGxvZGFzaC52YWx1ZXMobyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvZGFzaC5pbmRleE9mKG8sICctNjY2NjY2JykgIT09IC0xIHx8IGxvZGFzaC5pbmRleE9mKG8sICctOTk5OScpICE9PSAtMTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufV0pXG4uZmlsdGVyKCdhbnknLCBbJ2xvZGFzaCcsIGZ1bmN0aW9uKGxvZGFzaCkge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnIsIHByb3ApIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9wICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9kYXNoLnNvbWUoYXJyLCBwcm9wKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGxvZGFzaC5zb21lKGFycilcbiAgICAgICAgfVxuICAgIH1cbn1dKVxuLmZpbHRlcignbm9uZScsIFsnbG9kYXNoJywgZnVuY3Rpb24obG9kYXNoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFyciwgcHJvcCkge1xuICAgICAgICBpZiAodHlwZW9mIHByb3AgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHJldHVybiAhbG9kYXNoLnNvbWUoYXJyLCBwcm9wKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICFsb2Rhc2guc29tZShhcnIpXG4gICAgICAgIH1cbiAgICB9XG59XSlcbi5maWx0ZXIoJ3NsdWdnaWZ5JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBpbnB1dC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teYS16QS1aMC05X10vZywgXCJfXCIpXG4gICAgfTtcbn0pXG4uZmlsdGVyKCdzYWZlJywgWyckc2NlJywgZnVuY3Rpb24oJHNjZSkge1xuICAgIHJldHVybiAkc2NlLnRydXN0QXNIdG1sO1xufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ2JhckNoYXJ0U2VydmljZScsIFsnJHEnLCAnJGh0dHAnLCAnbG9kYXNoJywgZnVuY3Rpb24oJHEsICRodHRwLCBsb2Rhc2gpIHtcbiAgICB2YXIgYmFyQ2hhcnRTZXJ2aWNlID0ge307XG5cbiAgICBiYXJDaGFydFNlcnZpY2UuY2hhcnQgPSBmdW5jdGlvbihjb250YWluZXIsIGRhdGEsIGNvbmZpZykge1xuICAgICAgICB2YXIgdGltZUZvcm1hdHMgPSB7XG4gICAgICAgICAgICBcInllYXJcIiA6IFwiWVlZWVwiLFxuICAgICAgICAgICAgXCJxdWFydGVyXCIgOiBcIltRXVEgWVlZWVwiLFxuICAgICAgICAgICAgXCJtb250aFwiIDogXCJNTU0gWVlZWVwiXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uZmlnLmZhY2V0ID0gbG9kYXNoLmRpZmZlcmVuY2UoW1wic3RydWN0dXJlXCIsIFwidGltZVwiXSwgW2NvbmZpZy5mYWNldF0pWzBdXG5cbiAgICAgICAgLy8gY29udmVydCBkYXRhIGZyb20gc3RyaW5nIC0+IGFycmF5IG9mIG9ialxuICAgICAgICBkYXRhID0gZDMuY3N2LnBhcnNlKGRhdGEpO1xuXG4gICAgICAgIHZhciBiYXJLZXlzID1sb2Rhc2guY2hhaW4oZGF0YSlcbiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuQmFyOyB9KVxuICAgICAgICAgICAgICAgIC51bmlxdWUoKVxuICAgICAgICAgICAgICAgIC52YWx1ZSgpXG4gICAgICAgICAgICB5UmFuZ2VNYXggPSBsb2Rhc2guY2hhaW4oZGF0YSlcbiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKGQpIHsgcmV0dXJuICtkLlZhbHVlOyB9KVxuICAgICAgICAgICAgICAgIC5tYXgoKVxuICAgICAgICAgICAgICAgIC52YWx1ZSgpO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBjb250YWluZXIgZm9yIG1hcHNcbiAgICAgICAgY2hhcnRDb250YWluZXIgPSBkMy5zZWxlY3QoY29udGFpbmVyKVxuICAgICAgICAgICAgLmFwcGVuZChcImRpdlwiKVxuICAgICAgICAgICAgICAgIC5jbGFzc2VkKFwiYmFyY2hhcnQtY29udGFpbmVyXCIsIHRydWUpXG4gICAgICAgICAgICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgICAgICAgICAgLmNsYXNzZWQoXCJiYXJjaGFydC1jb250YWluZXItaW50ZXJuYWxcIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAuZGF0dW0oZGF0YSk7XG5cbiAgICAgICAgLy8gY2hhcnRDb250YWluZXIuYXBwZW5kKFwicHJlXCIpXG4gICAgICAgICAgICAvLyAudGV4dChKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCA0KSk7XG4gICAgICAgICAgICAvLyAudGV4dChKU09OLnN0cmluZ2lmeSh5UmFuZ2VNYXgsIG51bGwsIDQpKTtcbiAgICAgICAgICAgIC8vIC50ZXh0KEpTT04uc3RyaW5naWZ5KGJhcktleXMsIG51bGwsIDQpKTtcbiAgICAgICAgICAgIC8vIC50ZXh0KEpTT04uc3RyaW5naWZ5KGNvbmZpZywgbnVsbCwgNCkpO1xuICAgICAgICAvLyByZXR1cm47XG5cbiAgICAgICAgbWFrZWJhcmNoYXJ0Q2hhcnQoY2hhcnRDb250YWluZXIpO1xuXG4gICAgICAgIHJldHVybjtcblxuICAgICAgICAvLyAvKiogU1RBUlQgU0NST0xMIE5PVElDRSAqKi9cbiAgICAgICAgLy8gLy8gaWYgd2UgYXJlIHVuZGVyIGEgY2VydGFpbiBwaXhlbCBzaXplLCB0aGVyZSB3aWxsIGJlIGhvcml6b250YWwgc2Nyb2xsaW5nXG4gICAgICAgIC8vIHZhciBpbnRlcm5hbENvbnRhaW5lclNpemUgPSBkMy5zZWxlY3QoY29udGFpbmVyKS5zZWxlY3QoXCJkaXYuYmFyY2hhcnQtY29udGFpbmVyLWludGVybmFsXCIpLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgLy8gICAgIGNvbnRhaW5lclNpemUgPSBkMy5zZWxlY3QoY29udGFpbmVyKS5zZWxlY3QoXCJkaXYuYmFyY2hhcnQtY29udGFpbmVyXCIpLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAvLyAvLyBjb25zb2xlLmxvZyhpbnRlcm5hbENvbnRhaW5lclNpemUud2lkdGggKyBcIiAvIFwiICsgY29udGFpbmVyU2l6ZS53aWR0aClcbiAgICAgICAgLy8gaWYgKGludGVybmFsQ29udGFpbmVyU2l6ZS53aWR0aCA+IGNvbnRhaW5lclNpemUud2lkdGgpIHtcbiAgICAgICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKFwic2Nyb2xsIE5vdGljZSFcIilcbiAgICAgICAgLy8gICAgIC8vIGNyZWF0ZSBzY3JvbGwgbm90aWNlXG4gICAgICAgIC8vICAgICB2YXIgc2Nyb2xsTm90aWNlID0gZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0KFwiZGl2LmJhcmNoYXJ0LWNvbnRhaW5lclwiKS5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgLy8gICAgICAgICAuY2xhc3NlZChcInNjcm9sbC1ub3RpY2VcIiwgdHJ1ZSlcbiAgICAgICAgLy8gICAgICAgICAuYXBwZW5kKFwicFwiKTtcblxuICAgICAgICAvLyAgICAgc2Nyb2xsTm90aWNlLmFwcGVuZChcImlcIilcbiAgICAgICAgLy8gICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgIC8vICAgICAgICAgICAgIFwiZmFcIiA6IHRydWUsXG4gICAgICAgIC8vICAgICAgICAgICAgIFwiZmEtYW5nbGUtZG91YmxlLWRvd24gXCIgOiB0cnVlXG4gICAgICAgIC8vICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gICAgIHNjcm9sbE5vdGljZS5hcHBlbmQoXCJzcGFuXCIpXG4gICAgICAgIC8vICAgICAgICAgLnRleHQoXCJTY3JvbGwgZm9yIG1vcmVcIik7XG5cbiAgICAgICAgLy8gICAgIHNjcm9sbE5vdGljZS5hcHBlbmQoXCJpXCIpXG4gICAgICAgIC8vICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAvLyAgICAgICAgICAgICBcImZhXCIgOiB0cnVlLFxuICAgICAgICAvLyAgICAgICAgICAgICBcImZhLWFuZ2xlLWRvdWJsZS1kb3duIFwiIDogdHJ1ZVxuICAgICAgICAvLyAgICAgICAgIH0pO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy8gZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0QWxsKFwiZGl2LmJhcmNoYXJ0LWNvbnRhaW5lclwiKS5vbihcInNjcm9sbFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gICAgIC8vIGlmIHNjcm9sbCBhdCBib3R0b20sIGhpZGUgc2Nyb2xsIG5vdGljZVxuICAgICAgICAvLyAgICAgLy8gdXNpbmcgYSBkaWZmZXJlbnQgY2xhc3Mgc28gYXMgbm90IHRvIGludGVyZmVyZSB3aXRoIHRoZSBtb3VzZW92ZXIgZWZmZWN0c1xuICAgICAgICAvLyAgICAgaWYgKChkMy5zZWxlY3QodGhpcykubm9kZSgpLnNjcm9sbExlZnQgKyBkMy5zZWxlY3QodGhpcykubm9kZSgpLm9mZnNldFdpZHRoKSA+PSAoZDMuc2VsZWN0KHRoaXMpLm5vZGUoKS5zY3JvbGxXaWR0aCAqIDAuOTc1KSkge1xuICAgICAgICAvLyAgICAgICAgIGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdEFsbChcImRpdi5zY3JvbGwtbm90aWNlXCIpXG4gICAgICAgIC8vICAgICAgICAgICAgIC5jbGFzc2VkKHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIFwiaGlkZGVuXCIgOiB0cnVlXG4gICAgICAgIC8vICAgICAgICAgICAgIH0pO1xuICAgICAgICAvLyAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gICAgICAgICBkMy5zZWxlY3QoY29udGFpbmVyKS5zZWxlY3RBbGwoXCJkaXYuc2Nyb2xsLW5vdGljZVwiKVxuICAgICAgICAvLyAgICAgICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBcImhpZGRlblwiIDogZmFsc2VcbiAgICAgICAgLy8gICAgICAgICAgICAgfSk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH0pXG4gICAgICAgIC8vIC8qKiBFTkQgU0NST0xMIE5PVElDRSAqKi9cblxuICAgICAgICAvLyAvLyBhZGQgaG92ZXIgZWZmZWN0cyAtIHVzZSBjbGFzc2VzIFwiaGlnaGxpZ2h0XCIgYW5kIFwibG93bGlnaHRcIlxuICAgICAgICAvLyBkMy5zZWxlY3QoY29udGFpbmVyKS5zZWxlY3RBbGwoXCJnLmVudHJ5LCBnLmJhcmNoYXJ0LWxpbmVzID4gcGF0aCwgZy5iYXJjaGFydC1wb2ludHMgPiBwYXRoXCIpXG4gICAgICAgIC8vIC5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbigpe1xuICAgICAgICAvLyAgICAgdmFyIGNsYXNzVG9IaWdobGlnaHQgPSBkMy5zZWxlY3QodGhpcykuYXR0cihcImRhdGEtY2xhc3NcIik7XG5cbiAgICAgICAgLy8gICAgIC8vIGxvd2xpZ2h0IGFsbCBlbGVtZW50c1xuICAgICAgICAvLyAgICAgZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0QWxsKFwiZy5lbnRyeSwgZy5iYXJjaGFydC1saW5lcyA+IHBhdGgsIGcuYmFyY2hhcnQtcG9pbnRzID4gcGF0aCwgZGl2LnNjcm9sbC1ub3RpY2VcIilcbiAgICAgICAgLy8gICAgIC5jbGFzc2VkKHtcbiAgICAgICAgLy8gICAgICAgICBcImxvd2xpZ2h0XCIgOiB0cnVlLFxuICAgICAgICAvLyAgICAgICAgIFwiaGlnaGxpZ2h0XCIgOiBmYWxzZVxuICAgICAgICAvLyAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgLy8gICAgIC8vIGhpZ2hsaWdodCBhbGwgZWxlbWVudHMgd2l0aCBtYXRjaGluZyBkYXRhLWNsYXNzXG4gICAgICAgIC8vICAgICBkMy5zZWxlY3QoY29udGFpbmVyKS5zZWxlY3RBbGwoXCJnLmVudHJ5LlwiK2NsYXNzVG9IaWdobGlnaHQrXCIsIGcuYmFyY2hhcnQtbGluZXMgPiBwYXRoLlwiK2NsYXNzVG9IaWdobGlnaHQrXCIsIGcuYmFyY2hhcnQtcG9pbnRzIHBhdGguXCIrY2xhc3NUb0hpZ2hsaWdodClcbiAgICAgICAgLy8gICAgIC5jbGFzc2VkKHtcbiAgICAgICAgLy8gICAgICAgICBcImxvd2xpZ2h0XCIgOiBmYWxzZSxcbiAgICAgICAgLy8gICAgICAgICBcImhpZ2hsaWdodFwiIDogdHJ1ZVxuICAgICAgICAvLyAgICAgfSk7XG4gICAgICAgIC8vIH0pXG4gICAgICAgIC8vIC5vbihcIm1vdXNlb3V0XCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vICAgICAvLyByZW1vdmUgYWxsIGhpZ2hsaWdodC9sb3dsaWdodCBjbGFzc2VzXG4gICAgICAgIC8vICAgICBkMy5zZWxlY3QoY29udGFpbmVyKS5zZWxlY3RBbGwoXCJnLmVudHJ5LCBnLmJhcmNoYXJ0LWxpbmVzID4gcGF0aCwgZy5iYXJjaGFydC1wb2ludHMgPiBwYXRoLCBkaXYuc2Nyb2xsLW5vdGljZVwiKVxuICAgICAgICAvLyAgICAgLmNsYXNzZWQoe1xuICAgICAgICAvLyAgICAgICAgIFwibG93bGlnaHRcIiA6IGZhbHNlLFxuICAgICAgICAvLyAgICAgICAgIFwiaGlnaGxpZ2h0XCIgOiBmYWxzZVxuICAgICAgICAvLyAgICAgfSk7XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIG1ha2ViYXJjaGFydENoYXJ0KHNlbGVjdGlvbikge1xuICAgICAgICAgICAgLy8gaGVscGVyIGZ1bmN0aW9uLCB3cmFwcyB0ZXh0IGZvciBheGlzIGxhYmVsc1xuICAgICAgICAgICAgZnVuY3Rpb24gd3JhcCh0ZXh0LCB3aWR0aCkge1xuICAgICAgICAgICAgICB0ZXh0LmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRleHQgPSBkMy5zZWxlY3QodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIHdvcmRzID0gdGV4dC50ZXh0KCkuc3BsaXQoL1xccysvKS5yZXZlcnNlKCksXG4gICAgICAgICAgICAgICAgICAgIHdvcmQsXG4gICAgICAgICAgICAgICAgICAgIGxpbmUgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgbGluZU51bWJlciA9IDAsXG4gICAgICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQgPSAxLjEsIC8vIGVtc1xuICAgICAgICAgICAgICAgICAgICB5ID0gdGV4dC5hdHRyKFwieVwiKSxcbiAgICAgICAgICAgICAgICAgICAgZHkgPSBwYXJzZUZsb2F0KHRleHQuYXR0cihcImR5XCIpKSxcbiAgICAgICAgICAgICAgICAgICAgdHNwYW4gPSB0ZXh0LnRleHQobnVsbCkuYXBwZW5kKFwidHNwYW5cIikuYXR0cihcInhcIiwgMCkuYXR0cihcInlcIiwgeSkuYXR0cihcImR5XCIsIGR5ICsgXCJlbVwiKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAod29yZCA9IHdvcmRzLnBvcCgpKSB7XG4gICAgICAgICAgICAgICAgICBsaW5lLnB1c2god29yZCk7XG4gICAgICAgICAgICAgICAgICB0c3Bhbi50ZXh0KGxpbmUuam9pbihcIiBcIikpO1xuICAgICAgICAgICAgICAgICAgaWYgKHRzcGFuLm5vZGUoKS5nZXRDb21wdXRlZFRleHRMZW5ndGgoKSA+IHdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmUucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIHRzcGFuLnRleHQobGluZS5qb2luKFwiIFwiKSk7XG4gICAgICAgICAgICAgICAgICAgIGxpbmUgPSBbd29yZF07XG4gICAgICAgICAgICAgICAgICAgIHRzcGFuID0gdGV4dC5hcHBlbmQoXCJ0c3BhblwiKS5hdHRyKFwieFwiLCAwKS5hdHRyKFwieVwiLCB5KS5hdHRyKFwiZHlcIiwgKytsaW5lTnVtYmVyICogbGluZUhlaWdodCArIGR5ICsgXCJlbVwiKS50ZXh0KHdvcmQpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGVjdGlvbi5lYWNoKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAvLyBzaXppbmcgYW5kIG1hcmdpbiB2YXJzXG4gICAgICAgICAgICAgICAgdmFyIEJCb3ggPSB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcInRvcFwiIDogQkJveC5oZWlnaHQgKiAwLjA1LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJyaWdodFwiIDogQkJveC53aWR0aCAqIDAuMDUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImJvdHRvbVwiIDogQkJveC5oZWlnaHQgKiAwLjMsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImxlZnRcIiA6IGQzLm1heChbQkJveC53aWR0aCAqIDAuMDUsIDc1XSlcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBCQm94LndpZHRoIC0gKG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSBCQm94LmhlaWdodCAtIChtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSksXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gdG9vbHRpcCBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICB0aXAgPSBkMy50aXAoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImdyb3VwZWRiYXItdGlwXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaHRtbChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZGFzaC5jaGFpbihbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQuTGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQzLmZvcm1hdChcImZcIikoZC5WYWx1ZSkgKyBcIiVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbXBhY3QoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKFwiPGJyIC8+XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAvLyBjb250YWluZXJzXG4gICAgICAgICAgICAgICAgICAgIHN2ZyA9IGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoXCJzdmdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIEJCb3guaGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCBCQm94LndpZHRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhbGwodGlwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCwgMClcIiksXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0ID0gc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsIFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGVzdGluZyBzdHVmZiAtIGRyYXdzIG91dGxpbmVzIGFyb3VuZCBzdmcgYW5kIGNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICAvLyBzdmdPdXRsaW5lID0gc3ZnLmFwcGVuZChcInJlY3RcIilcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5hdHRyKFwiaGVpZ2h0XCIsIHN2Zy5hdHRyKFwiaGVpZ2h0XCIpKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmF0dHIoXCJ3aWR0aFwiLCBzdmcuYXR0cihcIndpZHRoXCIpKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmF0dHIoXCJmaWxsXCIsIFwicmdiYSgwLDAsMCwwKVwiKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCJyZWRcIiksXG4gICAgICAgICAgICAgICAgICAgIC8vIGNoYXJ0T3V0bGluZSA9IHN2Zy5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsIFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmF0dHIoXCJoZWlnaHRcIiwgY2hhcnQuYXR0cihcImhlaWdodFwiKSlcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5hdHRyKFwid2lkdGhcIiwgY2hhcnQuYXR0cihcIndpZHRoXCIpKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmF0dHIoXCJmaWxsXCIsIFwicmdiYSgwLDAsMCwwKVwiKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmF0dHIoXCJzdHJva2VcIiAsXCJibHVlXCIpLFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIHggYW5kIHkgc2NhbGVzXG4gICAgICAgICAgICAgICAgICAgIHggPSBkMy5zY2FsZS5vcmRpbmFsKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yYW5nZVJvdW5kQmFuZHMoWzAsIHdpZHRoXSwgMC4xLCAwLjEpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZG9tYWluKGJhcktleXMpLFxuICAgICAgICAgICAgICAgICAgICB5ID0gZDMuc2NhbGUubGluZWFyKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yYW5nZShbaGVpZ2h0LCAwXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kb21haW4oWzAsIHlSYW5nZU1heF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAubmljZSgxMCksXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gLy8gYXhpcyBmdW5jdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgeEF4aXMgPSBkMy5zdmcuYXhpcygpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGUoeClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vcmllbnQoXCJib3R0b21cIiksXG4gICAgICAgICAgICAgICAgICAgIHlBeGlzID0gZDMuc3ZnLmF4aXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNjYWxlKHkpXG4gICAgICAgICAgICAgICAgICAgICAgICAub3JpZW50KFwibGVmdFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmlubmVyVGlja1NpemUoLXdpZHRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpY2tQYWRkaW5nKDEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkMy5mb3JtYXQoXCJmXCIpKHQpICsgXCIlXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyAvLyB0ZXN0IG91dHB1dCBmb3IgdHJvdWJsZXNob290aW5nIHRoZSBkYXRhIHN0dWZmXG4gICAgICAgICAgICAgICAgICAgIC8vIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoXCJwcmVcIilcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC50ZXh0KEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDQpKVxuICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHhBeGlzR3JvdXAgPSBjaGFydC5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ4LWF4aXNcIiA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJheGlzXCIgOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCwgXCIgKyBoZWlnaHQgKyBcIilcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYWxsKHhBeGlzKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyB3b3Jkd3JhcCBheGlzIGxhYmVsc1xuICAgICAgICAgICAgICAgICAgICB4QXhpc0dyb3VwLnNlbGVjdEFsbChcIi50aWNrIHRleHRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2FsbCh3cmFwLCB4LnJhbmdlQmFuZCgpKTtcblxuICAgICAgICAgICAgICAgICAgICBjaGFydC5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ5LWF4aXNcIiA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJheGlzXCIgOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoLTEyLCAwKVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhbGwoeUF4aXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0LnNlbGVjdEFsbChcInJlY3QuYmFyY2hhcnQtYmFyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShkYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xvckNsYXNzID0gXCJiYXItY29sb3ItXCIgKyAoKGkgJSAyKSArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1wiYmFyY2hhcnQtYmFyXCIsIGNvbG9yQ2xhc3NdLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB4LnJhbmdlQmFuZCgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGhlaWdodCAtIHkoZC5WYWx1ZSk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHgoZC5CYXIpOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwieVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiB5KGQuVmFsdWUpOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCB0aXAuc2hvdylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub24oXCJtb3VzZW91dFwiLCB0aXAuaGlkZSlcblxuICAgICAgICAgICAgICAgICAgICAvLyBjaGFydC5zZWxlY3RBbGwoXCJ0ZXh0LmJhcmNoYXJ0LXZhbHVlXCIpXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAuZGF0YShkYXRhKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmVudGVyKClcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgIC5jbGFzc2VkKFwiYmFyY2hhcnQtdmFsdWVcIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHJldHVybiBkMy5mb3JtYXQoXCIwLjFmXCIpKGQuVmFsdWUpICsgXCIlXCI7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAuYXR0cihcIndpZHRoXCIsIHgucmFuZ2VCYW5kKCkpXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHkoZC5WYWx1ZSk7IH0pXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIC5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiB4KGQuQmFyKSArICh4LnJhbmdlQmFuZCgpLzIpOyB9KVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIC5hdHRyKFwiZHlcIiwgLTQpXG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYmFyQ2hhcnRTZXJ2aWNlO1xufV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignRGF0YVZpekNvbnRyb2xsZXInLFxuICAgICAgICBbJyRzY29wZScsICckaHR0cCcsICckbG9nJywgJyRsb2NhdGlvbicsICckZmlsdGVyJywgJ3NpZGViYXJEaXNwbGF5JywgJ2NhdGVnb3JpZXMnLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRsb2csICRsb2NhdGlvbiwgJGZpbHRlciwgc2lkZWJhckRpc3BsYXksIGNhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudG9nZ2xlID0gc2lkZWJhckRpc3BsYXkudG9nZ2xlO1xuXG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBjYXRlZ29yaWVzLmdldENhdGVnb3JpZXMoXCJhbGxcIik7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBjYXRlZ29yaWVzLmxpc3Q7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlamVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBhbGVydChcInByb21pc2UgcmVqZWN0ZWQhXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b2dnbGUub3BlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHNpZGViYXJEaXNwbGF5LnNlY3Rpb24gPSAnUmF3IERhdGEnO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5kaXJlY3RpdmUoJ2RhdGF2aXonLCBbJyR3aW5kb3cnLCAnJGh0dHAnLCAndGltZXNlcmllc1NlcnZpY2UnLCAnZ3JvdXBlZEJhckNoYXJ0U2VydmljZScsICdiYXJDaGFydFNlcnZpY2UnLCAndGFibGVTZXJ2aWNlJywgZnVuY3Rpb24oJHdpbmRvdywgJGh0dHAsIHRpbWVzZXJpZXNTZXJ2aWNlLCBncm91cGVkQmFyQ2hhcnRTZXJ2aWNlLCBiYXJDaGFydFNlcnZpY2UsIHRhYmxlU2VydmljZSkge1xuICAgIC8vIFRoaXMgZnVuY3Rpb24gc2hvdWxkIHJlZmxlY3Qgd2hhdGV2ZXIgeW91ciBkMyBmdW5jdGlvbiBpcyBjYWxsZWQuXG4gICAgdmFyIGNoYXJ0cyA9IHtcbiAgICAgICAgXCJsaW5lXCIgOiB0aW1lc2VyaWVzU2VydmljZS5jaGFydCxcbiAgICAgICAgXCJiYXJcIiA6IGJhckNoYXJ0U2VydmljZS5jaGFydCxcbiAgICAgICAgXCJncm91cGVkQmFyXCIgOiBncm91cGVkQmFyQ2hhcnRTZXJ2aWNlLmNoYXJ0LFxuICAgICAgICBcInRhYmxlXCIgOiB0YWJsZVNlcnZpY2UuY2hhcnRcbiAgICB9O1xuICAgIHJldHVybiAge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgd2hpY2g6IFwiPXdoaWNoXCIsXG4gICAgICAgICAgICB0eXBlOiBcIj10eXBlXCJcbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgICAgICBzY29wZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIGlmIChzY29wZS5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tzY29wZS50eXBlXShlbGVtZW50WzBdLCByZXN1bHQuZGF0YSwge30pOyAvL3Njb3BlLmNvbmZpZ1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRodHRwLmdldChcIi9zdGF0aWMvZGlzdC9kYXRhL2Nzdi9cIiArIHNjb3BlLndoaWNoICsgXCIuY3N2XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5kYXRhID0gcmVzdWx0LmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnRzW3Njb3BlLnR5cGVdKGVsZW1lbnRbMF0sIHNjb3BlLmRhdGEsIHt9KTsgLy9zY29wZS5jb25maWdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignd2hpY2gnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzY29wZS5yZW5kZXIoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICBUaGlzIGNvZGUgaXMgaW50ZW5kZWQgdG8gZ2V0IHRoZSBjaGFydCB0byByZWRyYXcgd2hlbiB0aGUgd2luZG93IGlzIHJlc2l6ZWRcbiAgICAgICAgICAgICAgICBCdXQgYXMgaXQgc3RhbmRzLCBzb21laG93IHRoaXMgb3ZlcnJpZGVzIHRoZSBkYXRhIGFuZCB0aGUgY2hhcnQgYmVjb21lcyB1c2VsZXNzLlxuICAgICAgICAgICAgICAgIEkgZG9uJ3QgdGhpbmsgdGhpcyBmZWF0dXJlIGlzIHdvcnRoIHRoZSBkZWJ1ZyB0aW1lIG5vdywgYnV0IGl0J3Mgd29ydGgga2VlcGluZyBpbiBtaW5kIGZvciB0aGUgZnV0dXJlLlxuICAgICAgICAgICAgKiovXG4gICAgICAgICAgICAvLyAkd2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyAgICAgc2NvcGUucmVuZGVyKClcbiAgICAgICAgICAgIC8vIH07XG5cbiAgICAgICAgICAgIC8vIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAvLyAgICAgc2NvcGUucmVuZGVyKGRhdGEpO1xuICAgICAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgfVxuICAgIH1cbn1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnZ3JvdXBlZEJhckNoYXJ0U2VydmljZScsIFsnJHEnLCAnJGh0dHAnLCAnbG9kYXNoJywgZnVuY3Rpb24oJHEsICRodHRwLCBsb2Rhc2gpIHtcbiAgICB2YXIgZ3JvdXBlZEJhckNoYXJ0U2VydmljZSA9IHt9O1xuXG5cbiAgICAvL3ZhciB3aW5kb3dXaWR0aCA9IGQzLnNlbGVjdChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpWzBdWzBdO1xuICAgIC8vICAgICAgICAgICAgaWYgKHdpbmRvd1dpZHRoIDwgOTkyKSB7XG4gICAgLy8gICAgICAgICAgICAgICAgdmFyIGxpbmVIZWlnaHQgPSAwLjU1O1xuICAgIC8vICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAvLyAgICAgICAgICAgICAgICB2YXIgbGluZUhlaWdodCA9IDEuMTtcbiAgICAvLyAgICAgICAgICAgIH1cblxuXG4gICAgZ3JvdXBlZEJhckNoYXJ0U2VydmljZS5jaGFydCA9IGZ1bmN0aW9uKGNvbnRhaW5lciwgZGF0YSwgY29uZmlnKSB7XG4gICAgICAgIHZhciB0aW1lRm9ybWF0cyA9IHtcbiAgICAgICAgICAgIFwieWVhclwiIDogXCJZWVlZXCIsXG4gICAgICAgICAgICBcInF1YXJ0ZXJcIiA6IFwiW1FdUSBZWVlZXCIsXG4gICAgICAgICAgICBcIm1vbnRoXCIgOiBcIk1NTSBZWVlZXCJcbiAgICAgICAgfTtcblxuICAgICAgICBjb25maWcuZmFjZXQgPSBsb2Rhc2guZGlmZmVyZW5jZShbXCJzdHJ1Y3R1cmVcIiwgXCJ0aW1lXCJdLCBbY29uZmlnLmZhY2V0XSlbMF1cblxuICAgICAgICAvLyBjb252ZXJ0IGRhdGEgZnJvbSBzdHJpbmcgLT4gYXJyYXkgb2Ygb2JqXG4gICAgICAgIGRhdGEgPSBkMy5jc3YucGFyc2UoZGF0YSk7XG5cbiAgICAgICAgdmFyIGdyb3VwS2V5cyA9IGxvZGFzaC5jaGFpbihkYXRhKVxuICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5Hcm91cDsgfSlcbiAgICAgICAgICAgICAgICAudW5pcXVlKClcbiAgICAgICAgICAgICAgICAudmFsdWUoKSxcbiAgICAgICAgICAgIGJhcktleXMgPWxvZGFzaC5jaGFpbihkYXRhKVxuICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5CYXI7IH0pXG4gICAgICAgICAgICAgICAgLnVuaXF1ZSgpXG4gICAgICAgICAgICAgICAgLnZhbHVlKClcbiAgICAgICAgICAgIHlSYW5nZU1heCA9IGxvZGFzaC5jaGFpbihkYXRhKVxuICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24oZCkgeyByZXR1cm4gK2QuVmFsdWU7IH0pXG4gICAgICAgICAgICAgICAgLm1heCgpXG4gICAgICAgICAgICAgICAgLnZhbHVlKCk7XG5cbiAgICAgICAgLy8gbmVzdCBkYXRhIGJ5IGJhciBncm91cHNcbiAgICAgICAgZGF0YSA9IGQzLm5lc3QoKVxuICAgICAgICAgICAgLmtleShmdW5jdGlvbihkKSB7IHJldHVybiBkLkdyb3VwOyB9KVxuICAgICAgICAgICAgLmVudHJpZXMoZGF0YSk7XG5cbiAgICAgICAgLy8gY3JlYXRlIGNvbnRhaW5lciBmb3IgbWFwc1xuICAgICAgICBjaGFydENvbnRhaW5lciA9IGQzLnNlbGVjdChjb250YWluZXIpXG4gICAgICAgICAgICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgICAgICAgICAgLmNsYXNzZWQoXCJncm91cGVkYmFyLWNvbnRhaW5lclwiLCB0cnVlKVxuICAgICAgICAgICAgLmFwcGVuZChcImRpdlwiKVxuICAgICAgICAgICAgICAgIC5jbGFzc2VkKFwiZ3JvdXBlZGJhci1jb250YWluZXItaW50ZXJuYWxcIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAuZGF0dW0oZGF0YSk7XG5cbiAgICAgICAgLy8gY3JlYXRlIGNvbnRhaW5lciBmb3IgbGVnZW5kc1xuICAgICAgICBsZWdlbmRDb250YWluZXIgPSBkMy5zZWxlY3QoY29udGFpbmVyKVxuICAgICAgICAgICAgLmFwcGVuZChcImRpdlwiKVxuICAgICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAgICAgICAgIFwibGVnZW5kLWNvbnRhaW5lclwiIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcImdyb3VwZWRiYXItbGVnZW5kLWNvbnRhaW5lclwiIDogdHJ1ZSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAgICAgICAgICAgICBcImdyb3VwZWRiYXItbGVnZW5kLWNvbnRhaW5lci1pbnRlcm5hbFwiIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmRhdHVtKGJhcktleXMpO1xuXG4gICAgICAgIC8vIGNoYXJ0Q29udGFpbmVyLmFwcGVuZChcInByZVwiKVxuICAgICAgICAgICAgLy8gLnRleHQoSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgNCkpO1xuICAgICAgICAgICAgLy8gLnRleHQoSlNPTi5zdHJpbmdpZnkoeVJhbmdlTWF4LCBudWxsLCA0KSk7XG4gICAgICAgICAgICAvLyAudGV4dChKU09OLnN0cmluZ2lmeShiYXJLZXlzLCBudWxsLCA0KSk7XG4gICAgICAgICAgICAvLyAudGV4dChKU09OLnN0cmluZ2lmeShjb25maWcsIG51bGwsIDQpKTtcbiAgICAgICAgLy8gcmV0dXJuO1xuXG4gICAgICAgIG1ha2VHcm91cGVkQmFyQ2hhcnQoY2hhcnRDb250YWluZXIpO1xuXG4gICAgICAgIG1ha2VMZWdlbmQobGVnZW5kQ29udGFpbmVyKTtcblxuICAgICAgICAvLyAvKiogU1RBUlQgU0NST0xMIE5PVElDRSAqKi9cbiAgICAgICAgLy8gLy8gaWYgd2UgYXJlIHVuZGVyIGEgY2VydGFpbiBwaXhlbCBzaXplLCB0aGVyZSB3aWxsIGJlIGhvcml6b250YWwgc2Nyb2xsaW5nXG4gICAgICAgIC8vIHZhciBpbnRlcm5hbENvbnRhaW5lclNpemUgPSBkMy5zZWxlY3QoY29udGFpbmVyKS5zZWxlY3QoXCJkaXYuZ3JvdXBlZGJhci1jb250YWluZXItaW50ZXJuYWxcIikubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAvLyAgICAgY29udGFpbmVyU2l6ZSA9IGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdChcImRpdi5ncm91cGVkYmFyLWNvbnRhaW5lclwiKS5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgLy8gLy8gY29uc29sZS5sb2coaW50ZXJuYWxDb250YWluZXJTaXplLndpZHRoICsgXCIgLyBcIiArIGNvbnRhaW5lclNpemUud2lkdGgpXG4gICAgICAgIC8vIGlmIChpbnRlcm5hbENvbnRhaW5lclNpemUud2lkdGggPiBjb250YWluZXJTaXplLndpZHRoKSB7XG4gICAgICAgIC8vICAgICAvLyBjb25zb2xlLmxvZyhcInNjcm9sbCBOb3RpY2UhXCIpXG4gICAgICAgIC8vICAgICAvLyBjcmVhdGUgc2Nyb2xsIG5vdGljZVxuICAgICAgICAvLyAgICAgdmFyIHNjcm9sbE5vdGljZSA9IGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdChcImRpdi5ncm91cGVkYmFyLWNvbnRhaW5lclwiKS5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgLy8gICAgICAgICAuY2xhc3NlZChcInNjcm9sbC1ub3RpY2VcIiwgdHJ1ZSlcbiAgICAgICAgLy8gICAgICAgICAuYXBwZW5kKFwicFwiKTtcblxuICAgICAgICAvLyAgICAgc2Nyb2xsTm90aWNlLmFwcGVuZChcImlcIilcbiAgICAgICAgLy8gICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgIC8vICAgICAgICAgICAgIFwiZmFcIiA6IHRydWUsXG4gICAgICAgIC8vICAgICAgICAgICAgIFwiZmEtYW5nbGUtZG91YmxlLWRvd24gXCIgOiB0cnVlXG4gICAgICAgIC8vICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gICAgIHNjcm9sbE5vdGljZS5hcHBlbmQoXCJzcGFuXCIpXG4gICAgICAgIC8vICAgICAgICAgLnRleHQoXCJTY3JvbGwgZm9yIG1vcmVcIik7XG5cbiAgICAgICAgLy8gICAgIHNjcm9sbE5vdGljZS5hcHBlbmQoXCJpXCIpXG4gICAgICAgIC8vICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAvLyAgICAgICAgICAgICBcImZhXCIgOiB0cnVlLFxuICAgICAgICAvLyAgICAgICAgICAgICBcImZhLWFuZ2xlLWRvdWJsZS1kb3duIFwiIDogdHJ1ZVxuICAgICAgICAvLyAgICAgICAgIH0pO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy8gZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0QWxsKFwiZGl2Lmdyb3VwZWRiYXItY29udGFpbmVyXCIpLm9uKFwic2Nyb2xsXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyAgICAgLy8gaWYgc2Nyb2xsIGF0IGJvdHRvbSwgaGlkZSBzY3JvbGwgbm90aWNlXG4gICAgICAgIC8vICAgICAvLyB1c2luZyBhIGRpZmZlcmVudCBjbGFzcyBzbyBhcyBub3QgdG8gaW50ZXJmZXJlIHdpdGggdGhlIG1vdXNlb3ZlciBlZmZlY3RzXG4gICAgICAgIC8vICAgICBpZiAoKGQzLnNlbGVjdCh0aGlzKS5ub2RlKCkuc2Nyb2xsTGVmdCArIGQzLnNlbGVjdCh0aGlzKS5ub2RlKCkub2Zmc2V0V2lkdGgpID49IChkMy5zZWxlY3QodGhpcykubm9kZSgpLnNjcm9sbFdpZHRoICogMC45NzUpKSB7XG4gICAgICAgIC8vICAgICAgICAgZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0QWxsKFwiZGl2LnNjcm9sbC1ub3RpY2VcIilcbiAgICAgICAgLy8gICAgICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgXCJoaWRkZW5cIiA6IHRydWVcbiAgICAgICAgLy8gICAgICAgICAgICAgfSk7XG4gICAgICAgIC8vICAgICB9IGVsc2Uge1xuICAgICAgICAvLyAgICAgICAgIGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdEFsbChcImRpdi5zY3JvbGwtbm90aWNlXCIpXG4gICAgICAgIC8vICAgICAgICAgICAgIC5jbGFzc2VkKHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIFwiaGlkZGVuXCIgOiBmYWxzZVxuICAgICAgICAvLyAgICAgICAgICAgICB9KTtcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSlcbiAgICAgICAgLy8gLyoqIEVORCBTQ1JPTEwgTk9USUNFICoqL1xuXG4gICAgICAgIC8vIC8vIGFkZCBob3ZlciBlZmZlY3RzIC0gdXNlIGNsYXNzZXMgXCJoaWdobGlnaHRcIiBhbmQgXCJsb3dsaWdodFwiXG4gICAgICAgIC8vIGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdEFsbChcImcuZW50cnksIGcuZ3JvdXBlZGJhci1saW5lcyA+IHBhdGgsIGcuZ3JvdXBlZGJhci1wb2ludHMgPiBwYXRoXCIpXG4gICAgICAgIC8vIC5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbigpe1xuICAgICAgICAvLyAgICAgdmFyIGNsYXNzVG9IaWdobGlnaHQgPSBkMy5zZWxlY3QodGhpcykuYXR0cihcImRhdGEtY2xhc3NcIik7XG5cbiAgICAgICAgLy8gICAgIC8vIGxvd2xpZ2h0IGFsbCBlbGVtZW50c1xuICAgICAgICAvLyAgICAgZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0QWxsKFwiZy5lbnRyeSwgZy5ncm91cGVkYmFyLWxpbmVzID4gcGF0aCwgZy5ncm91cGVkYmFyLXBvaW50cyA+IHBhdGgsIGRpdi5zY3JvbGwtbm90aWNlXCIpXG4gICAgICAgIC8vICAgICAuY2xhc3NlZCh7XG4gICAgICAgIC8vICAgICAgICAgXCJsb3dsaWdodFwiIDogdHJ1ZSxcbiAgICAgICAgLy8gICAgICAgICBcImhpZ2hsaWdodFwiIDogZmFsc2VcbiAgICAgICAgLy8gICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgIC8vICAgICAvLyBoaWdobGlnaHQgYWxsIGVsZW1lbnRzIHdpdGggbWF0Y2hpbmcgZGF0YS1jbGFzc1xuICAgICAgICAvLyAgICAgZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0QWxsKFwiZy5lbnRyeS5cIitjbGFzc1RvSGlnaGxpZ2h0K1wiLCBnLmdyb3VwZWRiYXItbGluZXMgPiBwYXRoLlwiK2NsYXNzVG9IaWdobGlnaHQrXCIsIGcuZ3JvdXBlZGJhci1wb2ludHMgcGF0aC5cIitjbGFzc1RvSGlnaGxpZ2h0KVxuICAgICAgICAvLyAgICAgLmNsYXNzZWQoe1xuICAgICAgICAvLyAgICAgICAgIFwibG93bGlnaHRcIiA6IGZhbHNlLFxuICAgICAgICAvLyAgICAgICAgIFwiaGlnaGxpZ2h0XCIgOiB0cnVlXG4gICAgICAgIC8vICAgICB9KTtcbiAgICAgICAgLy8gfSlcbiAgICAgICAgLy8gLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgLy8gICAgIC8vIHJlbW92ZSBhbGwgaGlnaGxpZ2h0L2xvd2xpZ2h0IGNsYXNzZXNcbiAgICAgICAgLy8gICAgIGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdEFsbChcImcuZW50cnksIGcuZ3JvdXBlZGJhci1saW5lcyA+IHBhdGgsIGcuZ3JvdXBlZGJhci1wb2ludHMgPiBwYXRoLCBkaXYuc2Nyb2xsLW5vdGljZVwiKVxuICAgICAgICAvLyAgICAgLmNsYXNzZWQoe1xuICAgICAgICAvLyAgICAgICAgIFwibG93bGlnaHRcIiA6IGZhbHNlLFxuICAgICAgICAvLyAgICAgICAgIFwiaGlnaGxpZ2h0XCIgOiBmYWxzZVxuICAgICAgICAvLyAgICAgfSk7XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VMZWdlbmQoc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBzZWxlY3Rpb24uZWFjaChmdW5jdGlvbihsZWdlbmREYXRhKSB7XG4gICAgICAgICAgICAgICAgLy8gY29sb3Igc2NhbGVcbiAgICAgICAgICAgICAgICB2YXIgY29sb3JzID0gZDMuc2NhbGUub3JkaW5hbCgpXG4gICAgICAgICAgICAgICAgICAgIC5yYW5nZShbXCJiYXItY29sb3ItMVwiLCBcImJhci1jb2xvci0yXCIsIFwiYmFyLWNvbG9yLTNcIiwgXCJiYXItY29sb3ItNFwiXSlcbiAgICAgICAgICAgICAgICAgICAgLmRvbWFpbihiYXJLZXlzKVxuXG4gICAgICAgICAgICAgICAgdmFyIGxlZ2VuZEVudHJpZXMgPSBkMy5zZWxlY3QodGhpcykuc2VsZWN0QWxsKFwiZGl2Lmdyb3VwZWRiYXItbGVnZW5kLWVudHJ5XCIpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKGxlZ2VuZERhdGEpXG4gICAgICAgICAgICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKFwiZ3JvdXBlZGJhci1sZWdlbmQtZW50cnlcIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kYXR1bShmdW5jdGlvbihkKSB7IHJldHVybiBkOyB9KVxuXG4gICAgICAgICAgICAgICAgbGVnZW5kRW50cmllcy5lYWNoKGZ1bmN0aW9uKGVudHJ5RGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKFwic3BhblwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJncm91cGVkYmFyLWxlZ2VuZC1lbnRyeS1jb2xvclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcnMoZW50cnlEYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbihcIiBcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZChcInNwYW5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKFwiZ3JvdXBlZGJhci1sZWdlbmQtZW50cnktbGFiZWxcIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0KGVudHJ5RGF0YSk7XG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIC8vIGFsbCBzcGFucyBhcmUgYnkgZGVmYXVsdCB1bnN0eWxlZCwgd2l0aCBubyB3YXkgdG8gZG8gaXQgaW4gamV0cGFjayxcbiAgICAgICAgICAgICAgICAvLyBzbyBpbiBvcmRlciB0byBmaWdodCB0aGUgaGFuZ2luZyBpbmRlbnQgZWZmZWN0LCBtb3ZlIHRoZW0gb3ZlciA4IHB4XG4gICAgICAgICAgICAgICAgLy8gZDMuc2VsZWN0QWxsKFwidHNwYW5cIikuYXR0cihcImR4XCIsIDgpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VHcm91cGVkQmFyQ2hhcnQoc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBoZWxwZXIgZnVuY3Rpb24sIHdyYXBzIHRleHQgZm9yIGF4aXMgbGFiZWxzXG4gICAgICAgICAgICBmdW5jdGlvbiB3cmFwKHRleHQsIHdpZHRoKSB7XG4gICAgICAgICAgICAgIHRleHQuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IGQzLnNlbGVjdCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgd29yZHMgPSB0ZXh0LnRleHQoKS5zcGxpdCgvXFxzKy8pLnJldmVyc2UoKSxcbiAgICAgICAgICAgICAgICAgICAgd29yZCxcbiAgICAgICAgICAgICAgICAgICAgbGluZSA9IFtdLFxuICAgICAgICAgICAgICAgICAgICBsaW5lTnVtYmVyID0gMCxcbiAgICAgICAgICAgICAgICAgICAgbGluZUhlaWdodCA9IDEuMSwgLy8gZW1zXG4gICAgICAgICAgICAgICAgICAgIHkgPSB0ZXh0LmF0dHIoXCJ5XCIpLFxuICAgICAgICAgICAgICAgICAgICBkeSA9IHBhcnNlRmxvYXQodGV4dC5hdHRyKFwiZHlcIikpLFxuICAgICAgICAgICAgICAgICAgICB0c3BhbiA9IHRleHQudGV4dChudWxsKS5hcHBlbmQoXCJ0c3BhblwiKS5hdHRyKFwieFwiLCAwKS5hdHRyKFwieVwiLCB5KS5hdHRyKFwiZHlcIiwgZHkgKyBcImVtXCIpO1xuICAgICAgICAgICAgICAgIHdoaWxlICh3b3JkID0gd29yZHMucG9wKCkpIHtcbiAgICAgICAgICAgICAgICAgIGxpbmUucHVzaCh3b3JkKTtcbiAgICAgICAgICAgICAgICAgIHRzcGFuLnRleHQobGluZS5qb2luKFwiIFwiKSk7XG4gICAgICAgICAgICAgICAgICBpZiAodHNwYW4ubm9kZSgpLmdldENvbXB1dGVkVGV4dExlbmd0aCgpID4gd2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZS5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgdHNwYW4udGV4dChsaW5lLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgbGluZSA9IFt3b3JkXTtcbiAgICAgICAgICAgICAgICAgICAgdHNwYW4gPSB0ZXh0LmFwcGVuZChcInRzcGFuXCIpLmF0dHIoXCJ4XCIsIDApLmF0dHIoXCJ5XCIsIHkpLmF0dHIoXCJkeVwiLCArK2xpbmVOdW1iZXIgKiBsaW5lSGVpZ2h0ICsgZHkgKyBcImVtXCIpLnRleHQod29yZCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZWN0aW9uLmVhY2goZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vIHNpemluZyBhbmQgbWFyZ2luIHZhcnNcbiAgICAgICAgICAgICAgICB2YXIgQkJveCA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidG9wXCIgOiBCQm94LmhlaWdodCAqIDAuMDUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInJpZ2h0XCIgOiBCQm94LndpZHRoICogMC4wNSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYm90dG9tXCIgOiBCQm94LmhlaWdodCAqIDAuMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibGVmdFwiIDogZDMubWF4KFtCQm94LndpZHRoICogMC4wNSwgNzVdKVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IEJCb3gud2lkdGggLSAobWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IEJCb3guaGVpZ2h0IC0gKG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKSxcblxuICAgICAgICAgICAgICAgICAgICAvLyB0b29sdGlwIGZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgICAgIHRpcCA9IGQzLnRpcCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiZ3JvdXBlZGJhci10aXBcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9kYXNoLmNoYWluKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5MYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuZm9ybWF0KFwiZlwiKShkLlZhbHVlKSArIFwiJVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29tcGFjdCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oXCI8YnIgLz5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnRhaW5lcnNcbiAgICAgICAgICAgICAgICAgICAgc3ZnID0gZDMuc2VsZWN0KHRoaXMpLmFwcGVuZChcInN2Z1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgQkJveC5oZWlnaHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIEJCb3gud2lkdGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2FsbCh0aXApXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLCAwKVwiKSxcbiAgICAgICAgICAgICAgICAgICAgY2hhcnQgPSBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIiwgXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0ZXN0aW5nIHN0dWZmIC0gZHJhd3Mgb3V0bGluZXMgYXJvdW5kIHN2ZyBhbmQgY29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAgIC8vIHN2Z091dGxpbmUgPSBzdmcuYXBwZW5kKFwicmVjdFwiKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmF0dHIoXCJoZWlnaHRcIiwgc3ZnLmF0dHIoXCJoZWlnaHRcIikpXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAuYXR0cihcIndpZHRoXCIsIHN2Zy5hdHRyKFwid2lkdGhcIikpXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAuYXR0cihcImZpbGxcIiwgXCJyZ2JhKDAsMCwwLDApXCIpXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAuYXR0cihcInN0cm9rZVwiLCBcInJlZFwiKSxcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hhcnRPdXRsaW5lID0gc3ZnLmFwcGVuZChcInJlY3RcIilcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIiwgXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAuYXR0cihcImhlaWdodFwiLCBjaGFydC5hdHRyKFwiaGVpZ2h0XCIpKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmF0dHIoXCJ3aWR0aFwiLCBjaGFydC5hdHRyKFwid2lkdGhcIikpXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAuYXR0cihcImZpbGxcIiwgXCJyZ2JhKDAsMCwwLDApXCIpXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAuYXR0cihcInN0cm9rZVwiICxcImJsdWVcIiksXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY29sb3Igc2NhbGVcbiAgICAgICAgICAgICAgICAgICAgY29sb3JzID0gZDMuc2NhbGUub3JkaW5hbCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmFuZ2UoW1wiYmFyLWNvbG9yLTFcIiwgXCJiYXItY29sb3ItMlwiLCBcImJhci1jb2xvci0zXCIsIFwiYmFyLWNvbG9yLTRcIl0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuZG9tYWluKGJhcktleXMpLFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIHggYW5kIHkgc2NhbGVzXG4gICAgICAgICAgICAgICAgICAgIHgwID0gZDMuc2NhbGUub3JkaW5hbCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmFuZ2VSb3VuZEJhbmRzKFswLCB3aWR0aF0sIDAuMiwgMC4yKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRvbWFpbihncm91cEtleXMpLFxuICAgICAgICAgICAgICAgICAgICB4MSA9IGQzLnNjYWxlLm9yZGluYWwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJhbmdlUm91bmRCYW5kcyhbMCwgeDAucmFuZ2VCYW5kKCldLCAwLjEsIDApXG4gICAgICAgICAgICAgICAgICAgICAgICAuZG9tYWluKGJhcktleXMpLFxuICAgICAgICAgICAgICAgICAgICB5ID0gZDMuc2NhbGUubGluZWFyKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yYW5nZShbaGVpZ2h0LCAwXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kb21haW4oWzAsIHlSYW5nZU1heF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAubmljZSg1KSxcblxuICAgICAgICAgICAgICAgICAgICAvLyAvLyBheGlzIGZ1bmN0aW9uc1xuICAgICAgICAgICAgICAgICAgICB4MEF4aXMgPSBkMy5zdmcuYXhpcygpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGUoeDApXG4gICAgICAgICAgICAgICAgICAgICAgICAub3JpZW50KFwiYm90dG9tXCIpLFxuICAgICAgICAgICAgICAgICAgICB4MUF4aXMgPSBkMy5zdmcuYXhpcygpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGUoeDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAub3JpZW50KFwiYm90dG9tXCIpLFxuICAgICAgICAgICAgICAgICAgICB5QXhpcyA9IGQzLnN2Zy5heGlzKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zY2FsZSh5KVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9yaWVudChcImxlZnRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5pbm5lclRpY2tTaXplKC13aWR0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aWNrUGFkZGluZygxMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aWNrRm9ybWF0KGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDMuZm9ybWF0KFwiZlwiKSh0KSArIFwiJVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gLy8gdGVzdCBvdXRwdXQgZm9yIHRyb3VibGVzaG9vdGluZyB0aGUgZGF0YSBzdHVmZlxuICAgICAgICAgICAgICAgICAgICAvLyBkMy5zZWxlY3QodGhpcykuYXBwZW5kKFwicHJlXCIpXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAudGV4dChKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCA0KSlcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciB4MEF4aXNHcm91cCA9IGNoYXJ0LmFwcGVuZChcImdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIngtYXhpc1wiIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImF4aXNcIiA6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLCBcIiArIGhlaWdodCArIFwiKVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhbGwoeDBBeGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyB3b3Jkd3JhcCBheGlzIGxhYmVsc1xuICAgICAgICAgICAgICAgICAgICB4MEF4aXNHcm91cC5zZWxlY3RBbGwoXCIudGljayB0ZXh0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhbGwod3JhcCwgeDAucmFuZ2VCYW5kKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0LmFwcGVuZChcImdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInktYXhpc1wiIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImF4aXNcIiA6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgtMTIsIDApXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2FsbCh5QXhpcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBiYXIgZ3JvdXBzXG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhckdyb3VwcyA9IGNoYXJ0LnNlbGVjdEFsbChcImcuZ3JvdXBlZGJhci1ncm91cFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKFwiZ3JvdXBlZGJhci1ncm91cFwiLCB0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgeDAucmFuZ2VCYW5kKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgeDAoZC5rZXkpICsgXCIsIDApXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZGF0dW0oZnVuY3Rpb24oZCkgeyByZXR1cm4gZC52YWx1ZXM7IH0pXG5cbiAgICAgICAgICAgICAgICAgICAgYmFyR3JvdXBzLmVhY2goZnVuY3Rpb24oZ3JvdXBEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgc29tZSBncm91cC1zcGVjaWZpYyB2YXJzIHNldCB1cFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNHcm91cEJhcnMgPSBsb2Rhc2guY2hhaW4oZ3JvdXBEYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuQmFyOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAud2l0aG91dChcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudmFsdWUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzR3JvdXBMYWJlbHMgPSBsb2Rhc2guY2hhaW4oZ3JvdXBEYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuTGFiZWw7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC53aXRob3V0KFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC52YWx1ZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNHcm91cFgxID0geDEuY29weSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kb21haW4odGhpc0dyb3VwQmFycyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmICh0aGlzR3JvdXBMYWJlbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vIG1vdmUgeDAtYXhpcyBkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgeDBBeGlzR3JvdXAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLCBcIiArIChoZWlnaHQgKyAobWFyZ2luLmJvdHRvbS8yKSkgKyBcIilcIilcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vIC8vIC8vIFVzaW5nIHgxIGF4aXMgdG8gbGFiZWwgaW5kaXZpZHVhbCBiYXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgLy8gZDMuc2VsZWN0KHRoaXMpLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyAgICAgLmNsYXNzZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vICAgICAgICAgXCJ4LWF4aXNcIiA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgLy8gICAgICAgICBcImF4aXNcIiA6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCwgXCIgKyBoZWlnaHQgKyBcIilcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyAgICAgLmNhbGwoeDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuc2VsZWN0QWxsKFwicmVjdC5ncm91cGVkYmFyLWJhclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKGdyb3VwRGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcImdyb3VwZWRiYXItYmFyXCIsIGNvbG9ycyhkLkJhcildLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIHRoaXNHcm91cFgxLnJhbmdlQmFuZCgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBoZWlnaHQgLSB5KGQuVmFsdWUpOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gdGhpc0dyb3VwWDEoZC5CYXIpOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4geShkLlZhbHVlKTsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKFwibW91c2VvdmVyXCIsIHRpcC5zaG93KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub24oXCJtb3VzZW91dFwiLCB0aXAuaGlkZSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZDMuc2VsZWN0KHRoaXMpLnNlbGVjdEFsbChcInRleHQuZ3JvdXBlZGJhci12YWx1ZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5kYXRhKGdyb3VwRGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAuZW50ZXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAuY2xhc3NlZChcImdyb3VwZWRiYXItdmFsdWVcIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgcmV0dXJuIGQzLmZvcm1hdChcIjAuMWZcIikoZC5WYWx1ZSkgKyBcIiVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB0aGlzR3JvdXBYMS5yYW5nZUJhbmQoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHkoZC5WYWx1ZSk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHRoaXNHcm91cFgxKGQuQmFyKSArICh0aGlzR3JvdXBYMS5yYW5nZUJhbmQoKS8yKTsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgLmF0dHIoXCJkeVwiLCAtNClcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNpbmcgdGV4dCB0byBsYWJlbCBpbmRpdmlkdWFsIGJhcnNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGQzLnNlbGVjdCh0aGlzKS5zZWxlY3RBbGwoXCJ0ZXh0Lmdyb3VwZWRiYXItbGFiZWxcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAuZGF0YShncm91cERhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmVudGVyKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgLmNsYXNzZWQoXCJncm91cGVkYmFyLWxhYmVsXCIsIHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuTGFiZWw7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgeDEucmFuZ2VCYW5kKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFZBUklBVElPTlMgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVuZGVyIGJhcnMsIG1pZGRsZSBhbGlnbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC5hdHRyKFwieVwiLCBoZWlnaHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHgxKGQuQmFyKSArICh4MS5yYW5nZUJhbmQoKS8yKTsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLmF0dHIoXCJkeVwiLCAxNilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluc2lkZSBiYXJzLCByb3RhdGVkIHJpZ2h0IDkwIGRlZywgYXQgcmlnaHQgc2lkZSBvZiBiYXIgd2l0aCB4IGFuZCB5IHBhZGRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJyb3RhdGUoLTkwKVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgLWhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkeFwiLCA0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIFwic3RhcnRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHgxKGQuQmFyKSArIHgxLnJhbmdlQmFuZCgpOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcImR5XCIsIC00KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGdyb3VwZWRCYXJDaGFydFNlcnZpY2U7XG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmRpcmVjdGl2ZSgnc2ltcGxldGFibGUnLCBmdW5jdGlvbigpIHtcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIHNob3VsZCByZWZsZWN0IHdoYXRldmVyIHlvdXIgZDMgdGFibGUgZnVuY3Rpb24gaXMgY2FsbGVkLlxuICAgIHZhciBjaGFydCA9IHRhYmxlQ2hhcnQoKTtcbiAgICByZXR1cm4gIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGRhdGE6IFwiPWRhdGFcIiAvLyBXZSBjYW4gY2FsbCB0aGlzIHcvZSB3ZSB3YW50LlxuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAgIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KGVsZW1lbnRbMF0pLmRhdHVtKGRhdGEpLmNhbGwoY2hhcnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgLnNlcnZpY2UoJ3RhYmxlU2VydmljZScsIFsnJHEnLCAnJGh0dHAnLCAnbG9kYXNoJywgZnVuY3Rpb24gKCRxLCAkaHR0cCwgbG9kYXNoKSB7XG4gICAgICAgIHZhciB0YWJsZVNlcnZpY2UgPSB7fTtcblxuICAgICAgICB0YWJsZVNlcnZpY2UuY2hhcnQgPSBmdW5jdGlvbiAoY29udGFpbmVyLCBkYXRhLCBjb25maWcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5mYWNldCA9IGxvZGFzaC5kaWZmZXJlbmNlKFtcInN0cnVjdHVyZVwiLCBcInRpbWVcIl0sIFtjb25maWcuZmFjZXRdKVswXVxuXG4gICAgICAgICAgICAvLyBjb252ZXJ0IGRhdGEgZnJvbSBzdHJpbmcgLT4gYXJyYXkgb2Ygb2JqXG4gICAgICAgICAgICBkYXRhID0gZDMuY3N2LnBhcnNlKGRhdGEpO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgIC8vIHZhciBncm91cEtleXMgPSBsb2Rhc2guY2hhaW4oZGF0YSlcbiAgICAgICAgICAgIC8vICAgICAgICAgLm1hcChmdW5jdGlvbihkKSB7IHJldHVybiBkLkdyb3VwOyB9KVxuICAgICAgICAgICAgLy8gICAgICAgICAudW5pcXVlKClcbiAgICAgICAgICAgIC8vICAgICAgICAgLnZhbHVlKCksXG4gICAgICAgICAgICAvLyAgICAgYmFyS2V5cyA9bG9kYXNoLmNoYWluKGRhdGEpXG4gICAgICAgICAgICAvLyAgICAgICAgIC5tYXAoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5CYXI7IH0pXG4gICAgICAgICAgICAvLyAgICAgICAgIC51bmlxdWUoKVxuICAgICAgICAgICAgLy8gICAgICAgICAudmFsdWUoKVxuICAgICAgICAgICAgLy8gICAgIHlSYW5nZU1heCA9IGxvZGFzaC5jaGFpbihkYXRhKVxuICAgICAgICAgICAgLy8gICAgICAgICAubWFwKGZ1bmN0aW9uKGQpIHsgcmV0dXJuICtkLlZhbHVlOyB9KVxuICAgICAgICAgICAgLy8gICAgICAgICAubWF4KClcbiAgICAgICAgICAgIC8vICAgICAgICAgLnZhbHVlKCk7XG5cblxuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoayBpbiBkYXRhWzBdKSB7XG4gICAgICAgICAgICAgICAgY29sdW1ucy5wdXNoKGspO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBjcmVhdGUgY29udGFpbmVyIGZvciBtYXBzXG4gICAgICAgICAgICBjaGFydENvbnRhaW5lciA9IGQzLnNlbGVjdChjb250YWluZXIpXG4gICAgICAgICAgICAgICAgLy8uYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgICAgICAgICAgLy8uY2xhc3NlZChcInRhYmxlLWNvbnRhaW5lclwiLCB0cnVlKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgICAgICAgICAuY2xhc3NlZChcInRhYmxlLWNvbnRhaW5lci1pbnRlcm5hbFwiLCB0cnVlKVxuICAgICAgICAgICAgICAgIC5kYXR1bShkYXRhKTtcblxuICAgICAgICAgICAgLy8gY3JlYXRlIGNvbnRhaW5lciBmb3IgbGVnZW5kc1xuICAgICAgICAgICAgLy8gbGVnZW5kQ29udGFpbmVyID0gZDMuc2VsZWN0KGNvbnRhaW5lcilcbiAgICAgICAgICAgIC8vICAgICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgICAgICAvLyAgICAgLmNsYXNzZWQoe1xuICAgICAgICAgICAgLy8gICAgICAgICBcImxlZ2VuZC1jb250YWluZXJcIiA6IHRydWUsXG4gICAgICAgICAgICAvLyAgICAgICAgIFwidGFibGUtbGVnZW5kLWNvbnRhaW5lclwiIDogdHJ1ZSxcbiAgICAgICAgICAgIC8vICAgICB9KTtcblxuICAgICAgICAgICAgLy8gY2hhcnRDb250YWluZXIuYXBwZW5kKFwicHJlXCIpXG4gICAgICAgICAgICAvLyAudGV4dChKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCA0KSk7XG4gICAgICAgICAgICAvLyAudGV4dChKU09OLnN0cmluZ2lmeShjb2x1bW5zLCBudWxsLCA0KSk7XG4gICAgICAgICAgICAvLyByZXR1cm47XG5cbiAgICAgICAgICAgIG1ha2VUYWJsZShjaGFydENvbnRhaW5lcik7XG5cbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgLy92YXIgbGVnZW5kRGl2ID0gbGVnZW5kQ29udGFpbmVyLnNlbGVjdEFsbChcImRpdi5sZWdlbmRcIilcbiAgICAgICAgICAgIC8vICAgIC5kYXRhKFtiYXJLZXlzXSlcbiAgICAgICAgICAgIC8vICAgIC5lbnRlcigpXG4gICAgICAgICAgICAvLyAgICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgICAgICAvLyAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAgICAgLy8gICAgICAgICAgICBcImxlZ2VuZFwiOiB0cnVlLFxuICAgICAgICAgICAgLy8gICAgICAgICAgICBcInRhYmxlLWxlZ2VuZFwiOiB0cnVlXG4gICAgICAgICAgICAvLyAgICAgICAgfSlcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvL21ha2VMZWdlbmQobGVnZW5kRGl2KTtcblxuXG4gICAgICAgICAgICAvLyAvKiogU1RBUlQgU0NST0xMIE5PVElDRSAqKi9cbiAgICAgICAgICAgIC8vIC8vIGlmIHdlIGFyZSB1bmRlciBhIGNlcnRhaW4gcGl4ZWwgc2l6ZSwgdGhlcmUgd2lsbCBiZSBob3Jpem9udGFsIHNjcm9sbGluZ1xuICAgICAgICAgICAgLy8gdmFyIGludGVybmFsQ29udGFpbmVyU2l6ZSA9IGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdChcImRpdi50YWJsZS1jb250YWluZXItaW50ZXJuYWxcIikubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgICAgLy8gICAgIGNvbnRhaW5lclNpemUgPSBkMy5zZWxlY3QoY29udGFpbmVyKS5zZWxlY3QoXCJkaXYudGFibGUtY29udGFpbmVyXCIpLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAgICAgLy8gLy8gY29uc29sZS5sb2coaW50ZXJuYWxDb250YWluZXJTaXplLndpZHRoICsgXCIgLyBcIiArIGNvbnRhaW5lclNpemUud2lkdGgpXG4gICAgICAgICAgICAvLyBpZiAoaW50ZXJuYWxDb250YWluZXJTaXplLndpZHRoID4gY29udGFpbmVyU2l6ZS53aWR0aCkge1xuICAgICAgICAgICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKFwic2Nyb2xsIE5vdGljZSFcIilcbiAgICAgICAgICAgIC8vICAgICAvLyBjcmVhdGUgc2Nyb2xsIG5vdGljZVxuICAgICAgICAgICAgLy8gICAgIHZhciBzY3JvbGxOb3RpY2UgPSBkMy5zZWxlY3QoY29udGFpbmVyKS5zZWxlY3QoXCJkaXYudGFibGUtY29udGFpbmVyXCIpLmFwcGVuZChcImRpdlwiKVxuICAgICAgICAgICAgLy8gICAgICAgICAuY2xhc3NlZChcInNjcm9sbC1ub3RpY2VcIiwgdHJ1ZSlcbiAgICAgICAgICAgIC8vICAgICAgICAgLmFwcGVuZChcInBcIik7XG5cbiAgICAgICAgICAgIC8vICAgICBzY3JvbGxOb3RpY2UuYXBwZW5kKFwiaVwiKVxuICAgICAgICAgICAgLy8gICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBcImZhXCIgOiB0cnVlLFxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgXCJmYS1hbmdsZS1kb3VibGUtZG93biBcIiA6IHRydWVcbiAgICAgICAgICAgIC8vICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vICAgICBzY3JvbGxOb3RpY2UuYXBwZW5kKFwic3BhblwiKVxuICAgICAgICAgICAgLy8gICAgICAgICAudGV4dChcIlNjcm9sbCBmb3IgbW9yZVwiKTtcblxuICAgICAgICAgICAgLy8gICAgIHNjcm9sbE5vdGljZS5hcHBlbmQoXCJpXCIpXG4gICAgICAgICAgICAvLyAgICAgICAgIC5jbGFzc2VkKHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIFwiZmFcIiA6IHRydWUsXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBcImZhLWFuZ2xlLWRvdWJsZS1kb3duIFwiIDogdHJ1ZVxuICAgICAgICAgICAgLy8gICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgLy8gZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0QWxsKFwiZGl2LnRhYmxlLWNvbnRhaW5lclwiKS5vbihcInNjcm9sbFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vICAgICAvLyBpZiBzY3JvbGwgYXQgYm90dG9tLCBoaWRlIHNjcm9sbCBub3RpY2VcbiAgICAgICAgICAgIC8vICAgICAvLyB1c2luZyBhIGRpZmZlcmVudCBjbGFzcyBzbyBhcyBub3QgdG8gaW50ZXJmZXJlIHdpdGggdGhlIG1vdXNlb3ZlciBlZmZlY3RzXG4gICAgICAgICAgICAvLyAgICAgaWYgKChkMy5zZWxlY3QodGhpcykubm9kZSgpLnNjcm9sbExlZnQgKyBkMy5zZWxlY3QodGhpcykubm9kZSgpLm9mZnNldFdpZHRoKSA+PSAoZDMuc2VsZWN0KHRoaXMpLm5vZGUoKS5zY3JvbGxXaWR0aCAqIDAuOTc1KSkge1xuICAgICAgICAgICAgLy8gICAgICAgICBkMy5zZWxlY3QoY29udGFpbmVyKS5zZWxlY3RBbGwoXCJkaXYuc2Nyb2xsLW5vdGljZVwiKVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIFwiaGlkZGVuXCIgOiB0cnVlXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gICAgICAgICBkMy5zZWxlY3QoY29udGFpbmVyKS5zZWxlY3RBbGwoXCJkaXYuc2Nyb2xsLW5vdGljZVwiKVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIFwiaGlkZGVuXCIgOiBmYWxzZVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy8gfSlcbiAgICAgICAgICAgIC8vIC8qKiBFTkQgU0NST0xMIE5PVElDRSAqKi9cblxuICAgICAgICAgICAgLy8gLy8gYWRkIGhvdmVyIGVmZmVjdHMgLSB1c2UgY2xhc3NlcyBcImhpZ2hsaWdodFwiIGFuZCBcImxvd2xpZ2h0XCJcbiAgICAgICAgICAgIC8vIGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdEFsbChcImcuZW50cnksIGcudGFibGUtbGluZXMgPiBwYXRoLCBnLnRhYmxlLXBvaW50cyA+IHBhdGhcIilcbiAgICAgICAgICAgIC8vIC5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy8gICAgIHZhciBjbGFzc1RvSGlnaGxpZ2h0ID0gZDMuc2VsZWN0KHRoaXMpLmF0dHIoXCJkYXRhLWNsYXNzXCIpO1xuXG4gICAgICAgICAgICAvLyAgICAgLy8gbG93bGlnaHQgYWxsIGVsZW1lbnRzXG4gICAgICAgICAgICAvLyAgICAgZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0QWxsKFwiZy5lbnRyeSwgZy50YWJsZS1saW5lcyA+IHBhdGgsIGcudGFibGUtcG9pbnRzID4gcGF0aCwgZGl2LnNjcm9sbC1ub3RpY2VcIilcbiAgICAgICAgICAgIC8vICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAvLyAgICAgICAgIFwibG93bGlnaHRcIiA6IHRydWUsXG4gICAgICAgICAgICAvLyAgICAgICAgIFwiaGlnaGxpZ2h0XCIgOiBmYWxzZVxuICAgICAgICAgICAgLy8gICAgIH0pO1xuXG4gICAgICAgICAgICAvLyAgICAgLy8gaGlnaGxpZ2h0IGFsbCBlbGVtZW50cyB3aXRoIG1hdGNoaW5nIGRhdGEtY2xhc3NcbiAgICAgICAgICAgIC8vICAgICBkMy5zZWxlY3QoY29udGFpbmVyKS5zZWxlY3RBbGwoXCJnLmVudHJ5LlwiK2NsYXNzVG9IaWdobGlnaHQrXCIsIGcudGFibGUtbGluZXMgPiBwYXRoLlwiK2NsYXNzVG9IaWdobGlnaHQrXCIsIGcudGFibGUtcG9pbnRzIHBhdGguXCIrY2xhc3NUb0hpZ2hsaWdodClcbiAgICAgICAgICAgIC8vICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAvLyAgICAgICAgIFwibG93bGlnaHRcIiA6IGZhbHNlLFxuICAgICAgICAgICAgLy8gICAgICAgICBcImhpZ2hsaWdodFwiIDogdHJ1ZVxuICAgICAgICAgICAgLy8gICAgIH0pO1xuICAgICAgICAgICAgLy8gfSlcbiAgICAgICAgICAgIC8vIC5vbihcIm1vdXNlb3V0XCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAvLyAgICAgLy8gcmVtb3ZlIGFsbCBoaWdobGlnaHQvbG93bGlnaHQgY2xhc3Nlc1xuICAgICAgICAgICAgLy8gICAgIGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdEFsbChcImcuZW50cnksIGcudGFibGUtbGluZXMgPiBwYXRoLCBnLnRhYmxlLXBvaW50cyA+IHBhdGgsIGRpdi5zY3JvbGwtbm90aWNlXCIpXG4gICAgICAgICAgICAvLyAgICAgLmNsYXNzZWQoe1xuICAgICAgICAgICAgLy8gICAgICAgICBcImxvd2xpZ2h0XCIgOiBmYWxzZSxcbiAgICAgICAgICAgIC8vICAgICAgICAgXCJoaWdobGlnaHRcIiA6IGZhbHNlXG4gICAgICAgICAgICAvLyAgICAgfSk7XG4gICAgICAgICAgICAvLyB9KTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gbWFrZVRhYmxlKHNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5lYWNoKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnRhaW5lcnNcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gZDMuc2VsZWN0KHRoaXMpLmFwcGVuZChcInRhYmxlXCIpLmF0dHIoXCJjbGFzc1wiLCBcImN0ZGF0YS10YWJsZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoZWFkID0gdGFibGUuYXBwZW5kKFwidGhlYWRcIik7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0Ym9keSA9IHRhYmxlLmFwcGVuZChcInRib2R5XCIpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gLy8gdGVzdCBvdXRwdXQgZm9yIHRyb3VibGVzaG9vdGluZyB0aGUgZGF0YSBzdHVmZlxuICAgICAgICAgICAgICAgICAgICAvLyBkMy5zZWxlY3QodGhpcykuYXBwZW5kKFwicHJlXCIpXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAudGV4dChKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCA0KSlcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHBvcHVsYXRlIGhlYWRlclxuICAgICAgICAgICAgICAgICAgICB0aGVhZC5hcHBlbmQoXCJ0clwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbChcInRoXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShjb2x1bW5zKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJ0aFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQ9PT0nSW5kaWNhdG9yJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2hpZGUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnY29sLW5hbWUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gYnVpbGQgcm93c1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93cyA9IHRib2R5LnNlbGVjdEFsbChcInRyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShkYXRhKS5lbnRlcigpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKFwidHJcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gZmlsbCBpbiBjZWxsc1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbHMgPSByb3dzLnNlbGVjdEFsbCgndGQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2x1bW5zLm1hcChmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7Y29sdW1uOiBjb2x1bW4sIHZhbHVlOiByb3dbY29sdW1uXX07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3RkJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLmNvbHVtbj09PSdJbmRpY2F0b3InKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5hbWVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ2YWx1ZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuaHRtbChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFibGVTZXJ2aWNlO1xuICAgIH1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgndGltZXNlcmllc1NlcnZpY2UnLCBbJyRxJywgJyRodHRwJywgJ2xvZGFzaCcsIGZ1bmN0aW9uKCRxLCAkaHR0cCwgbG9kYXNoKSB7XG4gICAgdmFyIHRpbWVzZXJpZXNTZXJ2aWNlID0ge307XG5cbiAgICB0aW1lc2VyaWVzU2VydmljZS5jaGFydCA9IGZ1bmN0aW9uKGNvbnRhaW5lciwgZGF0YSwgY29uZmlnKSB7XG4gICAgICAgIHZhciB0aW1lRm9ybWF0cyA9IHtcbiAgICAgICAgICAgIFwieWVhclwiIDogXCJZWVlZXCIsXG4gICAgICAgICAgICBcInF1YXJ0ZXJcIiA6IFwiW1FdUSBZWVlZXCIsXG4gICAgICAgICAgICBcIm1vbnRoXCIgOiBcIk1NTSBZWVlZXCJcbiAgICAgICAgfTtcblxuICAgICAgICBjb25maWcuZmFjZXQgPSBsb2Rhc2guZGlmZmVyZW5jZShbXCJzdHJ1Y3R1cmVcIiwgXCJ0aW1lXCJdLCBbY29uZmlnLmZhY2V0XSlbMF1cblxuICAgICAgICAvLyBjb252ZXJ0IGRhdGEgZnJvbSBzdHJpbmcgLT4gYXJyYXkgb2Ygb2JqXG4gICAgICAgIGRhdGEgPSBkMy5jc3YucGFyc2UoZGF0YSk7XG5cbiAgICAgICAgLy8ga2V5cyBmb3IgY29sb3IgYW5kIHNoYXBlIHNjYWxlc1xuICAgICAgICB2YXIgbGluZUtleXMgPSBsb2Rhc2guY2hhaW4oZGF0YVswXSlcbiAgICAgICAgICAgIC5rZXlzKClcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24oaykgeyByZXR1cm4gayAhPT0gXCJZZWFyXCI7IH0pXG4gICAgICAgICAgICAudmFsdWUoKTtcblxuICAgICAgICAvLyBjcmVhdGUgY29udGFpbmVyIGZvciBtYXBzXG4gICAgICAgIGNoYXJ0Q29udGFpbmVyID0gZDMuc2VsZWN0KGNvbnRhaW5lcilcbiAgICAgICAgICAgIC5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgICAgICAgICAuY2xhc3NlZChcInRpbWVzZXJpZXMtY29udGFpbmVyXCIsIHRydWUpXG4gICAgICAgICAgICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgICAgICAgICAgLmNsYXNzZWQoXCJ0aW1lc2VyaWVzLWNvbnRhaW5lci1pbnRlcm5hbFwiLCB0cnVlKVxuICAgICAgICAgICAgICAgIC5kYXR1bShkYXRhKTtcblxuICAgICAgICAvLyBjcmVhdGUgY29udGFpbmVyIGZvciBsZWdlbmRzXG4gICAgICAgIGxlZ2VuZENvbnRhaW5lciA9IGQzLnNlbGVjdChjb250YWluZXIpXG4gICAgICAgICAgICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAgICAgXCJsZWdlbmQtY29udGFpbmVyXCIgOiB0cnVlLFxuICAgICAgICAgICAgICAgIFwidGltZXNlcmllcy1sZWdlbmQtY29udGFpbmVyXCIgOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gY2hhcnRDb250YWluZXIuYXBwZW5kKFwicHJlXCIpXG4gICAgICAgICAgICAvLyAudGV4dChKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCA0KSk7XG4gICAgICAgICAgICAvLyAudGV4dChKU09OLnN0cmluZ2lmeShjb25maWcsIG51bGwsIDQpKTtcbiAgICAgICAgLy8gcmV0dXJuO1xuXG4gICAgICAgIG1ha2VUaW1lU2VyaWVzKGNoYXJ0Q29udGFpbmVyKTtcblxuICAgICAgICAvLyBjcmVhdGUgY29udGFpbmVyIGZvciBsZWdlbmRzXG4gICAgICAgIGxlZ2VuZENvbnRhaW5lciA9IGQzLnNlbGVjdChjb250YWluZXIpXG4gICAgICAgICAgICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAgICAgXCJsZWdlbmQtY29udGFpbmVyXCIgOiB0cnVlLFxuICAgICAgICAgICAgICAgIFwidGltZXNlcmllcy1sZWdlbmQtY29udGFpbmVyXCIgOiB0cnVlLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAgICAgICAgIFwidGltZXNlcmllcy1sZWdlbmQtY29udGFpbmVyLWludGVybmFsXCIgOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZGF0dW0obGluZUtleXMpO1xuXG4gICAgICAgIG1ha2VMZWdlbmQobGVnZW5kQ29udGFpbmVyKTtcblxuICAgICAgICAvLyAvKiogU1RBUlQgU0NST0xMIE5PVElDRSAqKi9cbiAgICAgICAgLy8gLy8gaWYgd2UgYXJlIHVuZGVyIGEgY2VydGFpbiBwaXhlbCBzaXplLCB0aGVyZSB3aWxsIGJlIGhvcml6b250YWwgc2Nyb2xsaW5nXG4gICAgICAgIC8vIHZhciBpbnRlcm5hbENvbnRhaW5lclNpemUgPSBkMy5zZWxlY3QoY29udGFpbmVyKS5zZWxlY3QoXCJkaXYudGltZXNlcmllcy1jb250YWluZXItaW50ZXJuYWxcIikubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAvLyAgICAgY29udGFpbmVyU2l6ZSA9IGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdChcImRpdi50aW1lc2VyaWVzLWNvbnRhaW5lclwiKS5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgLy8gLy8gY29uc29sZS5sb2coaW50ZXJuYWxDb250YWluZXJTaXplLndpZHRoICsgXCIgLyBcIiArIGNvbnRhaW5lclNpemUud2lkdGgpXG4gICAgICAgIC8vIGlmIChpbnRlcm5hbENvbnRhaW5lclNpemUud2lkdGggPiBjb250YWluZXJTaXplLndpZHRoKSB7XG4gICAgICAgIC8vICAgICAvLyBjb25zb2xlLmxvZyhcInNjcm9sbCBOb3RpY2UhXCIpXG4gICAgICAgIC8vICAgICAvLyBjcmVhdGUgc2Nyb2xsIG5vdGljZVxuICAgICAgICAvLyAgICAgdmFyIHNjcm9sbE5vdGljZSA9IGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdChcImRpdi50aW1lc2VyaWVzLWNvbnRhaW5lclwiKS5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgLy8gICAgICAgICAuY2xhc3NlZChcInNjcm9sbC1ub3RpY2VcIiwgdHJ1ZSlcbiAgICAgICAgLy8gICAgICAgICAuYXBwZW5kKFwicFwiKTtcblxuICAgICAgICAvLyAgICAgc2Nyb2xsTm90aWNlLmFwcGVuZChcImlcIilcbiAgICAgICAgLy8gICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgIC8vICAgICAgICAgICAgIFwiZmFcIiA6IHRydWUsXG4gICAgICAgIC8vICAgICAgICAgICAgIFwiZmEtYW5nbGUtZG91YmxlLWRvd24gXCIgOiB0cnVlXG4gICAgICAgIC8vICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gICAgIHNjcm9sbE5vdGljZS5hcHBlbmQoXCJzcGFuXCIpXG4gICAgICAgIC8vICAgICAgICAgLnRleHQoXCJTY3JvbGwgZm9yIG1vcmVcIik7XG5cbiAgICAgICAgLy8gICAgIHNjcm9sbE5vdGljZS5hcHBlbmQoXCJpXCIpXG4gICAgICAgIC8vICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAvLyAgICAgICAgICAgICBcImZhXCIgOiB0cnVlLFxuICAgICAgICAvLyAgICAgICAgICAgICBcImZhLWFuZ2xlLWRvdWJsZS1kb3duIFwiIDogdHJ1ZVxuICAgICAgICAvLyAgICAgICAgIH0pO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy8gZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0QWxsKFwiZGl2LnRpbWVzZXJpZXMtY29udGFpbmVyXCIpLm9uKFwic2Nyb2xsXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyAgICAgLy8gaWYgc2Nyb2xsIGF0IGJvdHRvbSwgaGlkZSBzY3JvbGwgbm90aWNlXG4gICAgICAgIC8vICAgICAvLyB1c2luZyBhIGRpZmZlcmVudCBjbGFzcyBzbyBhcyBub3QgdG8gaW50ZXJmZXJlIHdpdGggdGhlIG1vdXNlb3ZlciBlZmZlY3RzXG4gICAgICAgIC8vICAgICBpZiAoKGQzLnNlbGVjdCh0aGlzKS5ub2RlKCkuc2Nyb2xsTGVmdCArIGQzLnNlbGVjdCh0aGlzKS5ub2RlKCkub2Zmc2V0V2lkdGgpID49IChkMy5zZWxlY3QodGhpcykubm9kZSgpLnNjcm9sbFdpZHRoICogMC45NzUpKSB7XG4gICAgICAgIC8vICAgICAgICAgZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0QWxsKFwiZGl2LnNjcm9sbC1ub3RpY2VcIilcbiAgICAgICAgLy8gICAgICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgXCJoaWRkZW5cIiA6IHRydWVcbiAgICAgICAgLy8gICAgICAgICAgICAgfSk7XG4gICAgICAgIC8vICAgICB9IGVsc2Uge1xuICAgICAgICAvLyAgICAgICAgIGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdEFsbChcImRpdi5zY3JvbGwtbm90aWNlXCIpXG4gICAgICAgIC8vICAgICAgICAgICAgIC5jbGFzc2VkKHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIFwiaGlkZGVuXCIgOiBmYWxzZVxuICAgICAgICAvLyAgICAgICAgICAgICB9KTtcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSlcbiAgICAgICAgLy8gLyoqIEVORCBTQ1JPTEwgTk9USUNFICoqL1xuXG4gICAgICAgIC8vIC8vIGFkZCBob3ZlciBlZmZlY3RzIC0gdXNlIGNsYXNzZXMgXCJoaWdobGlnaHRcIiBhbmQgXCJsb3dsaWdodFwiXG4gICAgICAgIC8vIGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdEFsbChcImcuZW50cnksIGcudGltZXNlcmllcy1saW5lcyA+IHBhdGgsIGcudGltZXNlcmllcy1wb2ludHMgPiBwYXRoXCIpXG4gICAgICAgIC8vIC5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbigpe1xuICAgICAgICAvLyAgICAgdmFyIGNsYXNzVG9IaWdobGlnaHQgPSBkMy5zZWxlY3QodGhpcykuYXR0cihcImRhdGEtY2xhc3NcIik7XG5cbiAgICAgICAgLy8gICAgIC8vIGxvd2xpZ2h0IGFsbCBlbGVtZW50c1xuICAgICAgICAvLyAgICAgZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0QWxsKFwiZy5lbnRyeSwgZy50aW1lc2VyaWVzLWxpbmVzID4gcGF0aCwgZy50aW1lc2VyaWVzLXBvaW50cyA+IHBhdGgsIGRpdi5zY3JvbGwtbm90aWNlXCIpXG4gICAgICAgIC8vICAgICAuY2xhc3NlZCh7XG4gICAgICAgIC8vICAgICAgICAgXCJsb3dsaWdodFwiIDogdHJ1ZSxcbiAgICAgICAgLy8gICAgICAgICBcImhpZ2hsaWdodFwiIDogZmFsc2VcbiAgICAgICAgLy8gICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgIC8vICAgICAvLyBoaWdobGlnaHQgYWxsIGVsZW1lbnRzIHdpdGggbWF0Y2hpbmcgZGF0YS1jbGFzc1xuICAgICAgICAvLyAgICAgZDMuc2VsZWN0KGNvbnRhaW5lcikuc2VsZWN0QWxsKFwiZy5lbnRyeS5cIitjbGFzc1RvSGlnaGxpZ2h0K1wiLCBnLnRpbWVzZXJpZXMtbGluZXMgPiBwYXRoLlwiK2NsYXNzVG9IaWdobGlnaHQrXCIsIGcudGltZXNlcmllcy1wb2ludHMgcGF0aC5cIitjbGFzc1RvSGlnaGxpZ2h0KVxuICAgICAgICAvLyAgICAgLmNsYXNzZWQoe1xuICAgICAgICAvLyAgICAgICAgIFwibG93bGlnaHRcIiA6IGZhbHNlLFxuICAgICAgICAvLyAgICAgICAgIFwiaGlnaGxpZ2h0XCIgOiB0cnVlXG4gICAgICAgIC8vICAgICB9KTtcbiAgICAgICAgLy8gfSlcbiAgICAgICAgLy8gLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgLy8gICAgIC8vIHJlbW92ZSBhbGwgaGlnaGxpZ2h0L2xvd2xpZ2h0IGNsYXNzZXNcbiAgICAgICAgLy8gICAgIGQzLnNlbGVjdChjb250YWluZXIpLnNlbGVjdEFsbChcImcuZW50cnksIGcudGltZXNlcmllcy1saW5lcyA+IHBhdGgsIGcudGltZXNlcmllcy1wb2ludHMgPiBwYXRoLCBkaXYuc2Nyb2xsLW5vdGljZVwiKVxuICAgICAgICAvLyAgICAgLmNsYXNzZWQoe1xuICAgICAgICAvLyAgICAgICAgIFwibG93bGlnaHRcIiA6IGZhbHNlLFxuICAgICAgICAvLyAgICAgICAgIFwiaGlnaGxpZ2h0XCIgOiBmYWxzZVxuICAgICAgICAvLyAgICAgfSk7XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VMZWdlbmQoc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBzZWxlY3Rpb24uZWFjaChmdW5jdGlvbihsZWdlbmREYXRhKSB7XG4gICAgICAgICAgICAgICAgLy8gY29sb3Igc2NhbGVcbiAgICAgICAgICAgICAgICBjb2xvcnMgPSBkMy5zY2FsZS5vcmRpbmFsKClcbiAgICAgICAgICAgICAgICAgICAgLnJhbmdlKFtcIiMxRUFDRjFcIiwgXCIjQjk0QTQ4XCJdKVxuICAgICAgICAgICAgICAgICAgICAuZG9tYWluKGxpbmVLZXlzKTtcblxuICAgICAgICAgICAgICAgIHZhciBsZWdlbmRFbnRyaWVzID0gZDMuc2VsZWN0KHRoaXMpLnNlbGVjdEFsbChcImRpdi50aW1lc2VyaWVzLWxlZ2VuZC1lbnRyeVwiKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YShsZWdlbmREYXRhKVxuICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZChcInRpbWVzZXJpZXMtbGVnZW5kLWVudHJ5XCIsIHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGF0dW0oZnVuY3Rpb24oZCkgeyByZXR1cm4gZDsgfSlcblxuICAgICAgICAgICAgICAgIGxlZ2VuZEVudHJpZXMuZWFjaChmdW5jdGlvbihlbnRyeURhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZChcInNwYW5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKFwidGltZXNlcmllcy1sZWdlbmQtZW50cnktY29sb3JcIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZShcImJhY2tncm91bmQtY29sb3JcIiwgY29sb3JzKGVudHJ5RGF0YSkpO1xuXG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoXCJzcGFuXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZChcInRpbWVzZXJpZXMtbGVnZW5kLWVudHJ5LWxhYmVsXCIsIHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGV4dChlbnRyeURhdGEpO1xuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAvLyBhbGwgc3BhbnMgYXJlIGJ5IGRlZmF1bHQgdW5zdHlsZWQsIHdpdGggbm8gd2F5IHRvIGRvIGl0IGluIGpldHBhY2ssXG4gICAgICAgICAgICAgICAgLy8gc28gaW4gb3JkZXIgdG8gZmlnaHQgdGhlIGhhbmdpbmcgaW5kZW50IGVmZmVjdCwgbW92ZSB0aGVtIG92ZXIgOCBweFxuICAgICAgICAgICAgICAgIC8vIGQzLnNlbGVjdEFsbChcInRzcGFuXCIpLmF0dHIoXCJkeFwiLCA4KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBtYWtlVGltZVNlcmllcyhzZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIHNlbGVjdGlvbi5lYWNoKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAvLyBzaXppbmcgYW5kIG1hcmdpbiB2YXJzXG4gICAgICAgICAgICAgICAgdmFyIEJCb3ggPSB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcInRvcFwiIDogQkJveC5oZWlnaHQgKiAwLjA1LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJyaWdodFwiIDogQkJveC53aWR0aCAqIDAuMDUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImJvdHRvbVwiIDogQkJveC5oZWlnaHQgKiAwLjEsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImxlZnRcIiA6IGQzLm1heChbQkJveC53aWR0aCAqIDAuMDUsIDU1XSlcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBCQm94LndpZHRoIC0gKG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSBCQm94LmhlaWdodCAtIChtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSksXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY29udGFpbmVyc1xuICAgICAgICAgICAgICAgICAgICBzdmcgPSBkMy5zZWxlY3QodGhpcykuYXBwZW5kKFwic3ZnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBCQm94LmhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgQkJveC53aWR0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsIDApXCIpLFxuICAgICAgICAgICAgICAgICAgICBjaGFydCA9IHN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBoZWlnaHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLCBcIiArIG1hcmdpbi50b3AgKyBcIilcIiksXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRlc3Rpbmcgc3R1ZmYgLSBkcmF3cyBvdXRsaW5lcyBhcm91bmQgc3ZnIGFuZCBjb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gc3ZnT3V0bGluZSA9IHN2Zy5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAuYXR0cihcImhlaWdodFwiLCBzdmcuYXR0cihcImhlaWdodFwiKSlcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5hdHRyKFwid2lkdGhcIiwgc3ZnLmF0dHIoXCJ3aWR0aFwiKSlcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5hdHRyKFwiZmlsbFwiLCBcInJnYmEoMCwwLDAsMClcIilcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwicmVkXCIpLFxuICAgICAgICAgICAgICAgICAgICAvLyBjaGFydE91dGxpbmUgPSBzdmcuYXBwZW5kKFwicmVjdFwiKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLCBcIiArIG1hcmdpbi50b3AgKyBcIilcIilcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGNoYXJ0LmF0dHIoXCJoZWlnaHRcIikpXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAuYXR0cihcIndpZHRoXCIsIGNoYXJ0LmF0dHIoXCJ3aWR0aFwiKSlcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5hdHRyKFwiZmlsbFwiLCBcInJnYmEoMCwwLDAsMClcIilcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5hdHRyKFwic3Ryb2tlXCIgLFwiYmx1ZVwiKSxcblxuICAgICAgICAgICAgICAgICAgICAvLyBjb2xvciBzY2FsZVxuICAgICAgICAgICAgICAgICAgICBjb2xvcnMgPSBkMy5zY2FsZS5vcmRpbmFsKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yYW5nZShbXCIjMUVBQ0YxXCIsIFwiI0I5NEE0OFwiXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kb21haW4obGluZUtleXMpLFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIHBvaW50IHNoYXBlIFwic2NhbGVcIlxuICAgICAgICAgICAgICAgICAgICBzeW1ib2xTY2FsZSA9IGQzLnNjYWxlLm9yZGluYWwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJhbmdlKGQzLnN2Zy5zeW1ib2xUeXBlcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kb21haW4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZUtleXNcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG5cbiAgICAgICAgICAgICAgICAgICAgLy8geCBhbmQgeSBzY2FsZXNcbiAgICAgICAgICAgICAgICAgICAgdGltZUZvcm1hdCA9IGQzLnRpbWUuZm9ybWF0KFwiJVlcIiksXG4gICAgICAgICAgICAgICAgICAgIHRpbWVSYW5nZSA9IGxvZGFzaC5jaGFpbihkYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuWWVhcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudmFsdWUoKSxcbiAgICAgICAgICAgICAgICAgICAgeCA9IGQzLnRpbWUuc2NhbGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJhbmdlKFsxMiwgd2lkdGhdKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRvbWFpbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5leHRlbnQodGltZVJhbmdlKS5tYXAoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGltZUZvcm1hdC5wYXJzZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgeSA9IGQzLnNjYWxlLmxpbmVhcigpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmFuZ2UoW2hlaWdodCwgMF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuZG9tYWluKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQzLmV4dGVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9kYXNoLmNoYWluKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGluZUtleXMubWFwKGZ1bmN0aW9uKGspe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gK2Rba107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZsYXR0ZW4oKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnVuaXF1ZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkvLy5tYXAoZnVuY3Rpb24odiwgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuIChNYXRoLmNlaWwodi8xMCkgKiAxMCkgLSAxMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHJldHVybiAoTWF0aC5mbG9vcih2LzEwKSAqIDEwKSArIDEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5uaWNlKDUsIDEwKSxcblxuICAgICAgICAgICAgICAgICAgICAvLyAvLyBheGlzIGZ1bmN0aW9uc1xuICAgICAgICAgICAgICAgICAgICB4QXhpcyA9IGQzLnN2Zy5heGlzKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zY2FsZSh4KVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9yaWVudChcImJvdHRvbVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpY2tzKGQzLnRpbWUueWVhciwgMSksXG4gICAgICAgICAgICAgICAgICAgIHlBeGlzID0gZDMuc3ZnLmF4aXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNjYWxlKHkpXG4gICAgICAgICAgICAgICAgICAgICAgICAub3JpZW50KFwibGVmdFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmlubmVyVGlja1NpemUoLXdpZHRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpY2tQYWRkaW5nKDEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkMy5mb3JtYXQoXCJmXCIpKHQpICsgXCIlXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyAvLyBsaW5lIGNoYXJ0aW5nIGZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgICAgIGxpbmUgPSBkMy5zdmcubGluZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAueChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHgoZC5ZZWFyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnkoZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KGQuVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gLy8gc2x1ZyBmdW5jdGlvbiBmb3IgY2xhc3NpbmcgYW5kIGhpZ2hsaWdodGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBzbHVnZ2lmeSA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiB0ZXh0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csIFwiX1wiKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gfTtcblxuICAgICAgICAgICAgICAgICAgICAvLyByZXNoYXBlIGRhdGEgZm9yIGxpbmVzXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBsaW5lS2V5cy5tYXAoZnVuY3Rpb24oaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIktleVwiIDogayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZXMgOiBsb2Rhc2gubWFwKGRhdGEsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XCJZZWFyXCIgOiB0aW1lRm9ybWF0LnBhcnNlKGQuWWVhciksIFwiVmFsdWVcIiA6ICtkW2tdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIC8vIHRlc3Qgb3V0cHV0IGZvciB0cm91Ymxlc2hvb3RpbmcgdGhlIGRhdGEgc3R1ZmZcbiAgICAgICAgICAgICAgICAgICAgLy8gZDMuc2VsZWN0KHRoaXMpLmFwcGVuZChcInByZVwiKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLnRleHQoSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgNCkpXG4gICAgICAgICAgICAgICAgICAgIC8vIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICBjaGFydC5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ4LWF4aXNcIiA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJheGlzXCIgOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCwgXCIgKyBoZWlnaHQgKyBcIilcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYWxsKHhBeGlzKTtcblxuICAgICAgICAgICAgICAgICAgICBjaGFydC5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ5LWF4aXNcIiA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJheGlzXCIgOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoLTEyLCAwKVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhbGwoeUF4aXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0LnNlbGVjdEFsbChcImcudGltZXNlcmllcy1saW5lc1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKFwidGltZXNlcmllcy1saW5lc1wiLCB0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJwYXRoXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKFwidGltZXNlcmllcy1wYXRoXCIsIHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGluZShkLlZhbHVlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2xvcnMoZC5LZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnREYXRhID0gZGF0YS5tYXAoZnVuY3Rpb24oZCwgZGksIGRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5WYWx1ZXMubWFwKGZ1bmN0aW9uKHYsIHZpLCB2YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuS2V5ID0gZC5LZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHY7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgcG9pbnREYXRhID0gbG9kYXNoLmZsYXR0ZW4ocG9pbnREYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICBjaGFydC5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZChcInRpbWVzZXJpZXMtcG9pbnRzXCIsIHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKFwiZ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEocG9pbnREYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKFwicGF0aFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIGZ1bmN0aW9uKGQsIGkpIHtyZXR1cm4gY29sb3JzKGQuS2V5KTsgfSApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJkXCIsIGQzLnN2Zy5zeW1ib2woKS50eXBlKFwiY2lyY2xlXCIpLnNpemUoNjUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgeChkLlllYXIpICsgXCIsIFwiICsgeShkLlZhbHVlKSArXCIpXCI7fSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGltZXNlcmllc1NlcnZpY2U7XG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0Fib3V0UGFnZUNvbnRyb2xsZXInLFxuICAgIFsnJHNjb3BlJywgJyRodHRwJywgJyRsb2cnLCAnJGxvY2F0aW9uJywvKiAnJGFuY2hvclNjcm9sbCcsICckcm9vdFNjb3BlJywqLyAnJHJvdXRlUGFyYW1zJywgJ3NpZGViYXJEaXNwbGF5JywgJ2NvbnRyaWJ1dG9ycycsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGxvZywgJGxvY2F0aW9uLC8qICRhbmNob3JTY3JvbGwsICRyb290U2NvcGUsKi8gJHJvdXRlUGFyYW1zLCBzaWRlYmFyRGlzcGxheSwgY29udHJpYnV0b3JzKXtcbiAgICAgICAgJHNjb3BlLnRvZ2dsZSA9IHNpZGViYXJEaXNwbGF5LnRvZ2dsZTtcblxuICAgICAgICB2YXIgY29udHJpYnV0b3JQcm9taXNlID0gY29udHJpYnV0b3JzLmdldENvbnRyaWJ1dG9ycyhcImFsbFwiKTtcbiAgICAgICAgY29udHJpYnV0b3JQcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAkc2NvcGUuY29udHJpYnV0b3JzID0gY29udHJpYnV0b3JzLmxpc3Q7XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAgICAgICAgYWxlcnQoXCJwcm9taXNlIHJlamVjdGVkIVwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICRzY29wZS50b2dnbGUub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgc2lkZWJhckRpc3BsYXkuc2VjdGlvbiA9ICdJbnRyb2R1Y3Rpb24nO1xuICAgICAgICAgICAgJHNjb3BlLm5leHRTZWN0aW9uID0gJ0NpdmljIEVuZ2FnZW1lbnQnO1xuICAgICAgICAgICAgJHNjb3BlLm5leHRTZWN0aW9uVGVhc2VyID0gJ1Rlc3RpbmcnO1xuICAgICAgICAgICAgJHNjb3BlLm5leHRTZWN0aW9uVVJMID0gJyMvY2l2aWMtZW5nYWdlbWVudCc7XG4gICAgICAgIH0pO1xuXG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0NhbGxUb0FjdGlvblBhZ2VDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckaHR0cCcsICckbG9nJywgJyRsb2NhdGlvbicsICdzaWRlYmFyRGlzcGxheScsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGxvZywgJGxvY2F0aW9uLCBzaWRlYmFyRGlzcGxheSl7XG4gICAgICAgICRzY29wZS50b2dnbGUgPSBzaWRlYmFyRGlzcGxheS50b2dnbGU7XG5cbiAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICRzY29wZS50b2dnbGUub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgc2lkZWJhckRpc3BsYXkuc2VjdGlvbiA9ICdDYWxsIFRvIEFjdGlvbic7XG4gICAgICAgIH0pO1xuXG59XSlcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignQ2xvc2VyTG9va1BhZ2VDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckaHR0cCcsICckbG9nJywgJyRsb2NhdGlvbicsICdzaWRlYmFyRGlzcGxheScsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGxvZywgJGxvY2F0aW9uLCBzaWRlYmFyRGlzcGxheSl7XG4gICAgICAgICRzY29wZS50b2dnbGUgPSBzaWRlYmFyRGlzcGxheS50b2dnbGU7XG5cbiAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICRzY29wZS50b2dnbGUub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgc2lkZWJhckRpc3BsYXkuc2VjdGlvbiA9ICdBIENsb3NlciBMb29rJztcbiAgICAgICAgICAgICRzY29wZS5uZXh0U2VjdGlvbiA9ICdJbnN0aXR1dGlvbmFsIFByZXNlbmNlJztcbiAgICAgICAgICAgICRzY29wZS5uZXh0U2VjdGlvblRlYXNlciA9IFwiU3R1ZmYgYWJvdXQgaW5zdGl0dXRpb25zXCI7XG4gICAgICAgICAgICAkc2NvcGUubmV4dFNlY3Rpb25VUkwgPSAnIy9pbnN0aXR1dGlvbmFsLXByZXNlbmNlJztcbiAgICAgICAgfSk7XG5cbn1dKVxuXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdDb2hlc2lvblBhZ2VDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckaHR0cCcsICckbG9nJywgJyRsb2NhdGlvbicsICdzaWRlYmFyRGlzcGxheScsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGxvZywgJGxvY2F0aW9uLCBzaWRlYmFyRGlzcGxheSl7XG4gICAgICAgICRzY29wZS50b2dnbGUgPSBzaWRlYmFyRGlzcGxheS50b2dnbGU7XG5cbiAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICRzY29wZS50b2dnbGUub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgc2lkZWJhckRpc3BsYXkuc2VjdGlvbiA9ICdTb2NpYWwgTmV0d29ya3MgYW5kIENvbW11bml0eSBDb2hlc2lvbic7XG4gICAgICAgICAgICAkc2NvcGUubmV4dFNlY3Rpb24gPSAnSW5zdGl0dXRpb25hbCBQcmVzZW5jZSc7XG4gICAgICAgICAgICAkc2NvcGUubmV4dFNlY3Rpb25UZWFzZXIgPSBcIlN0dWZmIGFib3V0IGluc3RpdHV0aW9uc1wiO1xuICAgICAgICAgICAgJHNjb3BlLm5leHRTZWN0aW9uVVJMID0gJyMvaW5zdGl0dXRpb25hbC1wcmVzZW5jZSc7XG4gICAgICAgIH0pO1xuXG59XSlcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignRW5nYWdlbWVudFBhZ2VDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckaHR0cCcsICckbG9nJywgJyRsb2NhdGlvbicsLyogJyRhbmNob3JTY3JvbGwnLCAnJHJvb3RTY29wZScsICckcm91dGVQYXJhbXMnLCovICdzaWRlYmFyRGlzcGxheScsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGxvZywgJGxvY2F0aW9uLC8qICRhbmNob3JTY3JvbGwsICRyb290U2NvcGUsICRyb3V0ZVBhcmFtcywqLyBzaWRlYmFyRGlzcGxheSl7XG4gICAgICAgICRzY29wZS50b2dnbGUgPSBzaWRlYmFyRGlzcGxheS50b2dnbGU7XG5cbiAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICRzY29wZS50b2dnbGUub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgc2lkZWJhckRpc3BsYXkuc2VjdGlvbiA9ICdDaXZpYyBFbmdhZ2VtZW50JztcbiAgICAgICAgICAgICRzY29wZS5uZXh0U2VjdGlvbiA9ICdQb2xpdGljYWwgUGFydGljaXBhdGlvbic7XG4gICAgICAgICAgICAkc2NvcGUubmV4dFNlY3Rpb25UZWFzZXIgPSBcIlN0dWZmIGFib3V0IHBvbGl0aWNhbCBwYXJ0aWNpcGF0aW9uXCI7XG4gICAgICAgICAgICAkc2NvcGUubmV4dFNlY3Rpb25VUkwgPSAnIy9wb2xpdGljYWwtcGFydGljaXBhdGlvbic7XG4gICAgICAgIH0pO1xuXG59XSlcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignUGFydGljaXBhdGlvblBhZ2VDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckaHR0cCcsICckbG9nJywgJyRsb2NhdGlvbicsICdzaWRlYmFyRGlzcGxheScsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGxvZywgJGxvY2F0aW9uLCBzaWRlYmFyRGlzcGxheSl7XG4gICAgICAgICRzY29wZS50b2dnbGUgPSBzaWRlYmFyRGlzcGxheS50b2dnbGU7XG5cbiAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICRzY29wZS50b2dnbGUub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgc2lkZWJhckRpc3BsYXkuc2VjdGlvbiA9ICdQb2xpdGljYWwgUGFydGljaXBhdGlvbic7XG4gICAgICAgICAgICAkc2NvcGUubmV4dFNlY3Rpb24gPSAnQ29tbXVuaXR5IENvaGVzaW9uJztcbiAgICAgICAgICAgICRzY29wZS5uZXh0U2VjdGlvblRlYXNlciA9IFwiU3R1ZmYgYWJvdXQgY29oZXNpb25cIjtcbiAgICAgICAgICAgICRzY29wZS5uZXh0U2VjdGlvblVSTCA9ICcjL2NvbW11bml0eS1jb2hlc2lvbic7XG4gICAgICAgIH0pO1xuXG59XSlcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignUGFydG5lcnNQYWdlQ29udHJvbGxlcicsXG4gICAgWyckc2NvcGUnLCAnJGh0dHAnLCAnJGxvZycsICckbG9jYXRpb24nLC8qICckYW5jaG9yU2Nyb2xsJywgJyRyb290U2NvcGUnLCovICckcm91dGVQYXJhbXMnLCAnc2lkZWJhckRpc3BsYXknLCAnY29udHJpYnV0b3JzJyxcbiAgICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkbG9nLCAkbG9jYXRpb24sLyogJGFuY2hvclNjcm9sbCwgJHJvb3RTY29wZSwqLyAkcm91dGVQYXJhbXMsIHNpZGViYXJEaXNwbGF5LCBjb250cmlidXRvcnMpe1xuICAgICAgICAkc2NvcGUudG9nZ2xlID0gc2lkZWJhckRpc3BsYXkudG9nZ2xlO1xuXG4gICAgICAgIHZhciBjb250cmlidXRvclByb21pc2UgPSBjb250cmlidXRvcnMuZ2V0Q29udHJpYnV0b3JzKFwiYWxsXCIpO1xuICAgICAgICBjb250cmlidXRvclByb21pc2UudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICRzY29wZS5jb250cmlidXRvcnMgPSBjb250cmlidXRvcnMubGlzdDtcbiAgICAgICAgfSwgZnVuY3Rpb24ocmVqZWN0aW9uKSB7XG4gICAgICAgICAgICBhbGVydChcInByb21pc2UgcmVqZWN0ZWQhXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkc2NvcGUuJG9uKCckdmlld0NvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZS5vcGVuID0gZmFsc2U7XG4gICAgICAgICAgICBzaWRlYmFyRGlzcGxheS5zZWN0aW9uID0gJ1BhcnRuZXJzJztcbiAgICAgICAgICAgICRzY29wZS5uZXh0U2VjdGlvbiA9ICdSYXcgRGF0YSc7XG4gICAgICAgICAgICAkc2NvcGUubmV4dFNlY3Rpb25UZWFzZXIgPSBcIlN0dWZmIGFib3V0IHJhdyBkYXRhXCI7XG4gICAgICAgICAgICAkc2NvcGUubmV4dFNlY3Rpb25VUkwgPSAnIy9yYXctZGF0YSc7XG4gICAgICAgIH0pO1xuXG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0luc3RpdHV0aW9uUGFnZUNvbnRyb2xsZXInLFxuICAgIFsnJHNjb3BlJywgJyRodHRwJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJ3NpZGViYXJEaXNwbGF5JyxcbiAgICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkbG9nLCAkbG9jYXRpb24sIHNpZGViYXJEaXNwbGF5KXtcbiAgICAgICAgJHNjb3BlLnRvZ2dsZSA9IHNpZGViYXJEaXNwbGF5LnRvZ2dsZTtcblxuICAgICAgICAkc2NvcGUuJG9uKCckdmlld0NvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZS5vcGVuID0gZmFsc2U7XG4gICAgICAgICAgICBzaWRlYmFyRGlzcGxheS5zZWN0aW9uID0gJ0luc3RpdHV0aW9uYWwgUHJlc2VuY2UnO1xuICAgICAgICAgICAgJHNjb3BlLm5leHRTZWN0aW9uID0gJ0NhbGwgdG8gQWN0aW9uJztcbiAgICAgICAgICAgICRzY29wZS5uZXh0U2VjdGlvblRlYXNlciA9IFwiU3R1ZmYgYWJvdXQgY2FsbCB0byBhY3Rpb25cIjtcbiAgICAgICAgICAgICRzY29wZS5uZXh0U2VjdGlvblVSTCA9ICcjL2NhbGwtdG8tYWN0aW9uJztcbiAgICAgICAgfSk7XG5cbn1dKVxuXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdjYXRlZ29yaWVzJywgWyckaHR0cCcsICckcScsICdsb2Rhc2gnLCBmdW5jdGlvbigkaHR0cCwgJHEsIGxvZGFzaCkge1xuICAgIHZhciBjYXRlZ29yaWVzID0ge307XG4gICAgY2F0ZWdvcmllcy5saXN0ID0gW107XG5cbiAgICBjYXRlZ29yaWVzLnRvZ2dsZSA9IGZ1bmN0aW9uKGNhdGVnb3J5KSB7XG4gICAgICAgIHBvc2l0aW9uID0gbG9kYXNoLmZpbmRJbmRleChjYXRlZ29yaWVzLmxpc3QsIGZ1bmN0aW9uKGxpc3RjYXQpIHtcbiAgICAgICAgICAgIHJldHVybiBsaXN0Y2F0Lm5hbWUgPT0gY2F0ZWdvcnkubmFtZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNhdGVnb3JpZXMubGlzdFtwb3NpdGlvbl0uc2VsZWN0ZWQgPSAhY2F0ZWdvcmllcy5saXN0W3Bvc2l0aW9uXS5zZWxlY3RlZDtcbiAgICB9O1xuXG4gICAgY2F0ZWdvcmllcy5nZXRDYXRlZ29yaWVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChjYXRlZ29yaWVzLmxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gaWYgdGhpcyBvYmplY3QgYWxyZWFkeSBoYXMgZGF0YSwganVzdCB1c2Ugd2hhdCdzIGN1cnJlbnRseSBhdmFpbGFibGVcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlKXtyZXNvbHZlKGNhdGVnb3JpZXMpfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UgZ2V0IGRhdGEgZnJlc2ggZnJvbSBmaWxlXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvc3RhdGljL2Rpc3QvZGF0YS9kYXRhLmpzb24nKVxuICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdCA9IGxvZGFzaC5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc29ydCBjYXRlZ29yaWVzIGJ5IHJhbmtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2Rhc2guc29ydEJ5KHJlc3BvbnNlLCBcInJhbmtcIiksIGZ1bmN0aW9uKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgZWFjaCBpbmRpY2F0b3IgaW4gZWFjaCBjYXRlZ29yeSwgc29ydCAnbGV2ZWxzJyBieSBhIHJhbmsgYXMgd2VsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGluZGljYXRvciwgaWksIGlhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uZGF0YVtpaV0uZGF0YSA9IGxvZGFzaC5zb3J0QnlBbGwoby5kYXRhW2lpXS5kYXRhLCBcInJhbmtcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBleHRlbmQgZWFjaCBjYXRlZ29yeSB0byBoYXZlIGEgXCJzZWxlY3RlZFwiIHZhbHVlLCBkZWZhdWx0IHRvIHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gbG9kYXNoLmV4dGVuZCh7fSwgbywge1wic2VsZWN0ZWRcIiA6IHRydWV9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY2F0ZWdvcmllcy5saXN0IHRvIGEgc29ydGVkIGFycmF5XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzLmxpc3QgPSBsaXN0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGNhdGVnb3JpZXMpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoXCJUaGVyZSB3YXMgYW4gZXJyb3IgZ2V0dGluZyBjYXRlZ29yaWVzXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBjYXRlZ29yaWVzO1xufV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdjb250cmlidXRvcnMnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24oJGh0dHAsICRxKSB7XG4gICAgdmFyIGNvbnRyaWJ1dG9ycyA9IHt9O1xuICAgIGNvbnRyaWJ1dG9ycy5saXN0ID0gW107XG5cbiAgICBjb250cmlidXRvcnMuZ2V0Q29udHJpYnV0b3JzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChjb250cmlidXRvcnMubGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBpZiB0aGlzIG9iamVjdCBhbHJlYWR5IGhhcyBkYXRhLCBqdXN0IHVzZSB3aGF0J3MgY3VycmVudGx5IGF2YWlsYWJsZVxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUpe3Jlc29sdmUoY29udHJpYnV0b3JzKX0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIGdldCBkYXRhIGZyZXNoIGZyb20gZmlsZVxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL3N0YXRpYy9kaXN0L2RhdGEvY29udHJpYnV0b3JzLmpzb24nKVxuICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJpYnV0b3JzLmxpc3QgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoY29udHJpYnV0b3JzKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiVGhlcmUgd2FzIGFuIGVycm9yIGdldHRpbmcgY29udHJpYnV0b3JzXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBjb250cmlidXRvcnM7XG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ1NpZGViYXJDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckbG9nJywnbG9kYXNoJywgJ2NhdGVnb3JpZXMnLCAnY29udHJpYnV0b3JzJyxcbiAgICBmdW5jdGlvbigkc2NvcGUsICRsb2csIGxvZGFzaCwgY2F0ZWdvcmllcywgY29udHJpYnV0b3JzKSB7XG4gICAgICAgIC8vICRzY29wZS5zdGF0dXMgPSB7XG4gICAgICAgIC8vICAgICBpc29wZW46IGZhbHNlXG4gICAgICAgIC8vIH07XG5cbiAgICAgICAgdmFyIGNhdGVnb3J5UHJvbWlzZSA9IGNhdGVnb3JpZXMuZ2V0Q2F0ZWdvcmllcygpO1xuICAgICAgICBjYXRlZ29yeVByb21pc2UudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gY2F0ZWdvcmllcy5saXN0O1xuICAgICAgICB9LCBmdW5jdGlvbihyZWplY3Rpb24pIHtcbiAgICAgICAgICAgIGFsZXJ0KFwicHJvbWlzZSByZWplY3RlZCFcIik7XG4gICAgICAgIH0pXG5cbiAgICAgICAgdmFyIGNvbnRyaWJ1dG9yUHJvbWlzZSA9IGNvbnRyaWJ1dG9ycy5nZXRDb250cmlidXRvcnMoKTtcbiAgICAgICAgY29udHJpYnV0b3JQcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAkc2NvcGUuY29udHJpYnV0b3JzID0gY29udHJpYnV0b3JzLmxpc3Q7XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAgICAgICAgYWxlcnQoXCJwcm9taXNlIHJlamVjdGVkIVwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRnVuY3Rpb25zIGZvciBtYW5hZ2luZyB0aGUgcHJlc2VudGF0aW9uIG9mIHRoZSBzZWxlY3RlZCBpdGVtcyBpblxuICAgICAgICAvLyB0aGUgc2lkZWJhciBhbmQgcHJvcGlnYXRpbmcgc2VsZWN0aW9ucyB0aHJvdWdoIHRoZSBjYXRnb3JpZXMgc2VydmljZVxuICAgICAgICAkc2NvcGUudXBkYXRlU2VsZWN0ZWQgPSBmdW5jdGlvbihjYXRlZ29yeSkge1xuICAgICAgICAgICAgY2F0ZWdvcmllcy50b2dnbGUoY2F0ZWdvcnkpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5jaGVja1NlbGVjdGVkID0gZnVuY3Rpb24oYm9vbCkge1xuICAgICAgICAgICAgaWYgKGJvb2wpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzZWxlY3RlZFwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJkZXNlbGVjdGVkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRzY29wZS50b2dnbGU7XG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0b2dnbGVkIHRyaWdnZXJlZCBmcm9tIHNpZGViYXJcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudG9nZ2xlKTtcbiAgICAgICAgfSk7XG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ3NpZGViYXJEaXNwbGF5JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdG9nZ2xlOiB7IG9wZW46IHRydWUgfSxcbiAgICAgICAgc2VjdGlvbjogJ0ludHJvZHVjdGlvbidcbiAgICB9XG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ1dyYXBDb250cm9sbGVyJywgWyckc2NvcGUnLCAnc2lkZWJhckRpc3BsYXknLCBmdW5jdGlvbiAoJHNjb3BlLCBzaWRlYmFyRGlzcGxheSkge1xuICAgICAgICAkc2NvcGUudG9nZ2xlID0gc2lkZWJhckRpc3BsYXkudG9nZ2xlO1xuICAgICAgICAkc2NvcGUuc2VjdGlvbiA9IHNpZGViYXJEaXNwbGF5LnNlY3Rpb247XG5cbiAgICAgICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNpZGViYXJEaXNwbGF5LnNlY3Rpb247XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5zZWN0aW9uID0gc2lkZWJhckRpc3BsYXkuc2VjdGlvbjtcbiAgICAgICAgfSk7XG4gICAgfV0pXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
