var app=angular.module("app",["ngAnimate","ui.bootstrap","ngLodash","ngRoute"]);angular.module("app").config(["$routeProvider","$locationProvider",function(t,e){t.when("/data",{templateUrl:"static/dist/templates/data.html",controller:"DataVizController"}).when("/about",{templateUrl:"static/dist/templates/about.html",controller:"AboutPageController"}).otherwise({redirectTo:"/data"})}]),angular.module("app").filter("suppressions",function(){return function(t){return"-9,999.0"===t||"-9999"===t?"NA":"-666,666.0"===t||"-666666"===t?" * ":t}}).filter("percent",function(){return function(t){return parseInt(t)>0?t+"%":t}}).filter("any",["lodash",function(t){return function(e,n){return"undefined"!=typeof n?t.some(e,n):t.some(e)}}]).filter("none",["lodash",function(t){return function(e,n){return"undefined"!=typeof n?!t.some(e,n):!t.some(e)}}]).filter("sluggify",function(){return function(t){return t.toLowerCase().replace(/[^a-zA-Z0-9_]/g,"_")}}).filter("safe",["$sce",function(t){return function(e){return t.trustAsHtml(e.toString())}}]),angular.module("app").controller("AboutPageController",["$scope","$http","$log","$location","sidebarDisplay","contributors",function(t,e,n,o,r,i){t.toggle=r.toggle,console.log(t.toggle);var a=i.getContributors("all");a.then(function(e){t.contributors=i.list},function(t){alert("promise rejected!")}),t.$on("$viewContentLoaded",function(e){t.toggle.open=!1})}]),angular.module("app").controller("DataVizController",["$scope","$http","$log","$location","$filter","sidebarDisplay","categories","lodash",function(t,e,n,o,r,i,a,l){t.charts={},t.toggle=i.toggle,t.aboutCollapsed=!1,t.checkChart=function(e){return e=r("sluggify")(e),e in t.charts?t.charts[e]:(t.charts[e]=!1,!1)},t.toggleChart=function(e){e=r("sluggify")(e),e in t.charts?t.charts[e]=!t.charts[e]:(alert('Somehow, "'+e+'" was not in scope.charts!'),t.charts[e]=!1)};var c=a.getCategories("all");c.then(function(e){t.categories=a.list},function(t){alert("promise rejected!")}),t.$on("$viewContentLoaded",function(e){t.toggle.open=!0})}]),angular.module("app").directive("simpletable",function(){var t=tableChart();return{restrict:"E",scope:{data:"=data"},link:function(e,n,o){e.$watchCollection("data",function(e){d3.select(n[0]).datum(e).call(t)})}}}),angular.module("app").directive("timeseries",["$window",function(t){var e=timeSeries();return{restrict:"E",scope:{data:"=data"},link:function(n,o,r){n.render=function(){data={data:n.data,config:{width:.6*o.parent().parent().parent()[0].getBoundingClientRect().width}},d3.select(o[0]).datum(data).call(e)},n.$watchCollection("data",function(t){n.render()}),t.onresize=function(){n.render()}}}}]),angular.module("app").service("categories",["$http","$q","lodash",function(t,e,n){var o={};return o.list=[],o.toggle=function(t){position=n.findIndex(o.list,function(e){return e.name==t.name}),o.list[position].selected=!o.list[position].selected},o.getCategories=function(){return e(o.list.length>0?function(t){t(o)}:function(e,r){t.get("/static/dist/data/data.json").success(function(t){o.list=n.map(n.sortBy(t,"rank"),function(t){return n.extend({},t,{selected:!0})}),o.list,e(o)}).error(function(){r("There was an error getting categories")})})},o}]),angular.module("app").service("contributors",["$http","$q",function(t,e){var n={};return n.list=[],n.getContributors=function(){return e(n.list.length>0?function(t){t(n)}:function(e,o){t.get("/static/dist/data/contributors.json").success(function(t){n.list=t,e(n)}).error(function(){o("There was an error getting contributors")})})},n}]),angular.module("app").controller("SidebarController",["$scope","$log","lodash","categories","contributors",function(t,e,n,o,r){var i=o.getCategories();i.then(function(e){t.categories=o.list},function(t){alert("promise rejected!")});var a=r.getContributors();a.then(function(e){t.contributors=r.list},function(t){alert("promise rejected!")}),t.updateSelected=function(t){o.toggle(t),console.log(n.pluck(o.list,"selected"))},t.checkSelected=function(t){return t?"selected":"deselected"},t.$watchCollection(function(){return t.toggle},function(){console.log("toggled triggered from sidebar"),console.log(t.toggle)})}]),angular.module("app").service("sidebarDisplay",function(){return{toggle:{open:!0}}}),angular.module("app").controller("WrapController",["$scope","sidebarDisplay",function(t,e){t.toggle=e.toggle,t.$watchCollection(function(){return t.toggle},function(){console.log("toggled triggered from wrap"),console.log(t.toggle)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsInJvdXRlcy5qcyIsImZpbHRlcnMuanMiLCJhYm91dHBhZ2UvYWJvdXRwYWdlLmNvbnRyb2xsZXIuanMiLCJkYXRhdml6L2RhdGF2aXouY29udHJvbGxlci5qcyIsImRhdGF2aXovc2ltcGxldGFibGUuZGlyZWN0aXZlLmpzIiwiZGF0YXZpei90aW1lc2VyaWVzLmRpcmVjdGl2ZS5qcyIsInNpZGViYXIvY2F0ZWdvcmllcy5zZXJ2aWNlLmpzIiwic2lkZWJhci9jb250cmlidXRvcnMuc2VydmljZS5qcyIsInNpZGViYXIvc2lkZWJhci5jb250cm9sbGVyLmpzIiwic2lkZWJhci9zaWRlYmFyZGlzcGxheS5zZXJ2aWNlLmpzIiwic2lkZWJhci93cmFwLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZpbHRlciIsImlucHV0Iiwic3RyIiwicGFyc2VJbnQiLCJsb2Rhc2giLCJhcnIiLCJwcm9wIiwic29tZSIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsIiRzY2UiLCJ2YWwiLCJ0cnVzdEFzSHRtbCIsInRvU3RyaW5nIiwiJHNjb3BlIiwiJGh0dHAiLCIkbG9nIiwiJGxvY2F0aW9uIiwic2lkZWJhckRpc3BsYXkiLCJjb250cmlidXRvcnMiLCJ0b2dnbGUiLCJjb25zb2xlIiwibG9nIiwiY29udHJpYnV0b3JQcm9taXNlIiwiZ2V0Q29udHJpYnV0b3JzIiwidGhlbiIsInJlc3VsdCIsImxpc3QiLCJyZWplY3Rpb24iLCJhbGVydCIsIiRvbiIsImV2ZW50Iiwib3BlbiIsIiRmaWx0ZXIiLCJjYXRlZ29yaWVzIiwiY2hhcnRzIiwiYWJvdXRDb2xsYXBzZWQiLCJjaGVja0NoYXJ0Iiwic2x1ZyIsInRvZ2dsZUNoYXJ0IiwicHJvbWlzZSIsImdldENhdGVnb3JpZXMiLCJkaXJlY3RpdmUiLCJjaGFydCIsInRhYmxlQ2hhcnQiLCJyZXN0cmljdCIsInNjb3BlIiwiZGF0YSIsImxpbmsiLCJlbGVtZW50IiwiYXR0cnMiLCIkd2F0Y2hDb2xsZWN0aW9uIiwiZDMiLCJzZWxlY3QiLCJkYXR1bSIsImNhbGwiLCIkd2luZG93IiwidGltZVNlcmllcyIsInJlbmRlciIsIndpZHRoIiwicGFyZW50IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwib25yZXNpemUiLCJzZXJ2aWNlIiwiJHEiLCJjYXRlZ29yeSIsInBvc2l0aW9uIiwiZmluZEluZGV4IiwibGlzdGNhdCIsIm5hbWUiLCJzZWxlY3RlZCIsImxlbmd0aCIsInJlc29sdmUiLCJyZWplY3QiLCJnZXQiLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJtYXAiLCJzb3J0QnkiLCJvIiwiZXh0ZW5kIiwiZXJyb3IiLCJjYXRlZ29yeVByb21pc2UiLCJ1cGRhdGVTZWxlY3RlZCIsInBsdWNrIiwiY2hlY2tTZWxlY3RlZCIsImJvb2wiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLEtBQUFDLFFBQUFDLE9BQUEsT0FDQSxZQUNBLGVBQ0EsV0FDQSxXQ0pBRCxTQUFBQyxPQUFBLE9BQ0FDLFFBQUEsaUJBQUEsb0JBQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFDQUUsS0FBQSxTQUNBQyxZQUFBLGtDQUNBQyxXQUFBLHNCQUVBRixLQUFBLFVBQ0FDLFlBQUEsbUNBQ0FDLFdBQUEsd0JBRUFDLFdBQ0FDLFdBQUEsYUNaQVQsUUFBQUMsT0FBQSxPQUNBUyxPQUFBLGVBQUEsV0FDQSxNQUFBLFVBQUFDLEdBQ0EsTUFBQSxhQUFBQSxHQUFBLFVBQUFBLEVBQ0EsS0FDQSxlQUFBQSxHQUFBLFlBQUFBLEVBQ0EsTUFFQUEsS0FJQUQsT0FBQSxVQUFBLFdBQ0EsTUFBQSxVQUFBRSxHQUNBLE1BQUFDLFVBQUFELEdBQUEsRUFDQUEsRUFBQSxJQUVBQSxLQUlBRixPQUFBLE9BQUEsU0FBQSxTQUFBSSxH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RUFBQThCLEVBQUFmLEdBS0EsR0FBQStELEdBQUFoRCxFQUFBTyxlQUNBeUMsR0FBQXpELEtBQUEsU0FBQUMsR0FDQVosRUFBQW9CLFdBQUFBLEVBQUFQLE1BQ0EsU0FBQUMsR0FDQUMsTUFBQSxzQkFHQSxJQUFBTixHQUFBSixFQUFBSyxpQkFDQUQsR0FBQUUsS0FBQSxTQUFBQyxHQUNBWixFQUFBSyxhQUFBQSxFQUFBUSxNQUNBLFNBQUFDLEdBQ0FDLE1BQUEsdUJBS0FmLEVBQUFxRSxlQUFBLFNBQUFsQixHQUNBL0IsRUFBQWQsT0FBQTZDLEdBQ0E1QyxRQUFBQyxJQUFBbEIsRUFBQWdGLE1BQUFsRCxFQUFBUCxLQUFBLGNBR0FiLEVBQUF1RSxjQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FDQSxXQUVBLGNBR0F4RSxFQUFBcUMsaUJBQUEsV0FDQSxNQUFBckMsR0FBQU0sUUFDQSxXQUNBQyxRQUFBQyxJQUFBLGtDQUNBRCxRQUFBQyxJQUFBUixFQUFBTSxhQ3hDQTlCLFFBQUFDLE9BQUEsT0FDQXdFLFFBQUEsaUJBQUEsV0FDQSxPQUNBM0MsUUFBQVksTUFBQSxNQ0hBMUMsUUFBQUMsT0FBQSxPQUNBTSxXQUFBLGtCQUFBLFNBQUEsaUJBQUEsU0FBQWlCLEVBQUFJLEdBQ0FKLEVBQUFNLE9BQUFGLEVBQUFFLE9BRUFOLEVBQUFxQyxpQkFBQSxXQUNBLE1BQUFyQyxHQUFBTSxRQUNBLFdBQ0FDLFFBQUFDLElBQUEsK0JBQ0FELFFBQUFDLElBQUFSLEVBQUFNIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xuICAgICduZ0FuaW1hdGUnLFxuICAgICd1aS5ib290c3RyYXAnLFxuICAgICduZ0xvZGFzaCcsXG4gICAgJ25nUm91dGUnXG4gICAgXSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb25maWcoZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgICAgLndoZW4oJy9kYXRhJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvZGlzdC90ZW1wbGF0ZXMvZGF0YS5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdEYXRhVml6Q29udHJvbGxlcidcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9hYm91dCcsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL2Rpc3QvdGVtcGxhdGVzL2Fib3V0Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0Fib3V0UGFnZUNvbnRyb2xsZXInXG4gICAgICAgIH0pXG4gICAgICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICAgICAgcmVkaXJlY3RUbzogJy9kYXRhJ1xuICAgICAgICB9KTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uZmlsdGVyKCdzdXBwcmVzc2lvbnMnLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgaWYgKGlucHV0ID09PSBcIi05LDk5OS4wXCIgfHwgaW5wdXQgPT09IFwiLTk5OTlcIikge1xuICAgICAgICByZXR1cm4gJ05BJztcbiAgICB9IGVsc2UgaWYgKGlucHV0ID09PSBcIi02NjYsNjY2LjBcIiB8fCBpbnB1dCA9PT0gXCItNjY2NjY2XCIpIHtcbiAgICAgICAgcmV0dXJuICcgKiAnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG4gIH07XG59KVxuLmZpbHRlcigncGVyY2VudCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzdHIpIHtcbiAgICAgICAgaWYgKHBhcnNlSW50KHN0cikgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyICsgXCIlXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgICB9XG4gICAgfVxufSlcbi5maWx0ZXIoJ2FueScsIFsnbG9kYXNoJywgZnVuY3Rpb24obG9kYXNoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFyciwgcHJvcCkge1xuICAgICAgICBpZiAodHlwZW9mIHByb3AgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2Rhc2guc29tZShhcnIsIHByb3ApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbG9kYXNoLnNvbWUoYXJyKVxuICAgICAgICB9XG4gICAgfVxufV0pXG4uZmlsdGVyKCdub25lJywgWydsb2Rhc2gnLCBmdW5jdGlvbihsb2Rhc2gpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJyLCBwcm9wKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvcCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgcmV0dXJuICFsb2Rhc2guc29tZShhcnIsIHByb3ApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gIWxvZGFzaC5zb21lKGFycilcbiAgICAgICAgfVxuICAgIH1cbn1dKVxuLmZpbHRlcignc2x1Z2dpZnknLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15hLXpBLVowLTlfXS9nLCBcIl9cIilcbiAgICB9O1xufSlcbi5maWx0ZXIoJ3NhZmUnLCBbJyRzY2UnLCBmdW5jdGlvbigkc2NlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICByZXR1cm4gJHNjZS50cnVzdEFzSHRtbCh2YWwudG9TdHJpbmcoKSk7XG4gICAgfTtcbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdBYm91dFBhZ2VDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckaHR0cCcsICckbG9nJywgJyRsb2NhdGlvbicsLyogJyRhbmNob3JTY3JvbGwnLCAnJHJvb3RTY29wZScsICckcm91dGVQYXJhbXMnLCAqLydzaWRlYmFyRGlzcGxheScsICdjb250cmlidXRvcnMnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRsb2csICRsb2NhdGlvbiwvKiAkYW5jaG9yU2Nyb2xsLCAkcm9vdFNjb3BlLCAkcm91dGVQYXJhbXMsICovc2lkZWJhckRpc3BsYXksIGNvbnRyaWJ1dG9ycyl7XG4gICAgICAgICRzY29wZS50b2dnbGUgPSBzaWRlYmFyRGlzcGxheS50b2dnbGU7XG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS50b2dnbGUpO1xuXG4gICAgICAgIC8vICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24obmV3Um91dGUsIG9sZFJvdXRlKSB7XG4gICAgICAgIC8vICAgICAkbG9jYXRpb24uaGFzaCgkcm91dGVQYXJhbXMuc2Nyb2xsVG8pO1xuICAgICAgICAvLyAgICAgJGFuY2hvclNjcm9sbCgpO1xuICAgICAgICAvLyB9KTtcblxuICAgICAgICB2YXIgY29udHJpYnV0b3JQcm9taXNlID0gY29udHJpYnV0b3JzLmdldENvbnRyaWJ1dG9ycyhcImFsbFwiKTtcbiAgICAgICAgY29udHJpYnV0b3JQcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAkc2NvcGUuY29udHJpYnV0b3JzID0gY29udHJpYnV0b3JzLmxpc3Q7XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAgICAgICAgYWxlcnQoXCJwcm9taXNlIHJlamVjdGVkIVwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIC8vIEkgbWFkZSBjaGFuZ2VzIHRvIHRoZSBzaWRlYmFyIGRpc3BsYXkgc2VydmljZSwgcmVuYW1pbmcgdGhlIGludGVybmFsXG4gICAgICAgICAgICAvLyBzZXR0aW5nIHRvIGJlIFwib3BlblwiLCB3aGljaCBtYWtlcyBpdCBlYXNpZXIgdG8gaW50ZXJwcmV0IHRoaXMuIEkgbWFkZVxuICAgICAgICAgICAgLy8gY29ycmVzcG9uZGluZyBjaGFuZ2VzIGluIHRoZSBhYm91dCBhbmQgZGF0YSB0ZW1wbGF0ZXMuXG4gICAgICAgICAgICAvLyBUaGlzIGxpc3RlbmVyIGVuc3VyZXMgdGhhdCB0aGUgc2lkZWJhciBkb2Vzbid0IGdldCBjbG9zZWQsIHdoaWNoIHNvbWVob3dcbiAgICAgICAgICAgIC8vIHJlc29sdmVzIHRoZSBpc3N1ZSBvZiByZW5kZXJpbmcgdGhlIHRlbXBsYXRlIHVuZGVybmVhdCB0aGUgc2xpZGVvdXQgbWVudVxuICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZS5vcGVuID0gZmFsc2U7XG4gICAgICAgIH0pO1xuXG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0RhdGFWaXpDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckaHR0cCcsICckbG9nJywgJyRsb2NhdGlvbicsICckZmlsdGVyJywvKiAnJGFuY2hvclNjcm9sbCcsICckcm9vdFNjb3BlJywgJyRyb3V0ZVBhcmFtcycsICovJ3NpZGViYXJEaXNwbGF5JywgJ2NhdGVnb3JpZXMnLCAnbG9kYXNoJyxcbiAgICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkbG9nLCAkbG9jYXRpb24sICRmaWx0ZXIsLyogJGFuY2hvclNjcm9sbCwgJHJvb3RTY29wZSwgJHJvdXRlUGFyYW1zLCAqL3NpZGViYXJEaXNwbGF5LCBjYXRlZ29yaWVzLCBsb2Rhc2gpe1xuICAgICAgICB2YXIgbG8gPSBsb2Rhc2g7XG4gICAgICAgICRzY29wZS5jaGFydHMgPSB7fTtcbiAgICAgICAgJHNjb3BlLnRvZ2dsZSA9IHNpZGViYXJEaXNwbGF5LnRvZ2dsZTtcblxuICAgICAgICAkc2NvcGUuYWJvdXRDb2xsYXBzZWQgPSBmYWxzZTtcblxuICAgICAgICAkc2NvcGUuY2hlY2tDaGFydCA9IGZ1bmN0aW9uKHNsdWcpIHtcbiAgICAgICAgICAgIHNsdWcgPSAkZmlsdGVyKCdzbHVnZ2lmeScpKHNsdWcpO1xuXG4gICAgICAgICAgICBpZiAoIShzbHVnIGluICRzY29wZS5jaGFydHMpKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmNoYXJ0c1tzbHVnXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5jaGFydHNbc2x1Z107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLnRvZ2dsZUNoYXJ0ID0gZnVuY3Rpb24oc2x1Zykge1xuICAgICAgICAgICAgc2x1ZyA9ICRmaWx0ZXIoJ3NsdWdnaWZ5Jykoc2x1Zyk7XG5cbiAgICAgICAgICAgIGlmICghKHNsdWcgaW4gJHNjb3BlLmNoYXJ0cykpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIlNvbWVob3csIFxcXCJcIitzbHVnK1wiXFxcIiB3YXMgbm90IGluIHNjb3BlLmNoYXJ0cyFcIilcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2hhcnRzW3NsdWddID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gJHNjb3BlLmNoYXJ0c1tzbHVnXTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2hhcnRzW3NsdWddID0gISRzY29wZS5jaGFydHNbc2x1Z107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKG5ld1JvdXRlLCBvbGRSb3V0ZSkge1xuICAgICAgICAvLyAgICAgJGxvY2F0aW9uLmhhc2goJHJvdXRlUGFyYW1zLnNjcm9sbFRvKTtcbiAgICAgICAgLy8gICAgICRhbmNob3JTY3JvbGwoKTtcbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgdmFyIHByb21pc2UgPSBjYXRlZ29yaWVzLmdldENhdGVnb3JpZXMoXCJhbGxcIik7XG4gICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gY2F0ZWdvcmllcy5saXN0O1xuICAgICAgICB9LCBmdW5jdGlvbihyZWplY3Rpb24pIHtcbiAgICAgICAgICAgIGFsZXJ0KFwicHJvbWlzZSByZWplY3RlZCFcIik7XG4gICAgICAgIH0pXG5cbiAgICAgICAgICRzY29wZS4kb24oJyR2aWV3Q29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAkc2NvcGUudG9nZ2xlLm9wZW4gPSB0cnVlO1xuICAgICAgICB9KTtcbn1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uZGlyZWN0aXZlKCdzaW1wbGV0YWJsZScsIGZ1bmN0aW9uKCkge1xuICAgIC8vIFRoaXMgZnVuY3Rpb24gc2hvdWxkIHJlZmxlY3Qgd2hhdGV2ZXIgeW91ciBkMyB0YWJsZSBmdW5jdGlvbiBpcyBjYWxsZWQuXG4gICAgdmFyIGNoYXJ0ID0gdGFibGVDaGFydCgpO1xuICAgIHJldHVybiAge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgZGF0YTogXCI9ZGF0YVwiIC8vIFdlIGNhbiBjYWxsIHRoaXMgdy9lIHdlIHdhbnQuXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QoZWxlbWVudFswXSkuZGF0dW0oZGF0YSkuY2FsbChjaGFydCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5kaXJlY3RpdmUoJ3RpbWVzZXJpZXMnLCBbJyR3aW5kb3cnLCBmdW5jdGlvbigkd2luZG93KSB7XG4gICAgLy8gVGhpcyBmdW5jdGlvbiBzaG91bGQgcmVmbGVjdCB3aGF0ZXZlciB5b3VyIGQzIGZ1bmN0aW9uIGlzIGNhbGxlZC5cbiAgICB2YXIgY2hhcnQgPSB0aW1lU2VyaWVzKCk7XG4gICAgcmV0dXJuICB7XG4gICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBkYXRhOiBcIj1kYXRhXCIgLy8gV2UgY2FuIGNhbGwgdGhpcyB3L2Ugd2Ugd2FudC5cbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgICAgICBzY29wZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBkYXRhIDogc2NvcGUuZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aWR0aFwiIDogZWxlbWVudC5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAqIDAuNlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGQzLnNlbGVjdChlbGVtZW50WzBdKS5kYXR1bShkYXRhKS5jYWxsKGNoYXJ0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAvLyBkYXRhID0ge1xuICAgICAgICAgICAgICAgIC8vICAgICBkYXRhIDogZGF0YSxcbiAgICAgICAgICAgICAgICAvLyAgICAgY29uZmlnIDoge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgXCJ3aWR0aFwiIDogZWxlbWVudC5wYXJlbnQoKVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aFxuICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICAgICAgLy8gZDMuc2VsZWN0KGVsZW1lbnRbMF0pLmRhdHVtKGRhdGEpLmNhbGwoY2hhcnQpO1xuICAgICAgICAgICAgICAgIHNjb3BlLnJlbmRlcigpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgIFRoaXMgY29kZSBpcyBpbnRlbmRlZCB0byBnZXQgdGhlIGNoYXJ0IHRvIHJlZHJhdyB3aGVuIHRoZSB3aW5kb3cgaXMgcmVzaXplZFxuICAgICAgICAgICAgICAgIEJ1dCBhcyBpdCBzdGFuZHMsIHNvbWVob3cgdGhpcyBvdmVycmlkZXMgdGhlIGRhdGEgYW5kIHRoZSBjaGFydCBiZWNvbWVzIHVzZWxlc3MuXG4gICAgICAgICAgICAgICAgSSBkb24ndCB0aGluayB0aGlzIGZlYXR1cmUgaXMgd29ydGggdGhlIGRlYnVnIHRpbWUgbm93LCBidXQgaXQncyB3b3J0aCBrZWVwaW5nIGluIG1pbmQgZm9yIHRoZSBmdXR1cmUuXG4gICAgICAgICAgICAqKi9cbiAgICAgICAgICAgICR3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzY29wZS5yZW5kZXIoKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIC8vICAgICBzY29wZS5yZW5kZXIoZGF0YSk7XG4gICAgICAgICAgICAvLyB9KTtcblxuICAgICAgICB9XG4gICAgfVxufV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdjYXRlZ29yaWVzJywgWyckaHR0cCcsICckcScsICdsb2Rhc2gnLCBmdW5jdGlvbigkaHR0cCwgJHEsIGxvZGFzaCkge1xuICAgIHZhciBjYXRlZ29yaWVzID0ge307XG4gICAgY2F0ZWdvcmllcy5saXN0ID0gW107XG5cbiAgICBjYXRlZ29yaWVzLnRvZ2dsZSA9IGZ1bmN0aW9uKGNhdGVnb3J5KSB7XG4gICAgICAgIHBvc2l0aW9uID0gbG9kYXNoLmZpbmRJbmRleChjYXRlZ29yaWVzLmxpc3QsIGZ1bmN0aW9uKGxpc3RjYXQpIHtcbiAgICAgICAgICAgIHJldHVybiBsaXN0Y2F0Lm5hbWUgPT0gY2F0ZWdvcnkubmFtZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNhdGVnb3JpZXMubGlzdFtwb3NpdGlvbl0uc2VsZWN0ZWQgPSAhY2F0ZWdvcmllcy5saXN0W3Bvc2l0aW9uXS5zZWxlY3RlZDtcbiAgICB9O1xuXG4gICAgY2F0ZWdvcmllcy5nZXRDYXRlZ29yaWVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChjYXRlZ29yaWVzLmxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gaWYgdGhpcyBvYmplY3QgYWxyZWFkeSBoYXMgZGF0YSwganVzdCB1c2Ugd2hhdCdzIGN1cnJlbnRseSBhdmFpbGFibGVcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlKXtyZXNvbHZlKGNhdGVnb3JpZXMpfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UgZ2V0IGRhdGEgZnJlc2ggZnJvbSBmaWxlXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvc3RhdGljL2Rpc3QvZGF0YS9kYXRhLmpzb24nKVxuICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllcy5saXN0ID0gbG9kYXNoLm1hcChsb2Rhc2guc29ydEJ5KHJlc3BvbnNlLCBcInJhbmtcIiksIGZ1bmN0aW9uKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9kYXNoLmV4dGVuZCh7fSwgbywge1wic2VsZWN0ZWRcIiA6IHRydWV9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMubGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShjYXRlZ29yaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiVGhlcmUgd2FzIGFuIGVycm9yIGdldHRpbmcgY2F0ZWdvcmllc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gY2F0ZWdvcmllcztcbn1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnY29udHJpYnV0b3JzJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uKCRodHRwLCAkcSkge1xuICAgIHZhciBjb250cmlidXRvcnMgPSB7fTtcbiAgICBjb250cmlidXRvcnMubGlzdCA9IFtdO1xuXG4gICAgY29udHJpYnV0b3JzLmdldENvbnRyaWJ1dG9ycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoY29udHJpYnV0b3JzLmxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gaWYgdGhpcyBvYmplY3QgYWxyZWFkeSBoYXMgZGF0YSwganVzdCB1c2Ugd2hhdCdzIGN1cnJlbnRseSBhdmFpbGFibGVcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlKXtyZXNvbHZlKGNvbnRyaWJ1dG9ycyl9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSBnZXQgZGF0YSBmcmVzaCBmcm9tIGZpbGVcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9zdGF0aWMvZGlzdC9kYXRhL2NvbnRyaWJ1dG9ycy5qc29uJylcbiAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyaWJ1dG9ycy5saXN0ID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGNvbnRyaWJ1dG9ycyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChcIlRoZXJlIHdhcyBhbiBlcnJvciBnZXR0aW5nIGNvbnRyaWJ1dG9yc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gY29udHJpYnV0b3JzO1xufV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdTaWRlYmFyQ29udHJvbGxlcicsXG4gICAgWyckc2NvcGUnLCAnJGxvZycsJ2xvZGFzaCcsICdjYXRlZ29yaWVzJywgJ2NvbnRyaWJ1dG9ycycsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkbG9nLCBsb2Rhc2gsIGNhdGVnb3JpZXMsIGNvbnRyaWJ1dG9ycykge1xuICAgICAgICAvLyAkc2NvcGUuc3RhdHVzID0ge1xuICAgICAgICAvLyAgICAgaXNvcGVuOiBmYWxzZVxuICAgICAgICAvLyB9O1xuXG4gICAgICAgIHZhciBjYXRlZ29yeVByb21pc2UgPSBjYXRlZ29yaWVzLmdldENhdGVnb3JpZXMoKTtcbiAgICAgICAgY2F0ZWdvcnlQcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IGNhdGVnb3JpZXMubGlzdDtcbiAgICAgICAgfSwgZnVuY3Rpb24ocmVqZWN0aW9uKSB7XG4gICAgICAgICAgICBhbGVydChcInByb21pc2UgcmVqZWN0ZWQhXCIpO1xuICAgICAgICB9KVxuXG4gICAgICAgIHZhciBjb250cmlidXRvclByb21pc2UgPSBjb250cmlidXRvcnMuZ2V0Q29udHJpYnV0b3JzKCk7XG4gICAgICAgIGNvbnRyaWJ1dG9yUHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgJHNjb3BlLmNvbnRyaWJ1dG9ycyA9IGNvbnRyaWJ1dG9ycy5saXN0O1xuICAgICAgICB9LCBmdW5jdGlvbihyZWplY3Rpb24pIHtcbiAgICAgICAgICAgIGFsZXJ0KFwicHJvbWlzZSByZWplY3RlZCFcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgdGhlIHByZXNlbnRhdGlvbiBvZiB0aGUgc2VsZWN0ZWQgaXRlbXMgaW5cbiAgICAgICAgLy8gdGhlIHNpZGViYXIgYW5kIHByb3BpZ2F0aW5nIHNlbGVjdGlvbnMgdGhyb3VnaCB0aGUgY2F0Z29yaWVzIHNlcnZpY2VcbiAgICAgICAgJHNjb3BlLnVwZGF0ZVNlbGVjdGVkID0gZnVuY3Rpb24oY2F0ZWdvcnkpIHtcbiAgICAgICAgICAgIGNhdGVnb3JpZXMudG9nZ2xlKGNhdGVnb3J5KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGxvZGFzaC5wbHVjayhjYXRlZ29yaWVzLmxpc3QsIFwic2VsZWN0ZWRcIikpXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmNoZWNrU2VsZWN0ZWQgPSBmdW5jdGlvbihib29sKSB7XG4gICAgICAgICAgICBpZiAoYm9vbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcInNlbGVjdGVkXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImRlc2VsZWN0ZWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLnRvZ2dsZTtcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInRvZ2dsZWQgdHJpZ2dlcmVkIGZyb20gc2lkZWJhclwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS50b2dnbGUpO1xuICAgICAgICB9KTtcbn1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnc2lkZWJhckRpc3BsYXknLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0b2dnbGU6IHsgb3BlbjogdHJ1ZSB9XG4gICAgfVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ1dyYXBDb250cm9sbGVyJywgWyckc2NvcGUnLCAnc2lkZWJhckRpc3BsYXknLCBmdW5jdGlvbigkc2NvcGUsIHNpZGViYXJEaXNwbGF5KSB7XG4gICAgJHNjb3BlLnRvZ2dsZSA9IHNpZGViYXJEaXNwbGF5LnRvZ2dsZTtcblxuICAgICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRzY29wZS50b2dnbGU7XG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0b2dnbGVkIHRyaWdnZXJlZCBmcm9tIHdyYXBcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudG9nZ2xlKTtcbiAgICAgICAgfSk7XG59XSlcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
