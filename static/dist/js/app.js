var app=angular.module("app",["ngAnimate","ui.bootstrap","ngLodash","ngRoute"]);angular.module("app").config(["$routeProvider","$locationProvider",function(t,e){t.when("/data",{templateUrl:"static/dist/templates/data.html",controller:"DataVizController"}).when("/about",{templateUrl:"static/dist/templates/about.html",controller:"AboutPageController"}).otherwise({redirectTo:"/data"})}]),angular.module("app").filter("suppressions",function(){return function(t){return"-9999"===t?"NA":"-666666"===t?" &mdash; ":t}}).filter("sluggify",function(){return function(t){return t.toLowerCase().replace(/[^a-zA-Z0-9_]/g,"_")}}).filter("safe",["$sce",function(t){return t.trustAsHtml}]),angular.module("app").controller("AboutPageController",["$scope","$http","$log","$location","$anchorScroll","$rootScope","$routeParams","sidebarDisplay","contributors",function(t,e,o,n,r,l,a,i,c){t.toggle=i.toggle,console.log(t.toggle);var s=c.getContributors("all");s.then(function(e){t.contributors=c.list},function(t){alert("promise rejected!")}),t.$on("$viewContentLoaded",function(e){t.toggle.open=!1})}]),angular.module("app").controller("DataVizController",["$scope","$http","$log","$location","$anchorScroll","$rootScope","$routeParams","sidebarDisplay","categories","lodash",function(t,e,o,n,r,l,a,i,c,s){t.toggle=i.toggle;var u=c.getCategories("all");u.then(function(e){t.categories=c.list},function(t){alert("promise rejected!")}),t.$on("$viewContentLoaded",function(e){t.toggle.open=!0})}]),angular.module("app").directive("simpletable",function(){var t=tableChart();return{restrict:"E",scope:{data:"=data"},link:function(e,o,n){e.$watchCollection("data",function(e){d3.select(o[0]).datum(e).call(t)})}}}),angular.module("app").service("categories",["$http","$q","lodash",function(t,e,o){var n={};return n.list=[],n.toggle=function(t){position=o.findIndex(n.list,function(e){return e.name==t.name}),n.list[position].selected=!n.list[position].selected},n.getCategories=function(){return e(n.list.length>0?function(t){t(n)}:function(e,r){t.get("/static/dist/data/data.json").success(function(t){n.list=o.map(o.sortBy(t,"rank"),function(t){return o.extend({},t,{selected:!0})}),n.list,e(n)}).error(function(){r("There was an error getting categories")})})},n}]),angular.module("app").service("contributors",["$http","$q",function(t,e){var o={};return o.list=[],o.getContributors=function(){return e(o.list.length>0?function(t){t(o)}:function(e,n){t.get("/static/dist/data/contributors.json").success(function(t){o.list=t,e(o)}).error(function(){n("There was an error getting contributors")})})},o}]),angular.module("app").controller("SidebarController",["$scope","$log","lodash","categories","contributors",function(t,e,o,n,r){var l=n.getCategories();l.then(function(e){t.categories=n.list},function(t){alert("promise rejected!")});var a=r.getContributors();a.then(function(e){t.contributors=r.list},function(t){alert("promise rejected!")}),t.updateSelected=function(t){n.toggle(t),console.log(o.pluck(n.list,"selected"))},t.checkSelected=function(t){return t?"selected":"deselected"},t.$watchCollection(function(){return t.toggle},function(){console.log("toggled triggered from sidebar"),console.log(t.toggle)})}]),angular.module("app").service("sidebarDisplay",function(){return{toggle:{open:!0}}}),angular.module("app").controller("WrapController",["$scope","sidebarDisplay",function(t,e){t.toggle=e.toggle,t.$watchCollection(function(){return t.toggle},function(){console.log("toggled triggered from wrap"),console.log(t.toggle)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsInJvdXRlcy5qcyIsImZpbHRlcnMuanMiLCJhYm91dHBhZ2UvYWJvdXRwYWdlLmNvbnRyb2xsZXIuanMiLCJkYXRhdml6L2RhdGF2aXouY29udHJvbGxlci5qcyIsImRhdGF2aXovc2ltcGxldGFibGUuZGlyZWN0aXZlLmpzIiwic2lkZWJhci9jYXRlZ29yaWVzLnNlcnZpY2UuanMiLCJzaWRlYmFyL2NvbnRyaWJ1dG9ycy5zZXJ2aWNlLmpzIiwic2lkZWJhci9zaWRlYmFyLmNvbnRyb2xsZXIuanMiLCJzaWRlYmFyL3NpZGViYXJkaXNwbGF5LnNlcnZpY2UuanMiLCJzaWRlYmFyL3dyYXAuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiZmlsdGVyIiwiaW5wdXQiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCIkc2NlIiwidHJ1c3RBc0h0bWwiLCIkc2NvcGUiLCIkaHR0cCIsIiRsb2ciLCIkbG9jYXRpb24iLCIkYW5jaG9yU2Nyb2xsIiwiJHJvb3RTY29wZSIsIiRyb3V0ZVBhcmFtcyIsInNpZGViYXJEaXNwbGF5IiwiY29udHJpYnV0b3JzIiwidG9nZ2xlIiwiY29uc29sZSIsImxvZyIsImNvbnRyaWJ1dG9yUHJvbWlzZSIsImdldENvbnRyaWJ1dG9ycyIsInRoZW4iLCJyZXN1bHQiLCJsaXN0IiwicmVqZWN0aW9uIiwiYWxlcnQiLCIkb24iLCJldmVudCIsIm9wZW4iLCJjYXRlZ29yaWVzIiwibG9kYXNoIiwicHJvbWlzZSIsImdldENhdGVnb3JpZXMiLCJkaXJlY3RpdmUiLCJjaGFydCIsInRhYmxlQ2hhcnQiLCJyZXN0cmljdCIsInNjb3BlIiwiZGF0YSIsImxpbmsiLCJlbGVtZW50IiwiYXR0cnMiLCIkd2F0Y2hDb2xsZWN0aW9uIiwiZDMiLCJzZWxlY3QiLCJkYXR1bSIsImNhbGwiLCJzZXJ2aWNlIiwiJHEiLCJjYXRlZ29yeSIsInBvc2l0aW9uIiwiZmluZEluZGV4IiwibGlzdGNhdCIsIm5hbWUiLCJzZWxlY3RlZCIsImxlbmd0aCIsInJlc29sdmUiLCJyZWplY3QiLCJnZXQiLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJtYXAiLCJzb3J0QnkiLCJvIiwiZXh0ZW5kIiwiZXJyb3IiLCJjYXRlZ29yeVByb21pc2UiLCJ1cGRhdGVTZWxlY3RlZCIsInBsdWNrIiwiY2hlY2tTZWxlY3RlZCIsImJvb2wiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLEtBQUFDLFFBQUFDLE9BQUEsT0FDQSxZQUNBLGVBQ0EsV0FDQSxXQ0pBRCxTQUFBQyxPQUFBLE9BQ0FDLFFBQUEsaUJBQUEsb0JBQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFDQUUsS0FBQSxTQUNBQyxZQUFBLGtDQUNBQyxXQUFBLHNCQUVBRixLQUFBLFVBQ0FDLFlBQUEsbUNBQ0FDLFdBQUEsd0JBRUFDLFdBQ0FDLFdBQUEsYUNaQVQsUUFBQUMsT0FBQSxPQUNBUyxPQUFBLGVBQUEsV0FDQSxNQUFBLFVBQUFDLEdBQ0EsTUFBQSxVQUFBQSxFQUNBLEtBQ0EsWUFBQUEsRUFDQSxZQUVBQSxLQUlBRCxPQUFBLFdBQUEsV0FDQSxNQUFBLFVBQUFDLEdBQ0EsTUFBQUEsR0FBQUMsY0FBQUMsUUFBQSxpQkFBQSxRQUdBSCxPQUFBLFFBQUEsT0FBQSxTQUFBSSxHQUNBLE1BQUFBLEdBQUFDLGVDbEJBZixRQUFBQyxPQUFBLE9BQ0FNLFdBQUEsdUJBQ0EsU0FBQSxRQUFBLE9BQUEsWUFBQSxnQkFBQSxhQUFBLGVBQUEsaUJBQUEsZUFDQSxTQUFBUyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBUixFQUFBUyxPQUFBRixFQUFBRSxPQUNBQyxRQUFBQyxJQUFBWCxFQUFBUyxPQU9BLElBQUFHLEdBQUFKLEVBQUFLLGdC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LE9BQUFpQyxHQUNBaEMsUUFBQUMsSUFBQVksRUFBQXNDLE1BQUF2QyxFQUFBTixLQUFBLGNBR0FoQixFQUFBOEQsY0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQ0EsV0FFQSxjQUdBL0QsRUFBQW1DLGlCQUFBLFdBQ0EsTUFBQW5DLEdBQUFTLFFBQ0EsV0FDQUMsUUFBQUMsSUFBQSxrQ0FDQUQsUUFBQUMsSUFBQVgsRUFBQVMsYUN4Q0F6QixRQUFBQyxPQUFBLE9BQ0F1RCxRQUFBLGlCQUFBLFdBQ0EsT0FDQS9CLFFBQUFZLE1BQUEsTUNIQXJDLFFBQUFDLE9BQUEsT0FDQU0sV0FBQSxrQkFBQSxTQUFBLGlCQUFBLFNBQUFTLEVBQUFPLEdBQ0FQLEVBQUFTLE9BQUFGLEVBQUFFLE9BRUFULEVBQUFtQyxpQkFBQSxXQUNBLE1BQUFuQyxHQUFBUyxRQUNBLFdBQ0FDLFFBQUFDLElBQUEsK0JBQ0FELFFBQUFDLElBQUFYLEVBQUFTIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xuICAgICduZ0FuaW1hdGUnLFxuICAgICd1aS5ib290c3RyYXAnLFxuICAgICduZ0xvZGFzaCcsXG4gICAgJ25nUm91dGUnXG4gICAgXSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb25maWcoZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgICAgLndoZW4oJy9kYXRhJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvZGlzdC90ZW1wbGF0ZXMvZGF0YS5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdEYXRhVml6Q29udHJvbGxlcidcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9hYm91dCcsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL2Rpc3QvdGVtcGxhdGVzL2Fib3V0Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0Fib3V0UGFnZUNvbnRyb2xsZXInXG4gICAgICAgIH0pXG4gICAgICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICAgICAgcmVkaXJlY3RUbzogJy9kYXRhJ1xuICAgICAgICB9KTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uZmlsdGVyKCdzdXBwcmVzc2lvbnMnLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgaWYgKGlucHV0ID09PSAnLTk5OTknKSB7XG4gICAgICAgIHJldHVybiAnTkEnO1xuICAgIH0gZWxzZSBpZiAoaW5wdXQgPT09ICctNjY2NjY2Jykge1xuICAgICAgICByZXR1cm4gJyAmbWRhc2g7ICc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cbiAgfTtcbn0pXG4uZmlsdGVyKCdzbHVnZ2lmeScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gaW5wdXQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXmEtekEtWjAtOV9dL2csIFwiX1wiKVxuICAgIH07XG59KVxuLmZpbHRlcignc2FmZScsIGZ1bmN0aW9uKCRzY2UpIHtcbiAgICByZXR1cm4gJHNjZS50cnVzdEFzSHRtbDtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0Fib3V0UGFnZUNvbnRyb2xsZXInLFxuICAgIFsnJHNjb3BlJywgJyRodHRwJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRhbmNob3JTY3JvbGwnLCAnJHJvb3RTY29wZScsICckcm91dGVQYXJhbXMnLCAnc2lkZWJhckRpc3BsYXknLCAnY29udHJpYnV0b3JzJyxcbiAgICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkbG9nLCAkbG9jYXRpb24sICRhbmNob3JTY3JvbGwsICRyb290U2NvcGUsICRyb3V0ZVBhcmFtcywgc2lkZWJhckRpc3BsYXksIGNvbnRyaWJ1dG9ycyl7XG4gICAgICAgICRzY29wZS50b2dnbGUgPSBzaWRlYmFyRGlzcGxheS50b2dnbGU7XG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS50b2dnbGUpO1xuXG4gICAgICAgIC8vICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24obmV3Um91dGUsIG9sZFJvdXRlKSB7XG4gICAgICAgIC8vICAgICAkbG9jYXRpb24uaGFzaCgkcm91dGVQYXJhbXMuc2Nyb2xsVG8pO1xuICAgICAgICAvLyAgICAgJGFuY2hvclNjcm9sbCgpO1xuICAgICAgICAvLyB9KTtcblxuICAgICAgICB2YXIgY29udHJpYnV0b3JQcm9taXNlID0gY29udHJpYnV0b3JzLmdldENvbnRyaWJ1dG9ycyhcImFsbFwiKTtcbiAgICAgICAgY29udHJpYnV0b3JQcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAkc2NvcGUuY29udHJpYnV0b3JzID0gY29udHJpYnV0b3JzLmxpc3Q7XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAgICAgICAgYWxlcnQoXCJwcm9taXNlIHJlamVjdGVkIVwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIC8vIEkgbWFkZSBjaGFuZ2VzIHRvIHRoZSBzaWRlYmFyIGRpc3BsYXkgc2VydmljZSwgcmVuYW1pbmcgdGhlIGludGVybmFsXG4gICAgICAgICAgICAvLyBzZXR0aW5nIHRvIGJlIFwib3BlblwiLCB3aGljaCBtYWtlcyBpdCBlYXNpZXIgdG8gaW50ZXJwcmV0IHRoaXMuIEkgbWFkZVxuICAgICAgICAgICAgLy8gY29ycmVzcG9uZGluZyBjaGFuZ2VzIGluIHRoZSBhYm91dCBhbmQgZGF0YSB0ZW1wbGF0ZXMuXG4gICAgICAgICAgICAvLyBUaGlzIGxpc3RlbmVyIGVuc3VyZXMgdGhhdCB0aGUgc2lkZWJhciBkb2Vzbid0IGdldCBjbG9zZWQsIHdoaWNoIHNvbWVob3dcbiAgICAgICAgICAgIC8vIHJlc29sdmVzIHRoZSBpc3N1ZSBvZiByZW5kZXJpbmcgdGhlIHRlbXBsYXRlIHVuZGVybmVhdCB0aGUgc2xpZGVvdXQgbWVudVxuICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZS5vcGVuID0gZmFsc2U7XG4gICAgICAgIH0pO1xuXG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0RhdGFWaXpDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckaHR0cCcsICckbG9nJywgJyRsb2NhdGlvbicsICckYW5jaG9yU2Nyb2xsJywgJyRyb290U2NvcGUnLCAnJHJvdXRlUGFyYW1zJywgJ3NpZGViYXJEaXNwbGF5JywgJ2NhdGVnb3JpZXMnLCAnbG9kYXNoJyxcbiAgICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkbG9nLCAkbG9jYXRpb24sICRhbmNob3JTY3JvbGwsICRyb290U2NvcGUsICRyb3V0ZVBhcmFtcywgc2lkZWJhckRpc3BsYXksIGNhdGVnb3JpZXMsIGxvZGFzaCl7XG4gICAgICAgIHZhciBsbyA9IGxvZGFzaDtcbiAgICAgICAgJHNjb3BlLnRvZ2dsZSA9IHNpZGViYXJEaXNwbGF5LnRvZ2dsZTtcblxuICAgICAgICAvLyAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKG5ld1JvdXRlLCBvbGRSb3V0ZSkge1xuICAgICAgICAvLyAgICAgJGxvY2F0aW9uLmhhc2goJHJvdXRlUGFyYW1zLnNjcm9sbFRvKTtcbiAgICAgICAgLy8gICAgICRhbmNob3JTY3JvbGwoKTtcbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgdmFyIHByb21pc2UgPSBjYXRlZ29yaWVzLmdldENhdGVnb3JpZXMoXCJhbGxcIik7XG4gICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gY2F0ZWdvcmllcy5saXN0O1xuICAgICAgICB9LCBmdW5jdGlvbihyZWplY3Rpb24pIHtcbiAgICAgICAgICAgIGFsZXJ0KFwicHJvbWlzZSByZWplY3RlZCFcIik7XG4gICAgICAgIH0pXG5cbiAgICAgICAgICRzY29wZS4kb24oJyR2aWV3Q29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAkc2NvcGUudG9nZ2xlLm9wZW4gPSB0cnVlO1xuICAgICAgICB9KTtcbn1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uZGlyZWN0aXZlKCdzaW1wbGV0YWJsZScsIGZ1bmN0aW9uKCkge1xuICAgIC8vIFRoaXMgZnVuY3Rpb24gc2hvdWxkIHJlZmxlY3Qgd2hhdGV2ZXIgeW91ciBkMyB0YWJsZSBmdW5jdGlvbiBpcyBjYWxsZWQuXG4gICAgdmFyIGNoYXJ0ID0gdGFibGVDaGFydCgpO1xuICAgIHJldHVybiAge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgZGF0YTogXCI9ZGF0YVwiIC8vIFdlIGNhbiBjYWxsIHRoaXMgdy9lIHdlIHdhbnQuXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignZGF0YScsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QoZWxlbWVudFswXSkuZGF0dW0oZGF0YSkuY2FsbChjaGFydCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdjYXRlZ29yaWVzJywgWyckaHR0cCcsICckcScsICdsb2Rhc2gnLCBmdW5jdGlvbigkaHR0cCwgJHEsIGxvZGFzaCkge1xuICAgIHZhciBjYXRlZ29yaWVzID0ge307XG4gICAgY2F0ZWdvcmllcy5saXN0ID0gW107XG5cbiAgICBjYXRlZ29yaWVzLnRvZ2dsZSA9IGZ1bmN0aW9uKGNhdGVnb3J5KSB7XG4gICAgICAgIHBvc2l0aW9uID0gbG9kYXNoLmZpbmRJbmRleChjYXRlZ29yaWVzLmxpc3QsIGZ1bmN0aW9uKGxpc3RjYXQpIHtcbiAgICAgICAgICAgIHJldHVybiBsaXN0Y2F0Lm5hbWUgPT0gY2F0ZWdvcnkubmFtZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNhdGVnb3JpZXMubGlzdFtwb3NpdGlvbl0uc2VsZWN0ZWQgPSAhY2F0ZWdvcmllcy5saXN0W3Bvc2l0aW9uXS5zZWxlY3RlZDtcbiAgICB9O1xuXG4gICAgY2F0ZWdvcmllcy5nZXRDYXRlZ29yaWVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChjYXRlZ29yaWVzLmxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gaWYgdGhpcyBvYmplY3QgYWxyZWFkeSBoYXMgZGF0YSwganVzdCB1c2Ugd2hhdCdzIGN1cnJlbnRseSBhdmFpbGFibGVcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlKXtyZXNvbHZlKGNhdGVnb3JpZXMpfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UgZ2V0IGRhdGEgZnJlc2ggZnJvbSBmaWxlXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvc3RhdGljL2Rpc3QvZGF0YS9kYXRhLmpzb24nKVxuICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllcy5saXN0ID0gbG9kYXNoLm1hcChsb2Rhc2guc29ydEJ5KHJlc3BvbnNlLCBcInJhbmtcIiksIGZ1bmN0aW9uKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9kYXNoLmV4dGVuZCh7fSwgbywge1wic2VsZWN0ZWRcIiA6IHRydWV9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMubGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShjYXRlZ29yaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiVGhlcmUgd2FzIGFuIGVycm9yIGdldHRpbmcgY2F0ZWdvcmllc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gY2F0ZWdvcmllcztcbn1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnY29udHJpYnV0b3JzJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uKCRodHRwLCAkcSkge1xuICAgIHZhciBjb250cmlidXRvcnMgPSB7fTtcbiAgICBjb250cmlidXRvcnMubGlzdCA9IFtdO1xuXG4gICAgY29udHJpYnV0b3JzLmdldENvbnRyaWJ1dG9ycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoY29udHJpYnV0b3JzLmxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gaWYgdGhpcyBvYmplY3QgYWxyZWFkeSBoYXMgZGF0YSwganVzdCB1c2Ugd2hhdCdzIGN1cnJlbnRseSBhdmFpbGFibGVcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlKXtyZXNvbHZlKGNvbnRyaWJ1dG9ycyl9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSBnZXQgZGF0YSBmcmVzaCBmcm9tIGZpbGVcbiAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9zdGF0aWMvZGlzdC9kYXRhL2NvbnRyaWJ1dG9ycy5qc29uJylcbiAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyaWJ1dG9ycy5saXN0ID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGNvbnRyaWJ1dG9ycyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChcIlRoZXJlIHdhcyBhbiBlcnJvciBnZXR0aW5nIGNvbnRyaWJ1dG9yc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gY29udHJpYnV0b3JzO1xufV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdTaWRlYmFyQ29udHJvbGxlcicsXG4gICAgWyckc2NvcGUnLCAnJGxvZycsJ2xvZGFzaCcsICdjYXRlZ29yaWVzJywgJ2NvbnRyaWJ1dG9ycycsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkbG9nLCBsb2Rhc2gsIGNhdGVnb3JpZXMsIGNvbnRyaWJ1dG9ycykge1xuICAgICAgICAvLyAkc2NvcGUuc3RhdHVzID0ge1xuICAgICAgICAvLyAgICAgaXNvcGVuOiBmYWxzZVxuICAgICAgICAvLyB9O1xuXG4gICAgICAgIHZhciBjYXRlZ29yeVByb21pc2UgPSBjYXRlZ29yaWVzLmdldENhdGVnb3JpZXMoKTtcbiAgICAgICAgY2F0ZWdvcnlQcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IGNhdGVnb3JpZXMubGlzdDtcbiAgICAgICAgfSwgZnVuY3Rpb24ocmVqZWN0aW9uKSB7XG4gICAgICAgICAgICBhbGVydChcInByb21pc2UgcmVqZWN0ZWQhXCIpO1xuICAgICAgICB9KVxuXG4gICAgICAgIHZhciBjb250cmlidXRvclByb21pc2UgPSBjb250cmlidXRvcnMuZ2V0Q29udHJpYnV0b3JzKCk7XG4gICAgICAgIGNvbnRyaWJ1dG9yUHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgJHNjb3BlLmNvbnRyaWJ1dG9ycyA9IGNvbnRyaWJ1dG9ycy5saXN0O1xuICAgICAgICB9LCBmdW5jdGlvbihyZWplY3Rpb24pIHtcbiAgICAgICAgICAgIGFsZXJ0KFwicHJvbWlzZSByZWplY3RlZCFcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgdGhlIHByZXNlbnRhdGlvbiBvZiB0aGUgc2VsZWN0ZWQgaXRlbXMgaW5cbiAgICAgICAgLy8gdGhlIHNpZGViYXIgYW5kIHByb3BpZ2F0aW5nIHNlbGVjdGlvbnMgdGhyb3VnaCB0aGUgY2F0Z29yaWVzIHNlcnZpY2VcbiAgICAgICAgJHNjb3BlLnVwZGF0ZVNlbGVjdGVkID0gZnVuY3Rpb24oY2F0ZWdvcnkpIHtcbiAgICAgICAgICAgIGNhdGVnb3JpZXMudG9nZ2xlKGNhdGVnb3J5KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGxvZGFzaC5wbHVjayhjYXRlZ29yaWVzLmxpc3QsIFwic2VsZWN0ZWRcIikpXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmNoZWNrU2VsZWN0ZWQgPSBmdW5jdGlvbihib29sKSB7XG4gICAgICAgICAgICBpZiAoYm9vbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcInNlbGVjdGVkXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImRlc2VsZWN0ZWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLnRvZ2dsZTtcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInRvZ2dsZWQgdHJpZ2dlcmVkIGZyb20gc2lkZWJhclwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS50b2dnbGUpO1xuICAgICAgICB9KTtcbn1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnc2lkZWJhckRpc3BsYXknLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0b2dnbGU6IHsgb3BlbjogdHJ1ZSB9XG4gICAgfVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ1dyYXBDb250cm9sbGVyJywgWyckc2NvcGUnLCAnc2lkZWJhckRpc3BsYXknLCBmdW5jdGlvbigkc2NvcGUsIHNpZGViYXJEaXNwbGF5KSB7XG4gICAgJHNjb3BlLnRvZ2dsZSA9IHNpZGViYXJEaXNwbGF5LnRvZ2dsZTtcblxuICAgICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRzY29wZS50b2dnbGU7XG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0b2dnbGVkIHRyaWdnZXJlZCBmcm9tIHdyYXBcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudG9nZ2xlKTtcbiAgICAgICAgfSk7XG59XSlcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
