var app=angular.module("app",["ngAnimate","ui.bootstrap","ngLodash","ngRoute"]);angular.module("app").config(["$routeProvider","$locationProvider",function(t,e){t.when("/data",{templateUrl:"static/dist/templates/data.html",controller:"DataVizController"}).when("/about",{templateUrl:"static/dist/templates/about.html",controller:"AboutPageController"}).otherwise({redirectTo:"/data"})}]),angular.module("app").filter("suppressions",function(){return function(t){return"-9999"===t?"NA":"-666666"===t?" &mdash; ":t}}).filter("sluggify",function(){return function(t){return t.toLowerCase().replace(/[^a-zA-Z0-9_]/g,"_")}}).filter("safe",["$sce",function(t){return t.trustAsHtml}]),angular.module("app").controller("AboutPageController",["$scope","$http","$log","$location","$anchorScroll","$rootScope","$routeParams","sidebarDisplay","contributors",function(t,e,o,n,r,l,a,i,c){t.toggle=i.toggle,console.log(t.toggle),l.$on("$routeChangeSuccess",function(t,e){n.hash(a.scrollTo),r()});var s=c.getContributors("all");s.then(function(e){t.contributors=c.list},function(t){alert("promise rejected!")}),t.$on("$viewContentLoaded",function(e){t.toggle.open=!1})}]),angular.module("app").controller("DataVizController",["$scope","$http","$log","$location","$anchorScroll","$rootScope","$routeParams","sidebarDisplay","categories","lodash",function(t,e,o,n,r,l,a,i,c,s){t.toggle=i.toggle,l.$on("$routeChangeSuccess",function(t,e){n.hash(a.scrollTo),r()});var u=c.getCategories("all");u.then(function(e){t.categories=c.list},function(t){alert("promise rejected!")}),t.$on("$viewContentLoaded",function(e){t.toggle.open=!0})}]),angular.module("app").directive("simpletable",function(){var t=tableChart();return{restrict:"E",scope:{data:"=data"},link:function(e,o,n){e.$watchCollection("data",function(e){d3.select(o[0]).datum(e).call(t)})}}}),angular.module("app").service("categories",["$http","$q","lodash",function(t,e,o){var n={};return n.list=[],n.toggle=function(t){position=o.findIndex(n.list,function(e){return e.name==t.name}),n.list[position].selected=!n.list[position].selected},n.getCategories=function(){return e(n.list.length>0?function(t){t(n)}:function(e,r){t.get("/static/dist/data/data.json").success(function(t){n.list=o.map(o.sortBy(t,"rank"),function(t){return o.extend({},t,{selected:!0})}),n.list,e(n)}).error(function(){r("There was an error getting categories")})})},n}]),angular.module("app").service("contributors",["$http","$q",function(t,e){var o={};return o.list=[],o.getContributors=function(){return e(o.list.length>0?function(t){t(o)}:function(e,n){t.get("/static/dist/data/contributors.json").success(function(t){o.list=t,e(o)}).error(function(){n("There was an error getting contributors")})})},o}]),angular.module("app").controller("SidebarController",["$scope","$log","lodash","categories","contributors",function(t,e,o,n,r){var l=n.getCategories();l.then(function(e){t.categories=n.list},function(t){alert("promise rejected!")});var a=r.getContributors();a.then(function(e){t.contributors=r.list},function(t){alert("promise rejected!")}),t.updateSelected=function(t){n.toggle(t),console.log(o.pluck(n.list,"selected"))},t.checkSelected=function(t){return t?"selected":"deselected"},t.$watchCollection(function(){return t.toggle},function(){console.log("toggled triggered from sidebar"),console.log(t.toggle)})}]),angular.module("app").service("sidebarDisplay",function(){return{toggle:{open:!0}}}),angular.module("app").controller("WrapController",["$scope","sidebarDisplay",function(t,e){t.toggle=e.toggle,t.$watchCollection(function(){return t.toggle},function(){console.log("toggled triggered from wrap"),console.log(t.toggle)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsInJvdXRlcy5qcyIsImZpbHRlcnMuanMiLCJhYm91dHBhZ2UvYWJvdXRwYWdlLmNvbnRyb2xsZXIuanMiLCJkYXRhdml6L2RhdGF2aXouY29udHJvbGxlci5qcyIsImRhdGF2aXovc2ltcGxldGFibGUuZGlyZWN0aXZlLmpzIiwic2lkZWJhci9jYXRlZ29yaWVzLnNlcnZpY2UuanMiLCJzaWRlYmFyL2NvbnRyaWJ1dG9ycy5zZXJ2aWNlLmpzIiwic2lkZWJhci9zaWRlYmFyLmNvbnRyb2xsZXIuanMiLCJzaWRlYmFyL3NpZGViYXJkaXNwbGF5LnNlcnZpY2UuanMiLCJzaWRlYmFyL3dyYXAuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiZmlsdGVyIiwiaW5wdXQiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCIkc2NlIiwidHJ1c3RBc0h0bWwiLCIkc2NvcGUiLCIkaHR0cCIsIiRsb2ciLCIkbG9jYXRpb24iLCIkYW5jaG9yU2Nyb2xsIiwiJHJvb3RTY29wZSIsIiRyb3V0ZVBhcmFtcyIsInNpZGViYXJEaXNwbGF5IiwiY29udHJpYnV0b3JzIiwidG9nZ2xlIiwiY29uc29sZSIsImxvZyIsIiRvbiIsIm5ld1JvdXRlIiwib2xkUm91dGUiLCJoYXNoIiwic2Nyb2xsVG8iLCJjb250cmlidXRvclByb21pc2UiLCJnZXRDb250cmlidXRvcnMiLCJ0aGVuIiwicmVzdWx0IiwibGlzdCIsInJlamVjdGlvbiIsImFsZXJ0IiwiZXZlbnQiLCJvcGVuIiwiY2F0ZWdvcmllcyIsImxvZGFzaCIsInByb21pc2UiLCJnZXRDYXRlZ29yaWVzIiwiZGlyZWN0aXZlIiwiY2hhcnQiLCJ0YWJsZUNoYXJ0IiwicmVzdHJpY3QiLCJzY29wZSIsImRhdGEiLCJsaW5rIiwiZWxlbWVudCIsImF0dHJzIiwiJHdhdGNoQ29sbGVjdGlvbiIsImQzIiwic2VsZWN0IiwiZGF0dW0iLCJjYWxsIiwic2VydmljZSIsIiRxIiwiY2F0ZWdvcnkiLCJwb3NpdGlvbiIsImZpbmRJbmRleCIsImxpc3RjYXQiLCJuYW1lIiwic2VsZWN0ZWQiLCJsZW5ndGgiLCJyZXNvbHZlIiwicmVqZWN0IiwiZ2V0Iiwic3VjY2VzcyIsInJlc3BvbnNlIiwibWFwIiwic29ydEJ5IiwibyIsImV4dGVuZCIsImVycm9yIiwiY2F0ZWdvcnlQcm9taXNlIiwidXBkYXRlU2VsZWN0ZWQiLCJwbHVjayIsImNoZWNrU2VsZWN0ZWQiLCJib29sIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLE9BQ0EsWUFDQSxlQUNBLFdBQ0EsV0NKQUQsU0FBQUMsT0FBQSxPQUNBQyxRQUFBLGlCQUFBLG9CQUFBLFNBQUFDLEVBQUFDLEdBQ0FELEVBQ0FFLEtBQUEsU0FDQUMsWUFBQSxrQ0FDQUMsV0FBQSxzQkFFQUYsS0FBQSxVQUNBQyxZQUFBLG1DQUNBQyxXQUFBLHdCQUVBQyxXQUNBQyxXQUFBLGFDWkFULFFBQUFDLE9BQUEsT0FDQVMsT0FBQSxlQUFBLFdBQ0EsTUFBQSxVQUFBQyxHQUNBLE1BQUEsVUFBQUEsRUFDQSxLQUNBLFlBQUFBLEVBQ0EsWUFFQUEsS0FJQUQsT0FBQSxXQUFBLFdBQ0EsTUFBQSxVQUFBQyxHQUNBLE1BQUFBLEdBQUFDLGNBQUFDLFFBQUEsaUJBQUEsUUFHQUgsT0FBQSxRQUFBLE9BQUEsU0FBQUksR0FDQSxNQUFBQSxHQUFBQyxlQ2xCQWYsUUFBQUMsT0FBQSxPQUNBTSxXQUFBLHVCQUNBLFNBQUEsUUFBQSxPQUFBLFlBQUEsZ0JBQUEsYUFBQSxlQUFBLGlCQUFBLGVBQ0EsU0FBQVMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQVIsRUFBQVMsT0FBQUYsRUFBQUUsT0FDQUMsUUFB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cEIsRUFBQTBCLFdBQUFBLEVBQUFMLE1BQ0EsU0FBQUMsR0FDQUMsTUFBQSxzQkFHQSxJQUFBTixHQUFBVCxFQUFBVSxpQkFDQUQsR0FBQUUsS0FBQSxTQUFBQyxHQUNBcEIsRUFBQVEsYUFBQUEsRUFBQWEsTUFDQSxTQUFBQyxHQUNBQyxNQUFBLHVCQUtBdkIsRUFBQWdFLGVBQUEsU0FBQWxCLEdBQ0FwQixFQUFBakIsT0FBQXFDLEdBQ0FwQyxRQUFBQyxJQUFBZ0IsRUFBQXNDLE1BQUF2QyxFQUFBTCxLQUFBLGNBR0FyQixFQUFBa0UsY0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQ0EsV0FFQSxjQUdBbkUsRUFBQXVDLGlCQUFBLFdBQ0EsTUFBQXZDLEdBQUFTLFFBQ0EsV0FDQUMsUUFBQUMsSUFBQSxrQ0FDQUQsUUFBQUMsSUFBQVgsRUFBQVMsYUN4Q0F6QixRQUFBQyxPQUFBLE9BQ0EyRCxRQUFBLGlCQUFBLFdBQ0EsT0FDQW5DLFFBQUFnQixNQUFBLE1DSEF6QyxRQUFBQyxPQUFBLE9BQ0FNLFdBQUEsa0JBQUEsU0FBQSxpQkFBQSxTQUFBUyxFQUFBTyxHQUNBUCxFQUFBUyxPQUFBRixFQUFBRSxPQUVBVCxFQUFBdUMsaUJBQUEsV0FDQSxNQUFBdkMsR0FBQVMsUUFDQSxXQUNBQyxRQUFBQyxJQUFBLCtCQUNBRCxRQUFBQyxJQUFBWCxFQUFBUyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcbiAgICAnbmdBbmltYXRlJyxcbiAgICAndWkuYm9vdHN0cmFwJyxcbiAgICAnbmdMb2Rhc2gnLFxuICAgICduZ1JvdXRlJ1xuICAgIF0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29uZmlnKGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgIC53aGVuKCcvZGF0YScsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL2Rpc3QvdGVtcGxhdGVzL2RhdGEuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRGF0YVZpekNvbnRyb2xsZXInXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvYWJvdXQnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy9kaXN0L3RlbXBsYXRlcy9hYm91dC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBYm91dFBhZ2VDb250cm9sbGVyJ1xuICAgICAgICB9KVxuICAgICAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgICAgIHJlZGlyZWN0VG86ICcvZGF0YSdcbiAgICAgICAgfSk7XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmZpbHRlcignc3VwcHJlc3Npb25zJywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgIGlmIChpbnB1dCA9PT0gJy05OTk5Jykge1xuICAgICAgICByZXR1cm4gJ05BJztcbiAgICB9IGVsc2UgaWYgKGlucHV0ID09PSAnLTY2NjY2NicpIHtcbiAgICAgICAgcmV0dXJuICcgJm1kYXNoOyAnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG4gIH07XG59KVxuLmZpbHRlcignc2x1Z2dpZnknLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15hLXpBLVowLTlfXS9nLCBcIl9cIilcbiAgICB9O1xufSlcbi5maWx0ZXIoJ3NhZmUnLCBmdW5jdGlvbigkc2NlKSB7XG4gICAgcmV0dXJuICRzY2UudHJ1c3RBc0h0bWw7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdBYm91dFBhZ2VDb250cm9sbGVyJyxcbiAgICBbJyRzY29wZScsICckaHR0cCcsICckbG9nJywgJyRsb2NhdGlvbicsICckYW5jaG9yU2Nyb2xsJywgJyRyb290U2NvcGUnLCAnJHJvdXRlUGFyYW1zJywgJ3NpZGViYXJEaXNwbGF5JywgJ2NvbnRyaWJ1dG9ycycsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGxvZywgJGxvY2F0aW9uLCAkYW5jaG9yU2Nyb2xsLCAkcm9vdFNjb3BlLCAkcm91dGVQYXJhbXMsIHNpZGViYXJEaXNwbGF5LCBjb250cmlidXRvcnMpe1xuICAgICAgICAkc2NvcGUudG9nZ2xlID0gc2lkZWJhckRpc3BsYXkudG9nZ2xlO1xuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudG9nZ2xlKTtcblxuICAgICAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKG5ld1JvdXRlLCBvbGRSb3V0ZSkge1xuICAgICAgICAgICAgJGxvY2F0aW9uLmhhc2goJHJvdXRlUGFyYW1zLnNjcm9sbFRvKTtcbiAgICAgICAgICAgICRhbmNob3JTY3JvbGwoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGNvbnRyaWJ1dG9yUHJvbWlzZSA9IGNvbnRyaWJ1dG9ycy5nZXRDb250cmlidXRvcnMoXCJhbGxcIik7XG4gICAgICAgIGNvbnRyaWJ1dG9yUHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgJHNjb3BlLmNvbnRyaWJ1dG9ycyA9IGNvbnRyaWJ1dG9ycy5saXN0O1xuICAgICAgICB9LCBmdW5jdGlvbihyZWplY3Rpb24pIHtcbiAgICAgICAgICAgIGFsZXJ0KFwicHJvbWlzZSByZWplY3RlZCFcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS4kb24oJyR2aWV3Q29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAvLyBJIG1hZGUgY2hhbmdlcyB0byB0aGUgc2lkZWJhciBkaXNwbGF5IHNlcnZpY2UsIHJlbmFtaW5nIHRoZSBpbnRlcm5hbFxuICAgICAgICAgICAgLy8gc2V0dGluZyB0byBiZSBcIm9wZW5cIiwgd2hpY2ggbWFrZXMgaXQgZWFzaWVyIHRvIGludGVycHJldCB0aGlzLiBJIG1hZGVcbiAgICAgICAgICAgIC8vIGNvcnJlc3BvbmRpbmcgY2hhbmdlcyBpbiB0aGUgYWJvdXQgYW5kIGRhdGEgdGVtcGxhdGVzLlxuICAgICAgICAgICAgLy8gVGhpcyBsaXN0ZW5lciBlbnN1cmVzIHRoYXQgdGhlIHNpZGViYXIgZG9lc24ndCBnZXQgY2xvc2VkLCB3aGljaCBzb21laG93XG4gICAgICAgICAgICAvLyByZXNvbHZlcyB0aGUgaXNzdWUgb2YgcmVuZGVyaW5nIHRoZSB0ZW1wbGF0ZSB1bmRlcm5lYXQgdGhlIHNsaWRlb3V0IG1lbnVcbiAgICAgICAgICAgICRzY29wZS50b2dnbGUub3BlbiA9IGZhbHNlO1xuICAgICAgICB9KTtcblxufV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdEYXRhVml6Q29udHJvbGxlcicsXG4gICAgWyckc2NvcGUnLCAnJGh0dHAnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJGFuY2hvclNjcm9sbCcsICckcm9vdFNjb3BlJywgJyRyb3V0ZVBhcmFtcycsICdzaWRlYmFyRGlzcGxheScsICdjYXRlZ29yaWVzJywgJ2xvZGFzaCcsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGxvZywgJGxvY2F0aW9uLCAkYW5jaG9yU2Nyb2xsLCAkcm9vdFNjb3BlLCAkcm91dGVQYXJhbXMsIHNpZGViYXJEaXNwbGF5LCBjYXRlZ29yaWVzLCBsb2Rhc2gpe1xuICAgICAgICB2YXIgbG8gPSBsb2Rhc2g7XG4gICAgICAgICRzY29wZS50b2dnbGUgPSBzaWRlYmFyRGlzcGxheS50b2dnbGU7XG5cbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbihuZXdSb3V0ZSwgb2xkUm91dGUpIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5oYXNoKCRyb3V0ZVBhcmFtcy5zY3JvbGxUbyk7XG4gICAgICAgICAgICAkYW5jaG9yU2Nyb2xsKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBwcm9taXNlID0gY2F0ZWdvcmllcy5nZXRDYXRlZ29yaWVzKFwiYWxsXCIpO1xuICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IGNhdGVnb3JpZXMubGlzdDtcbiAgICAgICAgfSwgZnVuY3Rpb24ocmVqZWN0aW9uKSB7XG4gICAgICAgICAgICBhbGVydChcInByb21pc2UgcmVqZWN0ZWQhXCIpO1xuICAgICAgICB9KVxuXG4gICAgICAgICAkc2NvcGUuJG9uKCckdmlld0NvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZS5vcGVuID0gdHJ1ZTtcbiAgICAgICAgfSk7XG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmRpcmVjdGl2ZSgnc2ltcGxldGFibGUnLCBmdW5jdGlvbigpIHtcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIHNob3VsZCByZWZsZWN0IHdoYXRldmVyIHlvdXIgZDMgdGFibGUgZnVuY3Rpb24gaXMgY2FsbGVkLlxuICAgIHZhciBjaGFydCA9IHRhYmxlQ2hhcnQoKTtcbiAgICByZXR1cm4gIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGRhdGE6IFwiPWRhdGFcIiAvLyBXZSBjYW4gY2FsbCB0aGlzIHcvZSB3ZSB3YW50LlxuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAgIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oJ2RhdGEnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KGVsZW1lbnRbMF0pLmRhdHVtKGRhdGEpLmNhbGwoY2hhcnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnY2F0ZWdvcmllcycsIFsnJGh0dHAnLCAnJHEnLCAnbG9kYXNoJywgZnVuY3Rpb24oJGh0dHAsICRxLCBsb2Rhc2gpIHtcbiAgICB2YXIgY2F0ZWdvcmllcyA9IHt9O1xuICAgIGNhdGVnb3JpZXMubGlzdCA9IFtdO1xuXG4gICAgY2F0ZWdvcmllcy50b2dnbGUgPSBmdW5jdGlvbihjYXRlZ29yeSkge1xuICAgICAgICBwb3NpdGlvbiA9IGxvZGFzaC5maW5kSW5kZXgoY2F0ZWdvcmllcy5saXN0LCBmdW5jdGlvbihsaXN0Y2F0KSB7XG4gICAgICAgICAgICByZXR1cm4gbGlzdGNhdC5uYW1lID09IGNhdGVnb3J5Lm5hbWU7XG4gICAgICAgIH0pO1xuICAgICAgICBjYXRlZ29yaWVzLmxpc3RbcG9zaXRpb25dLnNlbGVjdGVkID0gIWNhdGVnb3JpZXMubGlzdFtwb3NpdGlvbl0uc2VsZWN0ZWQ7XG4gICAgfTtcblxuICAgIGNhdGVnb3JpZXMuZ2V0Q2F0ZWdvcmllcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoY2F0ZWdvcmllcy5saXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIGlmIHRoaXMgb2JqZWN0IGFscmVhZHkgaGFzIGRhdGEsIGp1c3QgdXNlIHdoYXQncyBjdXJyZW50bHkgYXZhaWxhYmxlXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSl7cmVzb2x2ZShjYXRlZ29yaWVzKX0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIGdldCBkYXRhIGZyZXNoIGZyb20gZmlsZVxuICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL3N0YXRpYy9kaXN0L2RhdGEvZGF0YS5qc29uJylcbiAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMubGlzdCA9IGxvZGFzaC5tYXAobG9kYXNoLnNvcnRCeShyZXNwb25zZSwgXCJyYW5rXCIpLCBmdW5jdGlvbihvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZGFzaC5leHRlbmQoe30sIG8sIHtcInNlbGVjdGVkXCIgOiB0cnVlfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzLmxpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoY2F0ZWdvcmllcyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChcIlRoZXJlIHdhcyBhbiBlcnJvciBnZXR0aW5nIGNhdGVnb3JpZXNcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGNhdGVnb3JpZXM7XG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ2NvbnRyaWJ1dG9ycycsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbigkaHR0cCwgJHEpIHtcbiAgICB2YXIgY29udHJpYnV0b3JzID0ge307XG4gICAgY29udHJpYnV0b3JzLmxpc3QgPSBbXTtcblxuICAgIGNvbnRyaWJ1dG9ycy5nZXRDb250cmlidXRvcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNvbnRyaWJ1dG9ycy5saXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIGlmIHRoaXMgb2JqZWN0IGFscmVhZHkgaGFzIGRhdGEsIGp1c3QgdXNlIHdoYXQncyBjdXJyZW50bHkgYXZhaWxhYmxlXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSl7cmVzb2x2ZShjb250cmlidXRvcnMpfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UgZ2V0IGRhdGEgZnJlc2ggZnJvbSBmaWxlXG4gICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvc3RhdGljL2Rpc3QvZGF0YS9jb250cmlidXRvcnMuanNvbicpXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cmlidXRvcnMubGlzdCA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShjb250cmlidXRvcnMpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoXCJUaGVyZSB3YXMgYW4gZXJyb3IgZ2V0dGluZyBjb250cmlidXRvcnNcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGNvbnRyaWJ1dG9ycztcbn1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignU2lkZWJhckNvbnRyb2xsZXInLFxuICAgIFsnJHNjb3BlJywgJyRsb2cnLCdsb2Rhc2gnLCAnY2F0ZWdvcmllcycsICdjb250cmlidXRvcnMnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSwgJGxvZywgbG9kYXNoLCBjYXRlZ29yaWVzLCBjb250cmlidXRvcnMpIHtcbiAgICAgICAgLy8gJHNjb3BlLnN0YXR1cyA9IHtcbiAgICAgICAgLy8gICAgIGlzb3BlbjogZmFsc2VcbiAgICAgICAgLy8gfTtcblxuICAgICAgICB2YXIgY2F0ZWdvcnlQcm9taXNlID0gY2F0ZWdvcmllcy5nZXRDYXRlZ29yaWVzKCk7XG4gICAgICAgIGNhdGVnb3J5UHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBjYXRlZ29yaWVzLmxpc3Q7XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAgICAgICAgYWxlcnQoXCJwcm9taXNlIHJlamVjdGVkIVwiKTtcbiAgICAgICAgfSlcblxuICAgICAgICB2YXIgY29udHJpYnV0b3JQcm9taXNlID0gY29udHJpYnV0b3JzLmdldENvbnRyaWJ1dG9ycygpO1xuICAgICAgICBjb250cmlidXRvclByb21pc2UudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICRzY29wZS5jb250cmlidXRvcnMgPSBjb250cmlidXRvcnMubGlzdDtcbiAgICAgICAgfSwgZnVuY3Rpb24ocmVqZWN0aW9uKSB7XG4gICAgICAgICAgICBhbGVydChcInByb21pc2UgcmVqZWN0ZWQhXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBGdW5jdGlvbnMgZm9yIG1hbmFnaW5nIHRoZSBwcmVzZW50YXRpb24gb2YgdGhlIHNlbGVjdGVkIGl0ZW1zIGluXG4gICAgICAgIC8vIHRoZSBzaWRlYmFyIGFuZCBwcm9waWdhdGluZyBzZWxlY3Rpb25zIHRocm91Z2ggdGhlIGNhdGdvcmllcyBzZXJ2aWNlXG4gICAgICAgICRzY29wZS51cGRhdGVTZWxlY3RlZCA9IGZ1bmN0aW9uKGNhdGVnb3J5KSB7XG4gICAgICAgICAgICBjYXRlZ29yaWVzLnRvZ2dsZShjYXRlZ29yeSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhsb2Rhc2gucGx1Y2soY2F0ZWdvcmllcy5saXN0LCBcInNlbGVjdGVkXCIpKVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5jaGVja1NlbGVjdGVkID0gZnVuY3Rpb24oYm9vbCkge1xuICAgICAgICAgICAgaWYgKGJvb2wpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzZWxlY3RlZFwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJkZXNlbGVjdGVkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRzY29wZS50b2dnbGU7XG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0b2dnbGVkIHRyaWdnZXJlZCBmcm9tIHNpZGViYXJcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudG9nZ2xlKTtcbiAgICAgICAgfSk7XG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ3NpZGViYXJEaXNwbGF5JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdG9nZ2xlOiB7IG9wZW46IHRydWUgfVxuICAgIH1cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdXcmFwQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ3NpZGViYXJEaXNwbGF5JywgZnVuY3Rpb24oJHNjb3BlLCBzaWRlYmFyRGlzcGxheSkge1xuICAgICRzY29wZS50b2dnbGUgPSBzaWRlYmFyRGlzcGxheS50b2dnbGU7XG5cbiAgICAkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkc2NvcGUudG9nZ2xlO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidG9nZ2xlZCB0cmlnZ2VyZWQgZnJvbSB3cmFwXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnRvZ2dsZSk7XG4gICAgICAgIH0pO1xufV0pXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
