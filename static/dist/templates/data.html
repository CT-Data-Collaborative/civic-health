<div id="page-content-wrapper" ng-controller="DataVizController">
  <div class="top-row">
    <div class="arrow_box">
      <div class="top-row-title">
        <i id="menu-toggle" class="fa fa-bars" ng-click="toggle.open = !toggle.open"></i>
        <h1>Civic Health Index</h1>
        <h5 class="pull-right"><a href="#about">About the Contributors</a></h5>
      </div>
    </div>
  </div>
  <div class="container-fluid main-internal">
    <div class="row">
      <div class="col-sm-12">
        <div ng-repeat="cat in categories" ng-show="cat.selected">
          <h2>{{cat.name}}</h2>
          <div class="col-sm-12" ng-repeat="datum in cat.data" style="overflow-x:auto;">
            <table class="ctdata-table">
                <thead>
                  <tr>
                    <th></th>
                    <th class="col-span-center col-name" colspan="2">State</th>
                    <th class="col-span-center col-name" colspan="2">National</th>
                    <th class="col-span-center col-name" colspan="4" ng-if="datum.Pooled">State - 3-Year Trend</th>
                    <th class="col-span-center col-name" colspan="4" ng-if="!datum.Pooled">State</th>
                  </tr>
                  <tr>
                    <th></th>
                    <th class="col-name">Estimate</th>
                    <th class="col-name">3-Year Trend</th>
                    <th class="col-name">Estimate</th>
                    <th class="col-name">3-Year Trend</th>
                    <th class="col-name">Rank</th>
                    <th class="col-name">Percentile</th>
                    <th class="col-name">Sample Size</th>
                    <th class="col-name">Margins of Error</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th class="name">
                      {{ datum["Indicator"] }}
                      <i ng-if="datum.timeseries" class="fa fa-line-chart timeseries_toggle" ng-click="toggleChart(datum.Indicator)"></i>
                    </th>
                    <td ng-bind-html="datum['State (2013)'] | suppressions | safe" class="value">{{ datum["State (2013)"] }}</td>
                    <td ng-bind-html="datum['State Trend (Pooled)'] | suppressions | safe" class="value">{{ datum["State Trend (Pooled)"] }}</td>
                    <td ng-bind-html="datum['National (2013)'] | suppressions | safe" class="value">{{ datum["National (2013)"] }}</td>
                    <td ng-bind-html="datum['National Trend (Pooled)'] | suppressions | safe" class="value">{{ datum["National Trend (Pooled)"] }}</td>
                    <td ng-bind-html="datum['Rank (2013)'] | suppressions | safe" class="value">{{ datum["Rank (2013)"] }}</td>
                    <td ng-bind-html="datum['Percentile (2013)'] | suppressions | safe" class="value">{{ datum["Percentile (2013)"] }}</td>
                    <td ng-bind-html="datum['Sample (2013)'] | suppressions | safe" class="value">{{ datum["Sample (2013)"] }}</td>
                    <td ng-bind-html="datum['Margins of Error (2013)'] | suppressions | safe" class="value">{{ datum["Margins of Error (2013)"] }}</td>
                  </tr>
                </tbody>
            </table>
            <timeseries style="display:none;" ng-if="datum.timeseries" data=datum.timeseriesdata id="{{datum.Indicator | sluggify}}"></timeseries>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <h5>A Note on Suppressions:</h5>
        <ul>
          <li>
            <p><strong>NA</strong> -  We do not calculate pooled estimates for voting because voting rates from Midterm and Presidential years are often too different to combine.</p>
          </li>
          <li>
            <p><strong>&mdash;</strong> - Certain indicators or indicator levels are presented as ranked or percentile values in the last four columns. For these indicators, all other indicator levels are not provided</p>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
