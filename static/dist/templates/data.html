<div id="page-content-wrapper" ng-controller="DataVizController">
  <div class="top-row">
    <div class="arrow_box">
      <div class="top-row-title">
        <i id="menu-toggle" class="fa fa-bars" ng-click="toggle.open = !toggle.open"></i>
        <h1>Civic Health Index</h1>
        <h5 class="pull-right"><a href="#about">Contributors</a></h5>
      </div>
    </div>
  </div>
  <div class="container-fluid main-internal">
    <div class="row about_index">
      <button type="button" class="btn btn-sm" ng-click="aboutCollapsed = !aboutCollapsed">
        About the Civic Health Index
      </button>
    </div>
    <div class="row">
      <div class="col-sm-6 about_index" collapse="aboutCollapsed">
        <p>
          DRAFT - The Civic Health Index looks at key indicators of civic life in Connecticut: how Connecticut residents engage in civic organizations and group activities, how attentive they are to community problem solving and politics, and how connected they are to family, friends, and neighbors.
          - Add list of advisory group members
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div ng-repeat="cat in categories" ng-show="cat.selected">
          <h2>{{cat.name}}</h2>
          <div class="col-sm-12 data-container" ng-repeat="datum in cat.data">
            <table class="ctdata-table">
                <thead>
                  <tr>
                    <th></th>
                    <th class="col-span-center col-name" colspan="2">State</th>
                    <th class="col-span-center col-name" colspan="2">National</th>
                    <th class="col-span-center col-name" colspan="4" ng-if="datum.Pooled">State - 3-Year Trend</th>
                    <th class="col-span-center col-name" colspan="4" ng-if="!datum.Pooled">State</th>
                  </tr>
                  <tr>
                    <th></th>
                    <th class="col-name">Estimate</th>
                    <th class="col-name">3-Year Trend</th>
                    <th class="col-name">Estimate</th>
                    <th class="col-name">3-Year Trend</th>
                    <th class="col-name">Rank</th>
                    <th class="col-name">Percentile</th>
                    <th class="col-name">Sample Size</th>
                    <th class="col-name">Margins of Error</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th class="name">
                      {{ datum["Indicator"] }}
                      <i ng-if="datum.timeseries" class="fa fa-line-chart timeseries_toggle" ng-click="toggleChart(datum.Indicator)"></i>
                    </th>
                    <td data-title="State Estimate" class="value">
                      {{ datum['State (2013)'] | number:1 | suppressions | percent | safe }}
                    </td>
                    <td data-title="State 3-Year Trend" class="value">
                      {{ datum['State Trend (Pooled)'] | number:1 | suppressions | percent | safe }}
                      <a ng-if="datum['State Trend (Pooled)']=='-9999'" href="#" tooltip="Pooled Estimates for voting are not calculated because voting rates from Midterm and Presidential years are often too different to combine."><i class="fa fa-question suppression_tip"></i></a>
                      <a ng-if="datum['State Trend (Pooled)']=='-666666'" href="#" tooltip="Certain indicators or indicator levels are presented as ranked or percentile values in the last four columns. For these indicators, all other indicator levels are not provided."><i class="fa fa-question suppression_tip"></i></a>
                    </td>
                    <td data-title="National Estimate" class="value">
                      {{ datum['National (2013)'] | number:1 | suppressions | percent | safe }}
                      <a ng-if="datum['National (2013)']=='-9999'" href="#" tooltip="Pooled Estimates for voting are not calculated because voting rates from Midterm and Presidential years are often too different to combine."><i class="fa fa-question suppression_tip"></i></a>
                      <a ng-if="datum['National (2013)']=='-666666'" href="#" tooltip="Certain indicators or indicator levels are presented as ranked or percentile values in the last four columns. For these indicators, all other indicator levels are not provided."><i class="fa fa-question suppression_tip"></i></a>
                    </td>
                    <td data-title="National 3-Year Trend" class="value">
                      {{ datum['National Trend (Pooled)'] | number:1 | suppressions | percent | safe }}
                      <a ng-if="datum['National Trend (Pooled)']=='-9999'" href="#" tooltip="Pooled Estimates for voting are not calculated because voting rates from Midterm and Presidential years are often too different to combine."><i class="fa fa-question suppression_tip"></i></a>
                      <a ng-if="datum['National Trend (Pooled)']=='-666666'" href="#" tooltip="Certain indicators or indicator levels are presented as ranked or percentile values in the last four columns. For these indicators, all other indicator levels are not provided."><i class="fa fa-question suppression_tip"></i></a>
                    </td>
                    <td data-title="{{datum.Pooled ? '3-Year State Trend Rank' : 'Rank'}}" class="value">
                      {{ datum['Rank (2013)'] | suppressions | safe }}
                      <a ng-if="datum['Rank (2013)']=='-9999'" href="#" tooltip="Pooled Estimates for voting are not calculated because voting rates from Midterm and Presidential years are often too different to combine."><i class="fa fa-question suppression_tip"></i></a>
                      <a ng-if="datum['Rank (2013)']=='-666666'" href="#" tooltip="Certain indicators or indicator levels are presented as ranked or percentile values in the last four columns. For these indicators, all other indicator levels are not provided."><i class="fa fa-question suppression_tip"></i></a>
                    </td>
                    <td data-title="{{datum.Pooled ? '3-Year State Trend Percentile' : 'Percentile'}}" class="value">
                      {{ datum['Percentile (2013)'] | suppressions | safe }}
                      <a ng-if="datum['Percentile (2013)']=='-9999'" href="#" tooltip="Pooled Estimates for voting are not calculated because voting rates from Midterm and Presidential years are often too different to combine."><i class="fa fa-question suppression_tip"></i></a>
                      <a ng-if="datum['Percentile (2013)']=='-666666'" href="#" tooltip="Certain indicators or indicator levels are presented as ranked or percentile values in the last four columns. For these indicators, all other indicator levels are not provided."><i class="fa fa-question suppression_tip"></i></a>
                    </td>
                    <td data-title="{{datum.Pooled ? '3-Year State Trend Sample Size' : 'Sample Size'}}" class="value">
                      {{ datum['Sample (2013)'] | suppressions | safe }}
                      <a ng-if="datum['Sample (2013)']=='-9999'" href="#" tooltip="Pooled Estimates for voting are not calculated because voting rates from Midterm and Presidential years are often too different to combine."><i class="fa fa-question suppression_tip"></i></a>
                      <a ng-if="datum['Sample (2013)']=='-666666'" href="#" tooltip="Certain indicators or indicator levels are presented as ranked or percentile values in the last four columns. For these indicators, all other indicator levels are not provided."><i class="fa fa-question suppression_tip"></i></a>
                    </td>
                    <td data-title="{{datum.Pooled ? '3-Year State Trend Margins of Error' : 'Margins of Error'}}" class="value">
                      {{ datum['Margins of Error (2013)'] | number:1 | suppressions | percent | safe }}
                      <a ng-if="datum['Margins of Error (2013)']=='-9999'" href="#" tooltip="Pooled Estimates for voting are not calculated because voting rates from Midterm and Presidential years are often too different to combine."><i class="fa fa-question suppression_tip"></i></a>
                      <a ng-if="datum['Margins of Error (2013)']=='-666666'" href="#" tooltip="Certain indicators or indicator levels are presented as ranked or percentile values in the last four columns. For these indicators, all other indicator levels are not provided."><i class="fa fa-question suppression_tip"></i></a>
                    </td>
                  </tr>
                </tbody>
            </table>
            <timeseries style="display:none;" ng-if="datum.timeseries" data=datum.timeseriesdata id="{{datum.Indicator | sluggify}}"></timeseries>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <h5>A Note on Suppressions:</h5>
        <ul>
          <li>
            <p><strong>NA</strong> - Pooled Estimates for voting are not calculated because voting rates from Midterm and Presidential years are often too different to combine.</p>
          </li>
          <li>
            <p><strong>*</strong> - Certain indicators or indicator levels are presented as ranked or percentile values in the last four columns. For these indicators, all other indicator levels are not provided</p>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
